{"version":3,"sources":["Components/MainInterface/AnimatedBackground.tsx","Components/neumorphColors.ts","Components/MainInterface/RotatedBackground.tsx","Components/MainInterface/InterfaceWrapper.tsx","Components/MainInterface/EditButton.tsx","Components/MainInterface/OtherButtons.tsx","api/api.ts","serviceFunctions/movePos.ts","redux/interfaceReducer.ts","redux/stateReducer.ts","Components/MainInterface/MainInterfaceContainer.tsx","Components/AppAnimatedWrappers/ScrollableElements/ScrollBar.tsx","Components/AppAnimatedWrappers/ScrollableElements/ScrollableWrapper.tsx","Components/Tasks/TaskButtons.tsx","serviceFunctions/validate.ts","Components/Tasks/TaskCheckbox.tsx","Components/Tasks/TodoListTask.tsx","Components/Tasks/TasksContainer.tsx","Components/SingleToDoList/TodoListTitle.tsx","Components/SingleToDoList/ContextButtons.tsx","Components/SingleToDoList/TodoList.tsx","Components/AppAnimatedWrappers/DruggedLists/CloseButton.tsx","Components/AppAnimatedWrappers/DruggedLists/AllListsContainer.tsx","serviceFunctions/swap.ts","Components/AppAnimatedWrappers/ScrollableElements/ScrollContainer.tsx","App.tsx","redux/store.ts","index.tsx"],"names":["library","add","far","fas","Background","styled","animated","div","withConfig","displayName","componentId","AnimatedBackground","currentPalette","useSelector","store","interface","currentPaletteIndex","shallowEqual","_useSpring","useSpring","background","_useSpring2","Object","slicedToArray","animateBackground","setBackground","useEffect","react_default","a","createElement","style","neumorphColors","concaveBackground","shadows","innerShadows","littleShadows","innerLittleShadows","progressBarColor","progressBarHoverColor","color","defaultPalette","default","props","$palette","InnerShadow","React","memo","_ref","palette","height","rotateZ","x","RotatedBackground_Background","isEqual","WholeWrapper","ButtonsWrapper","$height","InterfaceWrapper","width","children","interfaceHeight","EditButtonWrapper","ProgressBackground","InnerBackground","$cantBeHovered","InnerEditButtonText","ProgressCounter","switchEditMode","cantBeHovered","actionMessage","progressBarAnimation","textTransition","useTransition","from","opacity","y","enter","leave","onClick","value","to","toFixed","objectSpread2","translateY","RightButton","$editable","LeftButton","AdditionalButton","InnerSmallerButtonText","editable","switchScrollableState","addTodoList","rejectAllChanges","scrollableState","Fragment","isMobile","instance","axios","create","baseURL","withCredentials","headers","API-KEY","axiosRetry","retries","loginInstance","api","get","then","res","data","post","email","password","rememberMe","title","todoListId","concat","taskId","newTask","put","delete","newTitle","swappedTask","beforeSwappedTask","putAfterItemId","swappedList","beforeSwappedList","movePos","array","moveIndex","toIndex","item","length","diff","toConsumableArray","slice","initialState","focusedStatus","initialLoadingState","fetchingState","allTasks","completedTasks","closeLookState","animationInProgress","interfaceActions","status","type","tasks","restore","state","interfaceReducer","arguments","undefined","action","todoLists","deepCopy","listsOrder","tasksOrder","newListsId","newTasksId","stateActions","newTodoList","task","todoListTitle","newTasksOrder","newListsOrder","newTodoLists","getStateFromServer","initial","dispatch","lists","listsWithTasks","getTasks","regenerator_default","async","_context3","prev","next","awrap","sent","map","_context2","id","index","findIndex","list","items","abrupt","stop","Promise","all","setTimeout","stateReducer","filter","newSwappedTasks","i","cloneDeep","MainInterfaceContainer","useDispatch","todoList","initialLoading","closeLook","_useState","useState","_useState2","buttonsWrapperHeight","setButtonsHeight","isMounted","timeoutId","getHeight","getButtonHeight","window","innerHeight","Math","sqrt","pow","innerWidth","buttonHeight","resizeListener","clearTimeout","newHeight","newButtonHeight","addEventListener","removeEventListener","useCallback","replace","c","r","random","toString","getState","oldTodoLists","todoListsWithNewId","addedLists","deletedLists","editedLists","addedTasks","editedTasks","deletedTasks","createAndChangeIdOfTasksInOrderList","listPromises","currentOrder","swapOrder","_i","_swapOrder","_order","addedTasksInLists","currentListsStateOnServer","requiredOrder","_currentOrder","_swapOrder2","groupedSwapOrder","swapOrderPending","_context10","oldList","newList","forEach","find","push","oldTask","resultCode","tasksPromises","_context5","_context4","newId","oldId","tasksWithNewId","_context6","newListId","t0","thisListPosId","swappedId","beforeSwappedId","oldIndex","listId","order","currentList","listsToUpdate","listsOnServer","getListOrder","_context8","_context7","t1","currItem","orderFromCurrentState","itemWithUpdatedState","curItem","newOrder","currOrder","newTaskPosId","consistentSwapOrder","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","_order2","_context9","Symbol","iterator","done","return","finish","backgroundHeight","spring","setSpring","_useSpring3","_useSpring4","setProgressBar","isNaN","animate","_context","delay","prop","config","friction","useMemo","MainInterface_RotatedBackground","MainInterface_InterfaceWrapper","MainInterface_EditButton","MainInterface_OtherButtons","ScrollBarWrapper","$interfaceHeight","$visible","ScrollBarThing","$drugged","bindDraggedScrollBar","scrollBarHeight","visible","drugged","top","assign","AllLists","$closeLook","ScrollWrapper","$top","ScrollableWrapper","wrapperAnimation","measuredRef","translateX","ref","TaskButtonWrapper","Button","deleteTask","editTask","onEditClickHandler","useDrag","_ref2","tap","event","stopPropagation","onDeleteClickHandler","_ref3","react_fontawesome_index_es","icon","validate","test","CheckboxWrapper","Checkbox","input","Svg","svg","changeDoneStatus","checked","disabled","onChange","e","d","TaskWrapper","$editorState","TaskBackground","TaskText","contentEditable","editorState","setEditorState","textRef","useRef","current","focus","useLayoutEffect","textContent","currentTarget","onBlurHandler","taskTitle","onKeyDownHandler","keyCode","preventDefault","blur","captureClick","Tasks_TaskButtons","Tasks_TaskCheckbox","onKeyDown","onBlur","TasksWrapper","setHeight","setHoveredStatus","settings","down","originalIndex","calcY","bounds","scale","zIndex","initialYofDragged","immediate","initialY","indexOf","memoizedOrder","memoizedTasksId","heights","elementsBorder","elementsRef","setCurrentHeight","_useSprings","useSprings","_useSprings2","springs","setSprings","_useState3","_useState4","forceRerender","rerender","createRef","calcPositions","heightsArray","reduce","total","topBorder","center","bottomBorder","_","offsetHeight","deletedTaskIndex","deletedOrder","heightsSum","sum","getNewIndex","newIndex","abs","gesture","_ref2$args","args","trueIndex","movement","curIndex","curRow","newHeights","filterTaps","hovering","useHover","TasksContainer_TaskWrapper","key","Tasks_TodoListTask","ListTitle","listTitle","isTitleEditable","deleteTodoList","switchTitleMode","onKeyPressHandler","ButtonWrapper","styles","colors","addTask","editList","ContextButtons_Button","SingleListWrapper","$closeLookState","$animationInProgress","ListOuterLayer","ListShadow","$focusedStatus","$isTasksHovered","ListInnerLayer","listTasks","paletteIndex","setNewHeights","deleteList","currentLook","isTasksHovered","setTasksHoveredStatus","currHeight","filterValue","t","bind","_useState5","_useState6","setTitleEditMode","SingleToDoList_ContextButtons","SingleToDoList_TodoListTitle","Tasks_TasksContainer","CloseButtonAnimatedWrapper","CloseButton","closeButtonAnimation","returnFromCloseLook","TodoListContainer","$width","setWrapperAnimation","scrollByListDrugging","setCloseLookState","returnFromCloseLookState","switchScrollBar","gridItems","display","currentSettings","columns","currWidth","recalculateMeasures","Array","fill","heightInMeasuredArray","temporaryValue","column","rightX","botY","horizontalCenter","verticalCenter","max","apply","findHeight","newHeightsArray","deletedListIndex","deletedList","reorder","arr","index1","index2","val","idx","calculatePositions","xPos","yPos","halfHeight","setActualSprings","springsIndex","tension","clamp","n","left","right","bottom","pageTop","pageBottom","eventCoords","virtualY","addedY","getBounds","offsetX","offsetY","clientY","_ref2$movement","active","first","draggedList","clientX","awaitScroll","promise","resolve","setCloseButtonAnimation","indexOfLookedList","setIndexOfLookedList","itemY","itemX","rotateX","DruggedLists_CloseButton","SingleToDoList_TodoList","ScrollContainer","offsetWidth","border","_useState2$","setBorders","setDrugged","setVisible","_useState7","_useState8","closeLookForWrapper","setCloseLookForWrapper","scrolledY","scrolledPercent","addedScrollConst","memoizedData","scrollingAnimation","setScroll","newBorder","newScrollBarHeight","useWheel","delta","domTarget","swipeY","swipe","document","fullscreenElement","documentElement","requestFullscreen","exitFullscreen","scrolledHeight","posY","eventOptions","passive","absY","direction","elementHeight","visibility","ScrollableElements_ScrollableWrapper","DruggedLists_AllListsContainer","ScrollableElements_ScrollBar","GlobalStyles","createGlobalStyle","_templateObject","Wrapper","App","reloadFunction","location","reload","MainInterface_AnimatedBackground","MainInterface_MainInterfaceContainer","ScrollableElements_ScrollContainer","rootReducer","combineReducers","createStore","composeWithDevTools","applyMiddleware","thunk","root","getElementById","ReactDOM","unstable_createRoot","render","es","src_App_0"],"mappings":"kMASAA,IAAQC,IAAIC,IAAKC,KAGjB,IAAMC,EAAaC,YAAOC,WAASC,KAAnBC,WAAA,CAAAC,YAAA,iCAAAC,YAAA,YAAGL,CAAH,gDAqBDM,EAfqB,WAEhC,IAAMC,EAAiBC,YAAY,SAACC,GAAD,OAAyBA,EAAMC,UAAUC,qBAAqBC,KAF3DC,EAIKC,oBAAU,iBAAO,CACxDC,WAAYR,EAAeQ,cALOC,EAAAC,OAAAC,EAAA,EAAAD,CAAAJ,EAAA,GAI/BM,EAJ+BH,EAAA,GAIZI,EAJYJ,EAAA,GAYtC,OAJAK,oBAAU,WACND,EAAc,CAACL,WAAYR,EAAeQ,cAC3C,CAACR,EAAgBa,IAEbE,EAAAC,EAAAC,cAACzB,EAAD,CAAY0B,MAAON,qBC7BjBO,EAA4C,CACrD,CACIX,WAAY,UACZY,kBAAmB,4CACnBC,QAAS,mDACTC,aAAc,+DACdC,cAAe,+CACfC,mBAAoB,2DACpBC,iBAAkB,UAClBC,sBAAuB,UACvBC,MAAO,WAEX,CACInB,WAAY,UACZY,kBAAmB,4CACnBC,QAAS,mDACTC,aAAc,+DACdC,cAAe,+CACfC,mBAAoB,2DACpBC,iBAAkB,UAClBC,sBAAuB,UACvBC,MAAO,WAEX,CACInB,WAAY,UACZY,kBAAmB,4CACnBC,QAAS,mDACTC,aAAc,+DACdC,cAAe,+CACfC,mBAAoB,2DACpBC,iBAAkB,UAClBC,sBAAuB,UACvBC,MAAO,WAEX,CACInB,WAAY,UACZY,kBAAmB,4CACnBC,QAAS,mDACTC,aAAc,+DACdC,cAAe,+CACfC,mBAAoB,2DACpBC,iBAAkB,UAClBC,sBAAuB,UACvBC,MAAO,YAIFC,EAAqC,CAC9CpB,WAAY,UACZY,kBAAmB,6CACnBC,QAAS,mDACTC,aAAc,+DACdC,cAAe,+CACfI,MAAO,UACPH,mBAAoB,2DACpBC,iBAAkB,UAClBC,sBAAuB,UACvBG,SAAS,oBCpDPrC,EAAaC,YAAOC,WAASC,KAAnBC,WAAA,CAAAC,YAAA,gCAAAC,YAAA,YAAGL,CAAH,8KAGO,SAAAqC,GAAK,OAAIA,EAAMC,SAASF,QAAUD,EAAepB,WAAasB,EAAMC,SAASvB,YAKnF,SAAAsB,GAAK,OAAIA,EAAMC,SAASF,QAAUD,EAAeP,QAAUS,EAAMC,SAASV,UAGrFW,EAAcvC,IAAOE,IAAVC,WAAA,CAAAC,YAAA,iCAAAC,YAAA,YAAGL,CAAH,sFAKD,SAAAqC,GAAK,OAAIA,EAAMC,SAASF,QAAUD,EAAeN,aAAeQ,EAAMC,SAAST,eAmBhFW,MAAMC,KAT0B,SAAAC,GAAmC,IAAjCC,EAAiCD,EAAjCC,QAASC,EAAwBF,EAAxBE,OAAQC,EAAgBH,EAAhBG,QAASC,EAAOJ,EAAPI,EAEvE,OACIxB,EAAAC,EAAAC,cAACuB,EAAD,CAAYT,SAAUK,EAASlB,MAAO,CAACmB,SAAQC,UAASC,MACpDxB,EAAAC,EAAAC,cAACe,EAAD,CAAaD,SAAUK,MAKUK,KCrCvCC,EAAejD,YAAOC,WAASC,KAAnBC,WAAA,CAAAC,YAAA,iCAAAC,YAAA,YAAGL,CAAH,0IASZkD,EAAiBlD,IAAOE,IAAVC,WAAA,CAAAC,YAAA,mCAAAC,YAAA,YAAGL,CAAH,mGAET,SAAAqC,GAAK,MAAoB,GAAhBA,EAAMc,SACd,SAAAd,GAAK,MAAoB,GAAhBA,EAAMc,UAyBZC,EAZ+B,SAAAV,GACyB,IADvBW,EACuBX,EADvBW,MAAOT,EACgBF,EADhBE,OAAQU,EACQZ,EADRY,SAChBC,EAAwBb,EAAxBa,gBAAiBT,EAAOJ,EAAPI,EAE5D,OACIxB,EAAAC,EAAAC,cAACyB,EAAD,CAAcxB,MAAO,CAAC4B,QAAOT,SAAQE,MACjCxB,EAAAC,EAAAC,cAAC0B,EAAD,CAAgBC,QAASI,GACpBD,YC7BXE,EAAoBxD,IAAOE,IAAVC,WAAA,CAAAC,YAAA,gCAAAC,YAAA,eAAGL,CAAH,2GAGZ,SAAAqC,GAAK,MAAoB,GAAhBA,EAAMc,SACd,SAAAd,GAAK,MAAoB,GAAhBA,EAAMc,SAEX,SAAAd,GAAK,OAAIA,EAAMC,SAASF,QAAUD,EAAeP,QAAUS,EAAMC,SAASV,SAC1E,SAAAS,GAAK,OAAIA,EAAMC,SAASF,QAAUD,EAAepB,WAAasB,EAAMC,SAASvB,aAGvF0C,EAAqBzD,YAAOC,WAASC,KAAnBC,WAAA,CAAAC,YAAA,iCAAAC,YAAA,eAAGL,CAAH,iFAQlB0D,EAAkB1D,IAAOE,IAAVC,WAAA,CAAAC,YAAA,8BAAAC,YAAA,eAAGL,CAAH,kYACT,SAAAqC,GAAK,OAAIA,EAAMsB,eAAiB,UAAY,WAMlC,SAAAtB,GAAK,OAAIA,EAAMC,SAASF,QAAUD,EAAepB,WAAasB,EAAMC,SAASvB,YACxF,SAAAsB,GAAK,OAAIA,EAAMC,SAASF,QAAUD,EAAeD,MAAQG,EAAMC,SAASJ,OAcjE,SAAAG,GAAK,OAAIA,EAAMC,SAAST,cAItC,SAAAQ,GAAK,OAAKA,EAAMsB,gBAAP,gCAIPC,EAAsB5D,YAAOC,WAASC,KAAnBC,WAAA,CAAAC,YAAA,kCAAAC,YAAA,eAAGL,CAAH,iJASnB6D,EAAkB7D,YAAOC,WAASC,KAAnBC,WAAA,CAAAC,YAAA,8BAAAC,YAAA,eAAGL,CAAH,4IAgDNwC,MAAMC,KA/BmB,SAAAC,GAGO,IAFFoB,EAEEpB,EAFFoB,eAAgBnB,EAEdD,EAFcC,QAASoB,EAEvBrB,EAFuBqB,cAAeC,EAEtCtB,EAFsCsB,cACxCC,EACEvB,EADFuB,qBAAsBV,EACpBb,EADoBa,gBAGzDW,EAAiBC,wBAAcH,EAAe,CAChDI,KAAM,CAACC,QAAS,EAAGC,EAAG,SACtBC,MAAO,CAACF,QAAS,EAAGC,EAAG,MACvBE,MAAO,CAACH,QAAS,EAAGC,EAAG,UAG3B,OACIhD,EAAAC,EAAAC,cAACgC,EAAD,CAAmBiB,QAASX,EAAgBxB,SAAUK,EAASQ,QAASI,GACpEjC,EAAAC,EAAAC,cAACkC,EAAD,CAAiBpB,SAAUK,EACVgB,eAAgBI,GAC7BzC,EAAAC,EAAAC,cAACiC,EAAD,CAAoBhC,MAAO,CACvBmB,OAAQqB,EAAqBrB,OAC7ByB,QAASJ,EAAqBI,WAElC/C,EAAAC,EAAAC,cAACqC,EAAD,CAAiBpC,MAAO,CAAC4C,QAASJ,EAAqBI,UAClDJ,EAAqBS,MAAMC,GAAG,SAAAD,GAAK,OAAIA,EAAME,QAAQ,GAAK,QAE9DV,EAAe,SAACzC,GAAD,OACZH,EAAAC,EAAAC,cAACoC,EAAD,CAAqBnC,MAAKR,OAAA4D,EAAA,EAAA5D,CAAA,GAAMQ,EAAN,CAAaqD,WAAY,UAC9Cd,QAOahB,aCzGhC+B,EAAc/E,IAAOE,IAAVC,WAAA,CAAAC,YAAA,4BAAAC,YAAA,gBAAGL,CAAH,ylBAIN,SAAAqC,GAAK,MAAoB,GAAhBA,EAAMc,SACd,SAAAd,GAAK,MAAoB,GAAhBA,EAAMc,SAIX,SAAAd,GAAK,OAAIA,EAAMC,SAASF,QAAUD,EAAeL,cAAgBO,EAAMC,SAASR,eAChF,SAAAO,GAAK,OAAIA,EAAMC,SAASF,QAAUD,EAAepB,WAAasB,EAAMC,SAASvB,YAClF,SAAAsB,GAAK,OAAIA,EAAMC,SAASJ,OAGzB,SAAAG,GAAK,OAAIA,EAAM2C,UAAY,OAAS,OAG5B,SAAA3C,GAAK,OAAIA,EAAMC,SAASF,QAAUD,EAAepB,WAAasB,EAAMC,SAASvB,YAClF,SAAAsB,GAAK,OAAIA,EAAMC,SAASF,QAAUD,EAAeD,MAAQG,EAAMC,SAASJ,OAYnE,SAAAG,GAAK,OAAIA,EAAMC,SAASP,qBAOpCkD,EAAajF,YAAO+E,GAAV5E,WAAA,CAAAC,YAAA,2BAAAC,YAAA,gBAAGL,CAAH,cACN,SAAAqC,GAAK,OAAIA,EAAM2C,UAAY,OAAS,QAGxCE,EAAmBlF,YAAO+E,GAAV5E,WAAA,CAAAC,YAAA,iCAAAC,YAAA,gBAAGL,CAAH,cACZ,SAAAqC,GAAK,OAAIA,EAAM2C,UAAY,QAAU,QAGzCG,EAAyBnF,IAAOE,IAAVC,WAAA,CAAAC,YAAA,uCAAAC,YAAA,gBAAGL,CAAH,4FAuCbwC,MAAMC,KAxBqB,SAAAC,GAC0E,IADxEC,EACwED,EADxEC,QAASyC,EAC+D1C,EAD/D0C,SAAUC,EACqD3C,EADrD2C,sBAChB9B,EAAqEb,EAArEa,gBAAiB+B,EAAoD5C,EAApD4C,YAAaC,EAAuC7C,EAAvC6C,iBAAkBC,EAAqB9C,EAArB8C,gBAE3F,OACIlE,EAAAC,EAAAC,cAAAF,EAAAC,EAAAkE,SAAA,KACInE,EAAAC,EAAAC,cAACyD,EAAD,CAAYR,QAASa,EAAahD,SAAUK,EAASqC,UAAWI,EAAUjC,QAASI,GAC/EjC,EAAAC,EAAAC,cAAC2D,EAAD,kBAIJ7D,EAAAC,EAAAC,cAACuD,EAAD,CAAaN,QAASc,EAAkBjD,SAAUK,EAASqC,UAAWI,EAAUjC,QAASI,GACrFjC,EAAAC,EAAAC,cAAC2D,EAAD,wBAIHO,YACGpE,EAAAC,EAAAC,cAAC0D,EAAD,CAAkBT,QAASY,EAAuB/C,SAAUK,EAASqC,UAAWI,EAAUjC,QAASI,GAC9FiC,EAAkB,OAAS,YAORxC,+CCtFlC2C,EAAWC,IAAMC,OAAO,CAC1BC,QAAS,0DACTC,iBAAiB,EACjBC,QAAS,CACLC,UAAW,0CAGnBC,IAAWP,EAAU,CAAEQ,QAAS,IAEhC,IAAMC,EAAgBR,IAAMC,OAAO,CAC/BC,QAAS,oDACTC,iBAAiB,EACjBC,QAAS,CACLC,UAAW,0CAGnBC,IAAWE,EAAe,CAAED,QAAS,IAkB9B,IAAME,EACK,WACV,OAAOD,EAAcE,IAAmC,OAAOC,KAAK,SAAAC,GAAG,OAAIA,EAAIC,QAF1EJ,EAIF,WAEH,OAAOD,EAAcM,KAA6C,SAD5C,CAACC,MAAO,sBAAuBC,SAAU,SAAUC,YAAY,IAEhFN,KAAK,SAAAC,GAAG,OAAIA,EAAIC,QAPhBJ,EASK,WACV,OAAOV,EAASW,IAAyB,IAAIC,KAAK,SAAAC,GAAG,OAAIA,EAAIC,QAVxDJ,EAYI,SAACS,GACV,OAAOnB,EAASe,KAAiD,GAAI,CAACI,UAAQP,KAAK,SAAAC,GAAG,OAAIA,EAAIC,QAbzFJ,EAeK,SAACU,GACX,OAAOpB,EAASW,IAAT,IAAAU,OAA2CD,EAA3C,WAA+DR,KAAK,SAAAC,GAAG,OAAIA,EAAIC,QAhBjFJ,GAkBA,SAACS,EAAeC,GACrB,OAAOpB,EAASe,KAAT,IAAAM,OAA0DD,EAA1D,UAA8E,CAACD,UACjFP,KAAK,SAAAC,GAAG,OAAIA,EAAIC,QApBhBJ,GAsBG,SAACU,EAAoBE,EAAgBC,GAC7C,OAAOvB,EAASwB,IAAT,IAAAH,OAAyDD,EAAzD,WAAAC,OAA6EC,GAAUC,GACzFX,KAAK,SAAAC,GAAG,OAAIA,EAAIC,QAxBhBJ,GA0BO,SAACU,GACb,OAAOpB,EAASyB,OAAT,IAAAJ,OAA4CD,IAAcR,KAAK,SAAAC,GAAG,OAAIA,EAAIC,QA3B5EJ,GA6BG,SAACU,EAAoBE,GAC7B,OAAOtB,EAASyB,OAAT,IAAAJ,OAA4DD,EAA5D,WAAAC,OAAgFC,IAClFV,KAAK,SAAAC,GAAG,OAAIA,EAAIC,QA/BhBJ,GAiCY,SAACU,EAAoBM,GACtC,OAAO1B,EAASwB,IAAT,IAAAH,OAAmDD,GAAc,CAACD,MAAOO,IAC3Ed,KAAK,SAAAC,GAAG,OAAIA,EAAIC,QAnChBJ,GAqCE,SAACU,EAAoBO,EAAqBC,GACjD,OAAO5B,EAASwB,IAAT,IAAAH,OAAyCD,EAAzC,WAAAC,OAA6DM,EAA7D,YAAoF,CAACE,eAAgBD,IACvGhB,KAAK,SAAAC,GAAG,OAAIA,EAAIC,QAvChBJ,GAyCK,SAACoB,EAAqBC,GAChC,OAAO/B,EAASwB,IAAT,IAAAH,OAAyCS,EAAzC,YAAgE,CAACD,eAAgBE,IACnFnB,KAAK,SAAAC,GAAG,OAAIA,EAAIC,iBCjFhBkB,GAAW,SAACC,EAAmBC,EAAmBC,GAW3D,IAAIC,EAAOH,EAAMC,GACbG,EAASJ,EAAMI,OACfC,EAAOJ,EAAYC,EAEvB,OAAIG,EAAO,EAEP,GAAAjB,OAAA/F,OAAAiH,EAAA,EAAAjH,CACO2G,EAAMO,MAAM,EAAGL,IADtB,CAEIC,GAFJ9G,OAAAiH,EAAA,EAAAjH,CAGO2G,EAAMO,MAAML,EAASD,IAH5B5G,OAAAiH,EAAA,EAAAjH,CAIO2G,EAAMO,MAAMN,EAAY,EAAGG,KAE3BC,EAAO,EAEd,GAAAjB,OAAA/F,OAAAiH,EAAA,EAAAjH,CACO2G,EAAMO,MAAM,EAAGN,IADtB5G,OAAAiH,EAAA,EAAAjH,CAEO2G,EAAMO,MAAMN,EAAY,EAAGC,EAAU,IAF5C,CAGIC,GAHJ9G,OAAAiH,EAAA,EAAAjH,CAIO2G,EAAMO,MAAML,EAAU,EAAGE,KAG7BJ,GCdLQ,GAAe,CACjBC,eAAe,EACf1H,oBAAqBwB,EACrBmG,qBAAqB,EACrBC,cAAe,KACf3F,OAAQ,EACRS,MAAO,EACPE,gBAAiB,EACjBiF,SAAU,EACVC,eAAgB,EAChBC,gBAAgB,EAChBlD,iBAAiB,EACjBmD,qBAAqB,GA6DZC,GACS,SAACC,GAAD,MAAsB,CAACC,KAAM,sCAAuCD,WAD7ED,GAEG,SAACjG,GAAD,MAAkC,CAACmG,KAAM,6CAA8CnG,YAF1FiG,GAGoB,iBAAO,CAACE,KAAM,oDAHlCF,GAIE,SAAChG,GAAD,MAAqB,CAACkG,KAAM,8BAA+BlG,WAJ7DgG,GAKC,SAACvF,GAAD,MAAoB,CAACyF,KAAM,6BAA8BzF,UAL1DuF,GAMW,SAAChG,GAAD,MAAqB,CAACkG,KAAM,wCAAyClG,WANhFgG,GAOI,SAACG,GAAD,MAAoB,CAACD,KAAM,iCAAkCC,UAPjEH,GAQS,SAACI,GAAD,MAAuB,CAACF,KAAM,sCAAuCE,YAR9EJ,GASS,SAACK,GAAD,MAA2B,CAACH,KAAM,sCAAuCG,UATlFL,GAUU,SAACK,GAAD,MAAqB,CAACH,KAAM,wCAAyCG,UAV/EL,GAWW,SAACK,GAAD,MAAqB,CAACH,KAAM,wCAAyCG,UAK9EC,GA1EU,WAA6F,IAA5FD,EAA4FE,UAAAnB,OAAA,QAAAoB,IAAAD,UAAA,GAAAA,UAAA,GAAlEf,GAAciB,EAAoDF,UAAAnB,OAAA,EAAAmB,UAAA,QAAAC,EAClH,OAAQC,EAAOP,MACX,IAAK,sCACD,OAAO7H,OAAA4D,EAAA,EAAA5D,CAAA,GACAgI,EADP,CAEIZ,cAAegB,EAAOR,SAE9B,IAAK,6CACD,OAAO5H,OAAA4D,EAAA,EAAA5D,CAAA,GACAgI,EADP,CAEItI,oBAAqB0I,EAAO1G,UAEpC,IAAK,kDACD,OAAO1B,OAAA4D,EAAA,EAAA5D,CAAA,GACAgI,EADP,CAEIX,qBAAqB,IAE7B,IAAK,8BACD,OAAOrH,OAAA4D,EAAA,EAAA5D,CAAA,GACAgI,EADP,CAEIrG,OAAQyG,EAAOzG,SAEvB,IAAK,6BACD,OAAO3B,OAAA4D,EAAA,EAAA5D,CAAA,GACAgI,EADP,CAEI5F,MAAOgG,EAAOhG,QAEtB,IAAK,wCACD,OAAOpC,OAAA4D,EAAA,EAAA5D,CAAA,GACAgI,EADP,CAEI1F,gBAAiB8F,EAAOzG,SAEhC,IAAK,iCACD,OAAO3B,OAAA4D,EAAA,EAAA5D,CAAA,GACAgI,EADP,CAEIT,SAAUa,EAAON,QAEzB,IAAK,sCACD,OAAO9H,OAAA4D,EAAA,EAAA5D,CAAA,GACAgI,EADP,CAEIR,eAAgBY,EAAOL,QAAU,EAAIC,EAAMR,eAAe,IAElE,IAAK,wCACD,OAAOxH,OAAA4D,EAAA,EAAA5D,CAAA,GACAgI,EADP,CAEIP,eAAgBW,EAAOJ,MACvBN,oBAAqBU,EAAOJ,QAEpC,IAAK,wCACD,OAAOhI,OAAA4D,EAAA,EAAA5D,CAAA,GACAgI,EADP,CAEIzD,gBAAiB6D,EAAOJ,QAEhC,QACI,OAAOA,ICrEbb,GAAe,CACjBkB,UAAW,GACXC,SAAU,GACVnE,UAAU,EACVoE,WAAY,GACZC,WAAY,GACZC,WAAY,GACZC,WAAY,IAqHHC,GACI,SAACC,GAAD,MAAgC,CAACf,KAAM,6BAA8Be,gBADzED,GAEA,SAAC1C,EAAmBH,GAApB,MAA4C,CAAC+B,KAAM,wBAAyB5B,UAASH,eAFrF6C,GAGG,SAACE,GAAD,MAAqB,CAAChB,KAAM,2BAA4BgB,SAH3DF,GAIO,SAAC7C,GAAD,MAAyB,CAAC+B,KAAM,gCAAiC/B,eAJxE6C,GAKG,SAAC7C,EAAoBE,GAArB,MAAyC,CAAC6B,KAAM,2BAA4B7B,SAAQF,eALvF6C,GAYY,SAAC7C,EAAoBgD,GAArB,MAAgD,CACjEjB,KAAM,sCACN/B,aACAgD,kBAfKH,GAiBO,iBAAO,CAACd,KAAM,kCAjBrBc,GAkBQ,iBAAO,CAACd,KAAM,mCAlBtBc,GAmBE,SAAC7C,EAAoBiD,GAArB,MAAuD,CAC9DlB,KAAM,0BAA2B/B,aAAYiD,kBApBxCJ,GAsBM,SAACK,GAAD,MAAmC,CAACnB,KAAM,+BAAgCmB,kBAtBhFL,GAuBK,SAACM,GAAD,MAAwC,CAACpB,KAAM,0BAA2BoB,iBAvB/EN,GAwBS,iBAAO,CAACd,KAAM,oCA6C9BqB,GAAqB,SAACC,GAAD,OAAiC,SAAOC,GAAP,IAAAC,EAAAC,EAAAC,EAAA,OAAAC,EAAAlJ,EAAAmJ,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACnDT,GAASC,EAASzB,GAAkC,sBADD+B,EAAAE,KAAA,EAAAJ,EAAAlJ,EAAAuJ,MAEpCzE,KAFoC,UAElDiE,EAFkDK,EAAAI,KAGpDR,EAAiBD,EACA,IAAjBA,EAAMtC,OAJ8C,CAAA2C,EAAAE,KAAA,gBAKpDR,EAASzB,GAA6B0B,EAAMtC,SAC5CqC,EAASzB,IAAkC,IACrC4B,EAAWF,EAAMU,IAAI,SAAOjD,GAAP,OAAA0C,EAAAlJ,EAAAmJ,MAAA,SAAAO,GAAA,cAAAA,EAAAL,KAAAK,EAAAJ,MAAA,cAAAI,EAAAJ,KAAA,EAAAJ,EAAAlJ,EAAAuJ,MACVzE,EAAiB0B,EAAKmD,IAAI3E,KAAK,SAAAE,GACxC,IAAM0E,EAAQZ,EAAea,UAAU,SAAAC,GAAI,OAAItD,EAAKmD,KAAOG,EAAKH,KAChEX,EAAeY,GAAflK,OAAA4D,EAAA,EAAA5D,CAAA,GAA4B8G,EAA5B,CAAkCgB,MAAOtC,EAAK6E,QAC9CjB,EAASzB,IAAkC,OAJxB,cAAAqC,EAAAM,OAAA,SAAAN,EAAAF,MAAA,wBAAAE,EAAAO,YAPyBb,EAAAE,KAAA,GAAAJ,EAAAlJ,EAAAuJ,MAc9CW,QAAQC,IAAIlB,IAdkC,QAgBxDH,EAAST,GAA0BW,IAC/BH,GAASuB,WAAW,kBAAMtB,EAASzB,OAAiD,KAjBhC,yBAAA+B,EAAAa,YAwV7CI,GA/gBM,WAAwF,IAAvF3C,EAAuFE,UAAAnB,OAAA,QAAAoB,IAAAD,UAAA,GAAAA,UAAA,GAA7Df,GAAciB,EAA+CF,UAAAnB,OAAA,EAAAmB,UAAA,QAAAC,EACzG,OAAQC,EAAOP,MACX,IAAK,8BACD,OAAO7H,OAAA4D,EAAA,EAAA5D,CAAA,GACAgI,EADP,CAEIK,UAAWD,EAAOC,YAE1B,IAAK,yBACD,OAAOrI,OAAA4D,EAAA,EAAA5D,CAAA,GACAgI,EADP,CAEIK,UAAWL,EAAMK,UAAU0B,IAAI,SAAAK,GAC3B,OAAIA,EAAKH,KAAO7B,EAAOtC,WACZ9F,OAAA4D,EAAA,EAAA5D,CAAA,GAAIoK,EAAX,CAAiBtC,MAAOM,EAAON,QACrBsC,MAG1B,IAAK,6BACD,OAAOpK,OAAA4D,EAAA,EAAA5D,CAAA,GACAgI,EADP,CAEIK,UAAS,CAAGD,EAAOQ,aAAV7C,OAAA/F,OAAAiH,EAAA,EAAAjH,CAA0BgI,EAAMK,cAEjD,IAAK,wBACD,OAAOrI,OAAA4D,EAAA,EAAA5D,CAAA,GACAgI,EADP,CAEIK,UAAWL,EAAMK,UAAU0B,IAAI,SAAAK,GAC3B,OAAIA,EAAKH,KAAO7B,EAAOtC,WACZ9F,OAAA4D,EAAA,EAAA5D,CAAA,GAAIoK,EAAX,CAAiBtC,MAAK,CAAGM,EAAOnC,SAAVF,OAAA/F,OAAAiH,EAAA,EAAAjH,CAAsBoK,EAAKtC,UACvCsC,MAG1B,IAAK,2BACD,OAAOpK,OAAA4D,EAAA,EAAA5D,CAAA,GACAgI,EADP,CAEIK,UAAWL,EAAMK,UAAU0B,IAAI,SAAAK,GAC3B,OAAIA,EAAKH,KAAO7B,EAAOS,KAAK/C,WACjB9F,OAAA4D,EAAA,EAAA5D,CAAA,GACAoK,EADP,CACatC,MAAOsC,EAAKtC,MAAMiC,IAAI,SAAAlB,GAC3B,OAAIA,EAAKoB,KAAO7B,EAAOS,KAAKoB,GACjBjK,OAAA4D,EAAA,EAAA5D,CAAA,GAAIoI,EAAOS,MACRA,MAGZuB,MAG1B,IAAK,gCACD,OAAOpK,OAAA4D,EAAA,EAAA5D,CAAA,GACAgI,EADP,CAEIK,UAAWL,EAAMK,UAAUuC,OAAO,SAAAR,GAAI,OAAIA,EAAKH,KAAO7B,EAAOtC,eAErE,IAAK,2BACD,OAAO9F,OAAA4D,EAAA,EAAA5D,CAAA,GACAgI,EADP,CAEIK,UAAWL,EAAMK,UAAU0B,IAAI,SAAAK,GAC3B,OAAIA,EAAKH,KAAO7B,EAAOtC,WACZ9F,OAAA4D,EAAA,EAAA5D,CAAA,GAAIoK,EAAX,CAAiBtC,MAAOsC,EAAKtC,MAAM8C,OAAO,SAAA/B,GAAI,OAAIA,EAAKoB,KAAO7B,EAAOpC,WAC3DoE,MAG1B,IAAK,sCACD,OAAOpK,OAAA4D,EAAA,EAAA5D,CAAA,GACAgI,EADP,CAEIK,UAAWL,EAAMK,UAAU0B,IAAI,SAAAK,GAC3B,OAAIA,EAAKH,KAAO7B,EAAOtC,WACZ9F,OAAA4D,EAAA,EAAA5D,CAAA,GAAIoK,EAAX,CAAiBvE,MAAOuC,EAAOU,gBACrBsB,MAG1B,IAAK,+BACD,OAAOpK,OAAA4D,EAAA,EAAA5D,CAAA,GACAgI,EADP,CAEIO,WAAYH,EAAOY,gBAE3B,IAAK,0BACD,IAAMkB,EAAQlC,EAAMQ,WAAW2B,UAAU,SAAArD,GAAI,OAAIA,EAAKhB,aAAesC,EAAOtC,aACtE+E,GAA6B,IAAXX,EAAelC,EAAMQ,WAAWuB,IAAI,SAACjD,EAAMgE,GAC/D,OAAIA,IAAMZ,EAAc,CAACpE,WAAYsC,EAAOtC,WAAYiD,cAAeX,EAAOW,eACvEjC,IAFa,GAAAf,OAAA/F,OAAAiH,EAAA,EAAAjH,CAGfgI,EAAMQ,YAHS,CAGG,CAAC1C,WAAYsC,EAAOtC,WAAYiD,cAAeX,EAAOW,iBACjF,OAAO/I,OAAA4D,EAAA,EAAA5D,CAAA,GACAgI,EADP,CAEIQ,WAAYqC,IAEpB,IAAK,gCACD,OAAO7K,OAAA4D,EAAA,EAAA5D,CAAA,GACAgI,EADP,CAEI7D,UAAU,EACVoE,WAAY,GACZC,WAAY,GACZF,SAAUyC,aAAU/C,EAAMK,aAElC,IAAK,iCACD,OAAOrI,OAAA4D,EAAA,EAAA5D,CAAA,GACAgI,EADP,CAEI7D,UAAU,IAElB,IAAK,0BACD,OAAOnE,OAAA4D,EAAA,EAAA5D,CAAA,GACAgI,EADP,CAEIK,UAAWD,EAAOa,eAE1B,IAAK,kCACD,OAAOjJ,OAAA4D,EAAA,EAAA5D,CAAA,GACAgI,EADP,CAEIK,UAAWL,EAAMM,SACjBnE,UAAU,EACVoE,WAAY,GACZC,WAAY,KAEpB,QACI,OAAOR,ICgCJgD,GA9JgB,WAE3B,IAAM5B,EAAW6B,cACX9G,EAAW5E,YAAY,SAACyI,GAAD,OAAyBA,EAAMkD,SAAS/G,UAAUxE,KACzEL,EAAiBC,YAAY,SAACyI,GAAD,OAAyBA,EAAMvI,UAAUC,qBAAqBC,KAC3FwL,EAAiB5L,YAAY,SAACyI,GAAD,OAAyBA,EAAMvI,UAAU4H,qBAAqB1H,KAC3F4H,EAAWhI,YAAY,SAACyI,GAAD,OAAyBA,EAAMvI,UAAU8H,UAAU5H,KAC1E6H,EAAiBjI,YAAY,SAACyI,GAAD,OAAyBA,EAAMvI,UAAU+H,gBAAgB7H,KACtF2H,EAAgB/H,YAAY,SAACyI,GAAD,OAAyBA,EAAMvI,UAAU6H,eAAe3H,KACpFyL,EAAY7L,YAAY,SAACyI,GAAD,OAAyBA,EAAMvI,UAAUgI,gBAAgB9H,KACjF2C,EAAkB/C,YAAY,SAACyI,GAAD,OAAyBA,EAAMvI,UAAU6C,iBAAiB3C,KACxFyC,EAAQ7C,YAAY,SAACyI,GAAD,OAAyBA,EAAMvI,UAAU2C,OAAOzC,KACpE4E,EAAkBhF,YAAY,SAACyI,GAAD,OAAyBA,EAAMvI,UAAU8E,iBAAiB5E,KAZ7D0L,EAcgBC,mBAAiB,GAdjCC,EAAAvL,OAAAC,EAAA,EAAAD,CAAAqL,EAAA,GAc1BG,EAd0BD,EAAA,GAcJE,EAdIF,EAAA,GAgBjCnL,oBAAU,WACN,IAAIsL,GAAY,EACZC,OAAgCxD,EAC9ByD,EAAY,SAACC,GACf,OAAKA,EAIuB,IAArBC,OAAOC,YAAqB,IAAM,IAChB,IAArBD,OAAOC,YAAqB,IAAM,IAA2B,IAArBD,OAAOC,YALtB5H,EAAiC,IAArB2H,OAAOC,YAAqB,IAAM,IAClD,IAArBD,OAAOC,YAAqB,IAAM,IAA2B,IAArBD,OAAOC,YAC9CC,KAAKC,KAAKD,KAAAE,IAAsB,IAArBJ,OAAOC,YAAuB,GAA/BC,KAAAE,IAAwD,IAApBJ,OAAOK,WAAsB,IAAK,IAAM,IACnFH,KAAKC,KAAKD,KAAAE,IAAsB,IAArBJ,OAAOC,YAAuB,GAA/BC,KAAAE,IAAwD,IAApBJ,OAAOK,WAAsB,KAIvF,GAAIT,EAAW,CACX,IAAM/J,EAASiK,GAAU,GACzBxC,EAASzB,GAAoChG,IAC7C,IAAMyK,EAAeR,GAAU,GAC/BH,EAAiBW,GAErB,IAAMC,EAAiB,WACfX,IACAY,aAAaX,GACbA,EAAYG,OAAOpB,WAAW,WAC1B,IAAM6B,EAAYX,GAAU,GAC5BxC,EAASzB,GAAoC4E,IAC7C,IAAMC,EAAkBZ,GAAU,GAClCH,EAAiBe,IAClB,OAIX,OADAV,OAAOW,iBAAiB,SAAUJ,GAC3B,WACHX,GAAY,EACZI,OAAOY,oBAAoB,SAAUL,KAE1C,CAAClI,EAAUiF,IAEd,IAAM/E,EAAcsI,sBAAY,WAC5B,IAAM1C,EAAK,uCAAuC2C,QAAQ,QAAS,SAAAC,GAC/D,IAAIC,EAAoB,GAAhBd,KAAKe,SAAgB,EAC7B,OAD0C,MAANF,EAAYC,EAAU,EAAJA,EAAW,GACxDE,SAAS,MAOtB5D,EAAST,GALO,CACZsB,KACApE,MAAO,GACPiC,MAAO,OAGZ,CAACsB,IAEE9E,EAAmBqI,sBAAY,WACjCvD,EAAST,OACV,CAACS,IAEEhF,EAAwBuI,sBAAY,WACtCvD,EAASzB,IAAqCpD,KAC/C,CAACA,EAAiB6E,IAEfvG,EAAiB8J,sBAAY,WAC1BxI,GAAUiF,EAAST,MACpBxE,GAAUiF,EDkJlB,SAAOA,EAA2B6D,GAAlC,IAAAC,EAAAjE,EAAAV,EAAAC,EAAAC,EAAAC,EAAAyE,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAlG,EAAAmG,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAA/E,EAAAlJ,EAAAmJ,MAAA,SAAA+E,GAAA,cAAAA,EAAA7E,KAAA6E,EAAA5E,MAAA,UAEIR,EAAST,MACTS,EAASzB,GAAkC,iBAGrCuF,EAAeD,IAAW/B,SAAS5C,SACnCW,EAAegE,IAAW/B,SAAS7C,UACrCE,EAAa0E,IAAW/B,SAAS3C,WACjCC,EAAayE,IAAW/B,SAAS1C,WAE/BC,EAAsD,GACtDC,EAA0E,GAC5EyE,EAA0C,GAGxCC,EAAanE,EAAa2B,OAAO,SAAAR,GAAI,OAAmE,IAA/D8C,EAAa/C,UAAU,SAAAsE,GAAO,OAAIA,EAAQxE,KAAOG,EAAKH,OAC/FoD,EAAeH,EAAatC,OAAO,SAAAR,GAAI,OAAmE,IAA/DnB,EAAakB,UAAU,SAAAuE,GAAO,OAAIA,EAAQzE,KAAOG,EAAKH,OACjGqD,EAAmC,GACzCrE,EAAa0F,QAAQ,SAAAvE,GACjB,IAAMqE,EAAUvB,EAAa0B,KAAK,SAAAH,GAAO,OAAIA,EAAQxE,KAAOG,EAAKH,KAC7DwE,GAAWrE,EAAKvE,QAAU4I,EAAQ5I,OAClCyH,EAAYuB,KAAKzE,KAIrBmD,EAA8B,GAC5BC,EAA+B,GACrCvE,EAAa0F,QAAQ,SAAAvE,GACjB,IAAMqE,EAAUvB,EAAa0B,KAAK,SAAAH,GAAO,OAAIA,EAAQxE,KAAOG,EAAKH,KAC7DwE,GACArE,EAAKtC,MAAM6G,QAAQ,SAAA9F,GACf,IAAMiG,EAAUL,EAAQ3G,MAAM8G,KAAK,SAAAE,GAAO,OAAIA,EAAQ7E,KAAOpB,EAAKoB,KAC7D6E,EAIDA,GAAWA,EAAQjJ,QAAUgD,EAAKhD,OAClC2H,EAAYqB,KAAKhG,GAJjB0E,EAAWsB,KAAKhG,KAQvB4F,GAAiC,IAAtBrE,EAAKtC,MAAMf,QACvBqD,EAAKtC,MAAM6G,QAAQ,SAAA9F,GAAI,OAAI0E,EAAWsB,KAAKhG,OAG7C4E,EAAgC,GACtCP,EAAayB,QAAQ,SAAAvE,GACjB,IAAMsE,EAAUzF,EAAa2F,KAAK,SAAAF,GAAO,OAAIA,EAAQzE,KAAOG,EAAKH,KAC7DyE,GACAtE,EAAKtC,MAAM6G,QAAQ,SAAA9F,GACC6F,EAAQ5G,MAAM8G,KAAK,SAAA3I,GAAO,OAAIA,EAAQgE,KAAOpB,EAAKoB,MAE9DwD,EAAaoB,KAAKhG,OAO9BtB,EAAW,EACa,IAAxB8F,EAAatG,SAAcQ,GAAsB8F,EAAatG,QACtC,IAAxB0G,EAAa1G,SAAcQ,GAAsBkG,EAAa1G,QACxC,IAAtBqG,EAAWrG,SAAcQ,GAAsB6F,EAAWrG,QACpC,IAAtBwG,EAAWxG,SAAcQ,GAAsBgG,EAAWxG,QACnC,IAAvBuG,EAAYvG,SAAcQ,GAAsB+F,EAAYvG,QACrC,IAAvByG,EAAYzG,SAAcQ,GAAsBiG,EAAYzG,QAChEqC,EAASzB,GAA6BJ,IAGtC6B,EAASzB,IAAkC,IACf,IAAxB0F,EAAatG,QACbsG,EAAasB,QAAQ,SAAAvE,GACjBhF,GAAmBgF,EAAKH,IAAI3E,KAAK,SAAAE,GACL,IAApBA,EAAKuJ,YAAkB3F,EAASzB,IAAkC,QAItD,IAAxB8F,EAAa1G,QACb0G,EAAakB,QAAQ,SAAA9F,GACjBzD,GAAeyD,EAAK/C,WAAY+C,EAAKoB,IAAI3E,KAAK,SAAAE,GAClB,IAApBA,EAAKuJ,YAAkB3F,EAASzB,IAAkC,QAIvD,IAAvB2F,EAAYvG,QACZuG,EAAYqB,QAAQ,SAAAvE,GAChBhF,GAAwBgF,EAAKH,GAAIG,EAAKvE,OAAOP,KAAK,SAAAE,GACtB,IAApBA,EAAKuJ,YAAkB3F,EAASzB,IAAkC,QAIvD,IAAvB6F,EAAYzG,QACZyG,EAAYmB,QAAQ,SAAA9F,GAChBzD,GAAeyD,EAAK/C,WAAY+C,EAAKoB,GAAIpB,GAAMvD,KAAK,SAAAE,GACxB,IAApBA,EAAKuJ,YAAkB3F,EAASzB,IAAkC,QAK5E+F,EAAsC,eAAAsB,EAAA,OAAAxF,EAAAlJ,EAAAmJ,MAAA,SAAAwF,GAAA,cAAAA,EAAAtF,KAAAsF,EAAArF,MAAA,UACd,IAAtB2D,EAAWxG,OADyB,CAAAkI,EAAArF,KAAA,eAE9BoF,EAAgBzB,EAAWxD,IAAI,SAAOlB,GAAP,OAAAW,EAAAlJ,EAAAmJ,MAAA,SAAAyF,GAAA,cAAAA,EAAAvF,KAAAuF,EAAAtF,MAAA,cAAAsF,EAAAtF,KAAA,EAAAJ,EAAAlJ,EAAAuJ,MACpBzE,GAAYyD,EAAKhD,MAAOgD,EAAK/C,YAAYR,KAAK,SAAAE,GAC/B,IAApBA,EAAKuJ,YAAkBrG,EAAWmG,KAAK,CACvCM,MAAO3J,EAAKA,KAAKsB,KAAKmD,GACtBmF,MAAOvG,EAAKoB,GACZnE,WAAYN,EAAKA,KAAKsB,KAAKhB,aAEP,IAApBN,EAAKuJ,YAAkB3F,EAASzB,IAAkC,OAPzC,cAAAuH,EAAA5E,OAAA,SAAA4E,EAAApF,MAAA,wBAAAoF,EAAA3E,YAFD0E,EAAArF,KAAA,EAAAJ,EAAAlJ,EAAAuJ,MAY9BW,QAAQC,IAAIuE,IAZkB,OAaV,IAAtBxG,EAAWzB,SACXyB,EAAaA,EAAWuB,IAAI,SAAAjD,GACxB,IAAM4H,EAAUjG,EAAWmG,KAAK,SAAAxE,GAAI,OAAIA,EAAKgF,QAAUtI,EAAKhB,aACtDuJ,EAAiBvI,EAAKiC,cAAcgB,IAAI,SAAA/D,GAC1C,IAAMC,EAAUyC,EAAWkG,KAAK,SAAA3I,GAAO,OAAIA,EAAQmJ,QAAUpJ,IAC7D,OAAIC,EAAgBA,EAAQkJ,MACrBnJ,IAEX,MAAO,CAACF,WAAY4I,EAAUA,EAAQS,MAAQrI,EAAKhB,WAAYiD,cAAesG,MArBlD,wBAAAJ,EAAA1E,WA2BlB,IAAtB6C,EAAWrG,OA/HnB,CAAAyH,EAAA5E,KAAA,gBAgIc+D,EAAeP,EAAWrD,IAAI,SAAOK,GAAP,OAAAZ,EAAAlJ,EAAAmJ,MAAA,SAAA6F,GAAA,cAAAA,EAAA3F,KAAA2F,EAAA1F,MAAA,cAAA0F,EAAA1F,KAAA,EAAAJ,EAAAlJ,EAAAuJ,MACnBzE,EAAgBgF,EAAKvE,OAAOP,KAAK,SAAAE,GAClB,IAApBA,EAAKuJ,aACLtG,EAAWoG,KAAK,CAACM,MAAO3J,EAAKA,KAAKsB,KAAKmD,GAAImF,MAAOhF,EAAKH,KACvDb,EAASzB,IAAkC,QAJnB,cAAA2H,EAAAhF,OAAA,SAAAgF,EAAAxF,MAAA,wBAAAwF,EAAA/E,YAhI5CiE,EAAA5E,KAAA,GAAAJ,EAAAlJ,EAAAuJ,MAyIcW,QAAQC,IAAIkD,IAzI1B,eA0IkC,IAAtBJ,EAAWxG,SACXwG,EAAaA,EAAWxD,IAAI,SAAAlB,GACxB,IAAM0G,EAAY9G,EAAWmG,KAAK,SAAAxE,GAAI,OAAIA,EAAKgF,QAAUvG,EAAK/C,aAC9D,OAAIyJ,EAAkBvP,OAAA4D,EAAA,EAAA5D,CAAA,GAAI6I,EAAX,CAAiB/C,WAAYyJ,EAAUJ,QAC/CtG,KAGW,IAAtBN,EAAWxB,SACXwB,EAAaA,EAAWwB,IAAI,SAAAjD,GACxB,IAAM4H,EAAUjG,EAAWmG,KAAK,SAAAxE,GAAI,OAAIA,EAAKgF,QAAUtI,IACvD,OAAI4H,EAAgBA,EAAQS,MACrBrI,KArJvB0H,EAAA5E,KAAA,GAAAJ,EAAAlJ,EAAAuJ,MAwJc6D,KAxJd,QAAAc,EAAA5E,KAAA,wBAAA4E,EAAA5E,KAAA,GAAAJ,EAAAlJ,EAAAuJ,MAyJiB6D,KAzJjB,WA4JItE,EAASzB,GAAkC,eAIvCwF,EADsB,IAAtB1E,EAAW1B,OACUkC,EAAac,IAAI,SAAAK,GAClC,IAAMsE,EAAUjG,EAAWmG,KAAK,SAAA9H,GAAI,OAAIA,EAAKsI,QAAUhF,EAAKH,KAC5D,OAAIyE,EAAgB1O,OAAA4D,EAAA,EAAA5D,CAAA,GAAIoK,EAAX,CAAiBH,GAAIyE,EAAQS,QACnC/E,IAEanB,EACF,IAAtBP,EAAW3B,SACXoG,EAAqBA,EAAmBpD,IAAI,SAAAK,GACxC,IAAMtC,EAAQsC,EAAKtC,MAAMiC,IAAI,SAAAlB,GACzB,IAAM5C,EAAUyC,EAAWkG,KAAK,SAAA9H,GAAI,OAAIA,EAAKsI,QAAUvG,EAAKoB,KAC5D,OAAIhE,EAAgBjG,OAAA4D,EAAA,EAAA5D,CAAA,GAAI6I,EAAX,CAAiBoB,GAAIhE,EAAQkJ,QACnCtG,IAEX,OAAO7I,OAAA4D,EAAA,EAAA5D,CAAA,GAAIoK,EAAX,CAAiBtC,eAKC,IAAtBS,EAAWxB,QAAgBqG,EAAWrG,OAAS,GAlLvD,CAAAyH,EAAA5E,KAAA,YAmLoC,IAAxByD,EAAatG,QAAsC,IAAtBwB,EAAWxB,SACxCwB,EAAaA,EAAWqC,OAAO,SAAAR,GAAI,OAAgE,IAA5D+C,EAAmBhD,UAAU,SAAArD,GAAI,OAAIA,EAAKmD,KAAOG,SAEzEgD,EAAWrG,OAAS,GAtL/C,CAAAyH,EAAA5E,KAAA,gBAAA4E,EAAA5E,KAAA,GAAAJ,EAAAlJ,EAAAuJ,MAsLyDzE,IAAmBE,KAAK,SAAAE,GAAI,OAAIA,EAAKuE,IAAI,SAAAjD,GAAI,OAAIA,EAAKmD,QAtL/G,QAAAuE,EAAAgB,GAAAhB,EAAA1E,KAAA0E,EAAA5E,KAAA,iBAAA4E,EAAAgB,GAuLcrC,EAAmBpD,IAAI,SAAAK,GAAI,OAAIA,EAAKH,KAvLlD,QAsLY2D,EAtLZY,EAAAgB,GAwLc3B,EAA0E,IAC5C,IAAtBtF,EAAWxB,OAAewB,EAAa4E,EAAmBpD,IAAI,SAAAK,GAAI,OAAIA,EAAKH,MACnF0E,QAAQ,SAACc,EAAevF,GAC1B,GAAIuF,IAAkB7B,EAAa1D,GAAQ,CACzB,IAAVA,EAAa2D,EAAUgB,KAAK,CAACa,UAAWD,EAAeE,gBAAiB,OACvE9B,EAAUgB,KAAK,CAACa,UAAWD,EAAeE,gBAAiBpH,EAAW2B,EAAQ,KACnF,IAAM0F,EAAWhC,EAAazD,UAAU,SAAA0F,GAAM,OAAIA,IAAWJ,IAC7D7B,EAAelH,GAAQkH,EAAcgC,EAAU1F,MA/L/D4D,EAAA,EAAAC,EAkM0BF,EAlM1B,aAAAC,EAAAC,EAAAhH,QAAA,CAAAyH,EAAA5E,KAAA,gBAkMiBkG,EAlMjB/B,EAAAD,GAAAU,EAAA5E,KAAA,GAAAJ,EAAAlJ,EAAAuJ,MAmMkBzE,GAAiB0K,EAAMJ,UAAWI,EAAMH,kBAnM1D,QAAA7B,IAAAU,EAAA5E,KAAA,sBAuM8B,IAAtBpB,EAAWzB,QAAgBwG,EAAWxG,OAAS,GAvMvD,CAAAyH,EAAA5E,KAAA,YAwMoC,IAAxB6D,EAAa1G,QAAsC,IAAtByB,EAAWzB,SACxCyB,EAAaA,EAAWuB,IAAI,SAAAjD,GACxB,IAAMiJ,EAAc5C,EAAmByB,KAAK,SAAAxE,GAAI,OAAIA,EAAKH,KAAOnD,EAAKhB,aACrE,GAAIiK,EAAa,CACb,IAAMhH,EAAgBjC,EAAKiC,cAAc6B,OAAO,SAAA5E,GAAM,OACzB,IAD6B+J,EAAYjI,MAAMqC,UAAU,SAAAtB,GAAI,OACtFA,EAAKoB,KAAOjE,MAChB,OAAOhG,OAAA4D,EAAA,EAAA5D,CAAA,GAAI8G,EAAX,CAAiBiC,kBAErB,OAAOjC,KAGXmH,EAAyE,KAC3CvF,EAAW3B,OAAS,GApN9D,CAAAyH,EAAA5E,KAAA,gBAAA4E,EAAA5E,KAAA,GAAAJ,EAAAlJ,EAAAuJ,MAoNyE,eAAAmG,EAAAC,EAAAC,EAAA,OAAA1G,EAAAlJ,EAAAmJ,MAAA,SAAA0G,GAAA,cAAAA,EAAAxG,KAAAwG,EAAAvG,MAAA,UAC7DlB,EAAWiG,QAAQ,SAAA9F,GACf,IAAMuB,EAAoC,IAA7B6D,EAAkBlH,OAC3BkH,EAAkBW,KAAK,SAAAxE,GAAI,OAAIA,EAAKtE,aAAe+C,EAAK/C,kBAAcqC,EAC1E,GAAIiC,EAAM,CACN,IAAMF,EAAQ+D,EAAkB9D,UAAU,SAAAC,GAAI,OAAIA,EAAKtE,aAAe+C,EAAK/C,aAC3EmI,EAAkB/D,GAAlBlK,OAAA4D,EAAA,EAAA5D,CAAA,GAA+BoK,EAA/B,CAAqCtC,MAAK,GAAA/B,OAAA/F,OAAAiH,EAAA,EAAAjH,CAAMoK,EAAKtC,OAAX,CAAkBe,EAAKsG,eAC9DlB,EAAkBY,KAAK,CAAC/I,WAAY+C,EAAK/C,WAAYgC,MAAO,CAACe,EAAKsG,WAEzEa,EAA+B,GACnC/B,EAAkBU,QAAQ,SAAA7H,GAClBA,EAAKgB,MAAMf,OAAS,GAAGiJ,EAAcnB,KAAK/H,EAAKhB,cAE1B,IAAzBkK,EAAcjJ,OAb2C,CAAAoJ,EAAAvG,KAAA,gBAcrDqG,EAAqE,GACnEC,EAAeF,EAAcjG,IAAI,SAAOjD,GAAP,OAAA0C,EAAAlJ,EAAAmJ,MAAA,SAAA2G,GAAA,cAAAA,EAAAzG,KAAAyG,EAAAxG,MAAA,cAAAwG,EAAAxG,KAAA,EAAAJ,EAAAlJ,EAAAuJ,MACtBzE,EAAiB0B,GAAMxB,KAAK,SAAAC,GACrC,IAAMuC,EAAQvC,EAAI8E,MAAMN,IAAI,SAAAjD,GAAI,OAAIA,EAAKmD,KACzCgG,EAAcpB,KAAK,CAAC/I,WAAYgB,EAAMgB,aAHP,cAAAsI,EAAA9F,OAAA,SAAA8F,EAAAtG,MAAA,wBAAAsG,EAAA7F,YAfkB4F,EAAAvG,KAAA,EAAAJ,EAAAlJ,EAAAuJ,MAqBnDW,QAAQC,IAAIyF,IArBuC,cAAAC,EAAA7F,OAAA,SAsBlD2F,GAtBkD,eAAAE,EAAA7F,OAAA,cAuB/CnC,GAvB+C,yBAAAgI,EAAA5F,UAAA,IApNzE,QAAAiE,EAAA6B,GAAA7B,EAAA1E,KAAA0E,EAAA5E,KAAA,iBAAA4E,EAAA6B,QA4OelI,EA5Of,eAoNc+F,EApNdM,EAAA6B,GAoPYlC,EAAqE,GACrED,GAAmD,IAAtB1F,EAAWzB,QACxCmH,EAA0BS,QAAQ,SAAA7H,GAG9B,IAFsB0B,EAAWoG,KAAK,SAAA0B,GAAQ,OAC1CA,EAASxK,aAAegB,EAAKhB,aACjC,CACA,IAAMyK,EAAwBpD,EAAmByB,KAAK,SAAAxE,GAAI,OAAItD,EAAKhB,aAAesE,EAAKH,KACvFkE,EAAcU,KAAK,CACf/I,WAAYyK,EAAsBtG,GAClCnC,MAAOyI,EAAsBzI,MAAMiC,IAAI,SAAAlB,GAAI,OAAIA,EAAKoB,UAG5DzB,EAAWmG,QAAQ,SAAA7H,GAAI,OAAIqH,EAAcU,KAAK,CAAC/I,WAAYgB,EAAKhB,WAAYgC,MAAOhB,EAAKiC,mBAChFmF,GAAmD,IAAtB1F,EAAWzB,OAEzCmH,GAAmD,IAAtB1F,EAAWzB,QAC/CmH,EAA0BS,QAAQ,SAAA7H,GAC9B,IAAMyJ,EAAwBpD,EAAmByB,KAAK,SAAAxE,GAAI,OAAItD,EAAKhB,aAAesE,EAAKH,KACvFkE,EAAcU,KAAK,CACf/I,WAAYyK,EAAsBtG,GAClCnC,MAAOyI,EAAsBzI,MAAMiC,IAAI,SAAAlB,GAAI,OAAIA,EAAKoB,SAN5DkE,EAAgB3F,EAAWuB,IAAI,SAAAjD,GAAI,MAAK,CAAChB,WAAYgB,EAAKhB,WAAYgC,MAAOhB,EAAKiC,iBAWhF6E,EAAeO,EAAcpE,IAAI,SAAAjD,GACnC,IAAM0J,EAAuBtC,EAA4BA,EACpDU,KAAK,SAAAxE,GAAI,OAAIA,EAAKtE,aAAegB,EAAKhB,kBAAcqC,EACnDsI,EAAUtD,EAAmByB,KAAK,SAAAxE,GAAI,OAAIA,EAAKH,KAAOnD,EAAKhB,aACjE,OAAI0K,GACG,CAAC1K,WAAY2K,EAAQxG,GAAInC,MAAO2I,EAAQ3I,MAAMiC,IAAI,SAAAlB,GAAI,OAAIA,EAAKoB,QAGpE4D,EAA8F,GACpGM,EAAcQ,QAAQ,SAAA+B,GAClB,IAAIC,EAAY/C,EAAagB,KAAK,SAAA9H,GAAI,OAAIA,EAAKhB,aAAe4K,EAAS5K,aAAagC,MACpF4I,EAAS5I,MAAM6G,QAAQ,SAACiC,EAAc1G,GAClC,GAAI0G,IAAiBD,EAAUzG,GAAQ,CACrB,IAAVA,EAAa2D,EAAUgB,KAAK,CAC5B/I,WAAY4K,EAAS5K,WAAY4J,UAAWkB,EAAcjB,gBAAiB,OAE1E9B,EAAUgB,KAAK,CAChB/I,WAAY4K,EAAS5K,WAAY4J,UAAWkB,EAC5CjB,gBAAiBgB,EAAUzG,EAAQ,KAEvC,IAAM0F,EAAWe,EAAUxG,UAAU,SAAAnE,GAAM,OAAIA,IAAW4K,IAC1DD,EAAYjK,GAAQiK,EAAWf,EAAU1F,QAI/CoE,EAAuH,GAC7HT,EAAUc,QAAQ,SAAA9F,GACd,IAAMkH,EAAczB,EAAiBM,KAAK,SAAA9H,GAAI,OAAIA,EAAKhB,aAAe+C,EAAK/C,aACvEiK,GAAazB,EAAiBvE,IAAI,SAAAjD,GAAI,OAAIA,EAAKhB,aAAeiK,EAAYjK,WAC1EgB,EAAK+G,UAAUgB,KAAK,CAACa,UAAW7G,EAAK6G,UAAWC,gBAAiB9G,EAAK/C,aAAegB,IAEzFwH,EAAiBO,KAAK,CAClB/I,WAAY+C,EAAK/C,WACjB+H,UAAW,CAAC,CAAC6B,UAAW7G,EAAK6G,UAAWC,gBAAiB9G,EAAK8G,sBAGhEpB,EAAmBD,EAAiBvE,IAAI,SAAOjD,GAAP,IAAA+J,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAA3H,EAAAlJ,EAAAmJ,MAAA,SAAA2H,GAAA,cAAAA,EAAAzH,KAAAyH,EAAAxH,MAAA,OACpCiH,EAAsB/J,EAAK+G,UADSiD,GAAA,EAAAC,GAAA,EAAAC,OAAA7I,EAAAiJ,EAAAzH,KAAA,EAAAsH,EAExBJ,EAFwBQ,OAAAC,YAAA,UAAAR,GAAAI,EAAAD,EAAArH,QAAA2H,KAAA,CAAAH,EAAAxH,KAAA,gBAEjCkG,EAFiCoB,EAAAzN,MAAA2N,EAAAxH,KAAA,GAAAJ,EAAAlJ,EAAAuJ,MAGhCzE,GAAc0B,EAAKhB,WAAYgK,EAAMJ,UAAWI,EAAMH,kBAHtB,QAAAmB,GAAA,EAAAM,EAAAxH,KAAA,gBAAAwH,EAAAxH,KAAA,iBAAAwH,EAAAzH,KAAA,GAAAyH,EAAA5B,GAAA4B,EAAA,SAAAL,GAAA,EAAAC,EAAAI,EAAA5B,GAAA,QAAA4B,EAAAzH,KAAA,GAAAyH,EAAAzH,KAAA,GAAAmH,GAAA,MAAAG,EAAAO,QAAAP,EAAAO,SAAA,WAAAJ,EAAAzH,KAAA,IAAAoH,EAAA,CAAAK,EAAAxH,KAAA,eAAAoH,EAAA,eAAAI,EAAAK,OAAA,mBAAAL,EAAAK,OAAA,6BAAAL,EAAA7G,SAAA,wCAjTtDiE,EAAA5E,KAAA,GAAAJ,EAAAlJ,EAAAuJ,MAyTcW,QAAQC,IAAI8D,IAzT1B,QA2TInF,EAASzB,GAAkC,OAGjB,IAAtByF,EAAWrG,QAAsC,IAAtBwG,EAAWxG,QACtCqC,EAASF,IAAmB,IA/TpC,yBAAAsF,EAAAjE,aCjJG,CAACpG,EAAUiF,IA3EmBxJ,EA8ELC,oBAAU,iBAAO,CACzC8B,OAAQmK,OAAOC,YACf3J,MAAO0J,OAAOK,WACduF,iBAAkB1F,KAAKC,KAAKD,KAAAE,IAAAJ,OAAOC,YAAe,GAAtBC,KAAAE,IAA0BJ,OAAOK,WAAc,IAC3EvK,SAAU,GACVC,EAAG,SAnF0B9B,EAAAC,OAAAC,EAAA,EAAAD,CAAAJ,EAAA,GA8E1B+R,EA9E0B5R,EAAA,GA8ElB6R,EA9EkB7R,EAAA,GAAA8R,EAsFchS,oBAAU,iBAAO,CAC5D4D,MAAO,EACP9B,OAAQ,KACRyB,QAAS,KAzFoB0O,EAAA9R,OAAAC,EAAA,EAAAD,CAAA6R,EAAA,GAsF1B7O,EAtF0B8O,EAAA,GAsFJC,EAtFID,EAAA,GA4FjC1R,oBAAU,WACF+D,GAAUyN,EAAU,CAACxP,MAAO0J,OAAOK,cACxC,CAAC/J,EAAOwP,EAAWzN,IAEtB/D,oBAAU,WACN2R,EAAe,WACX,OAAIvK,EAAiBD,IAAa,EAAU,CACxC9D,MAAOuO,MAAMxK,EAAiBD,EAAW,KAAO,EAAIC,EAAiBD,EAAW,IAChF5F,OAAM,GAAAoE,OAAKyB,EAAiBD,EAAW,IAAjC,MAEE,CACR7D,GAAI,SAAMuO,GAAN,OAAAzI,EAAAlJ,EAAAmJ,MAAA,SAAAyI,GAAA,cAAAA,EAAAvI,KAAAuI,EAAAtI,MAAA,cAAAsI,EAAAtI,KAAA,EAAAJ,EAAAlJ,EAAAuJ,MACMoI,EAAQ,CACVxO,MAAOuO,MAAMxK,EAAiBD,EAAW,KAAO,EAAIC,EAAiBD,EAAW,IAChF5F,OAAM,GAAAoE,OAAKyB,EAAiBD,EAAW,IAAjC,QAHV,cAAA2K,EAAAtI,KAAA,EAAAJ,EAAAlJ,EAAAuJ,MAIMoI,EAAQ,CAAC7O,QAAS,KAJxB,wBAAA8O,EAAA3H,eAQb,CAAChD,EAAUC,EAAgBuK,IAE9B3R,oBAAU,WACD+K,GAAmBhH,GAAaiH,EAU1BjH,EACPyN,EAAU,CACNF,iBAAkBpP,EAClBX,OAAQW,EACRF,MAAO0J,OAAOK,WACdvK,QAAS,EACTuQ,MAAO,SAACC,GAAD,MAAmB,UAATA,EAAmB,IAAM,KAEvChH,GACPwG,EAAU,CACN/P,EAAG,WAnBP+P,EAAU,CACNjQ,OAAQW,EACRF,MAAOoJ,EACPkG,iBAAkBpP,EAClBV,SAAU,GACVC,EAAG,MACHsQ,MAAO,SAACC,GAAD,MAAmB,YAATA,EAAqB,IAAM,GAC5CC,OAAQ,CAACC,SAAU,OAe5B,CAACnO,EAAUgH,EAAgB7D,EAAe8D,EAAW9I,EAAiBsP,EAAWpG,IAEpF,IAAMzI,EAAgBwP,kBAAQ,kBACtBpH,EAAiB,UAAYhH,EAAW,SAA6B,OAAlBmD,EAAyBA,EAAgB,QAC9F,CAACnD,EAAUmD,EAAe6D,IAEhC,OACI9K,EAAAC,EAAAC,cAAAF,EAAAC,EAAAkE,SAAA,KACInE,EAAAC,EAAAC,cAACiS,EAAD,CAAmB9Q,QAASpC,EAAgBqC,OAAQgQ,EAAOD,iBAAkB9P,QAAS+P,EAAO/P,QAASC,EAAG8P,EAAO9P,IAChHxB,EAAAC,EAAAC,cAACkS,EAAD,CAAkB9Q,OAAQgQ,EAAOhQ,OAAQS,MAAOuP,EAAOvP,MAAOE,gBAAiBkJ,EAAsB3J,EAAG8P,EAAO9P,GAC3GxB,EAAAC,EAAAC,cAACmS,EAAD,CAAY3P,cAAeA,EAAeT,gBAAiBkJ,EAC/C1I,cAAeqI,KAAoB7D,EACnCzE,eAAgBA,EAAgBnB,QAASpC,EACzC0D,qBAAsBA,IAClC3C,EAAAC,EAAAC,cAACoS,EAAD,CAAcjR,QAASpC,EAAgB6E,SAAUA,EAAUE,YAAaA,EAAaD,sBAAuBA,EAC9FE,iBAAkBA,EAAkBhC,gBAAiBkJ,EAAsBjH,gBAAiBA,gBC5JpHqO,GAAmB7T,YAAOC,WAASC,KAAnBC,WAAA,CAAAC,YAAA,8BAAAC,YAAA,gBAAGL,CAAH,+JAIV,SAAAqC,GAAK,OAAIA,EAAM2C,UAAY+H,OAAOC,YAAc3K,EAAMyR,iBAAmB/G,OAAOC,aACnF,SAAA3K,GAAK,OAAIA,EAAM2C,UAAY3C,EAAMyR,iBAAmB,GAClD,SAAAzR,GAAK,OAAIA,EAAM0R,SAAW,GAAK,IAG1B,SAAA1R,GAAK,OAAIA,EAAMC,SAASN,mBAGlCgS,GAAiBhU,YAAOC,WAASC,KAAnBC,WAAA,CAAAC,YAAA,4BAAAC,YAAA,gBAAGL,CAAH,oSAKR,SAAAqC,GAAK,OAAIA,EAAMc,SAGX,SAAAd,GAAK,OAAIA,EAAM4R,SAAW9R,EAAepB,WAAasB,EAAMC,SAASvB,YAI3D,SAAAsB,GAAK,OAAIA,EAAMC,SAASL,uBAGxB,SAAAI,GAAK,OAAIA,EAAMC,SAASL,wBA8BnCO,OAAMC,KAfkB,SAAAC,GAGO,IAFFC,EAEED,EAFFC,QAASY,EAEPb,EAFOa,gBAAiB6B,EAExB1C,EAFwB0C,SAAU8O,EAElCxR,EAFkCwR,qBAAsBC,EAExDzR,EAFwDyR,gBAC1DC,EACE1R,EADF0R,QAASC,EACP3R,EADO2R,QAASC,EAChB5R,EADgB4R,IAG1D,OACIhT,EAAAC,EAAAC,cAACqS,GAAD,CAAkBvR,SAAUK,EAASoR,SAAUK,EAC7BpP,UAAWI,EAAU0O,iBAAkBvQ,GACrDjC,EAAAC,EAAAC,cAACwS,GAAD/S,OAAAsT,OAAA,CAAgBjS,SAAUK,EAASsR,SAAUI,EAC7B5S,MAAO,CAAC6S,SAAW5O,YAADzE,OAAA4D,EAAA,EAAA5D,CAAA,GAAiBiT,KADnD,CAEgB/Q,QAASgR,OAKAnR,KC5D/BwR,GAAWxU,YAAOC,WAASC,KAAnBC,WAAA,CAAAC,YAAA,8BAAAC,YAAA,gBAAGL,CAAH,kOAIL,SAAAqC,GAAK,OAAIA,EAAM2C,YAAc3C,EAAMoS,WAAapS,EAAMyR,iBAAmB,GAKvE,SAAAzR,GAAK,OAAIA,EAAM2C,UAAN,GAAAgC,OAAqB3E,EAAMyR,iBAA3B,MAAkDzR,EAAMoS,WACxE,MAAQ,UAKNC,GAAgB1U,YAAOC,WAASC,KAAnBC,WAAA,CAAAC,YAAA,mCAAAC,YAAA,gBAAGL,CAAH,yJAMV,SAAAqC,GAAK,OAAIA,EAAMsS,OAiCTC,GAjBgC,SAAAlS,GAIO,IAHFY,EAGEZ,EAHFY,SAAUuR,EAGRnS,EAHQmS,iBACVzP,EAEE1C,EAFF0C,SAAUiH,EAER3J,EAFQ2J,UAAWzJ,EAEnBF,EAFmBE,OAAQW,EAE3Bb,EAF2Ba,gBAC7Be,EACE5B,EADF4B,EAAG8P,EACD1R,EADC0R,QAASU,EACVpS,EADUoS,YAG5D,OACIxT,EAAAC,EAAAC,cAACgT,GAAD,CAAU/S,MAAOoT,EAAkB7P,UAAWI,EAAUqP,WAAYpI,EAC1DyH,iBAAkBvQ,GACxBjC,EAAAC,EAAAC,cAACkT,GAAD,CAAejT,MAAO,CAAC6C,IAAG1B,SAAQmS,WAAY,QAASC,IAAKF,EAC7CH,KAAMtI,GAAa+H,GAAW1O,WAAW,GAAK2G,GAAa+H,IAAY1O,WAAW,IAAM,IAClGpC,cC/CJ2R,GAAoBjV,IAAOE,IAAVC,WAAA,CAAAC,YAAA,iCAAAC,YAAA,YAAGL,CAAH,uIAUxBkV,GAASlV,IAAOE,IAAVC,WAAA,CAAAC,YAAA,sBAAAC,YAAA,YAAGL,CAAH,gYAUY,SAAAqC,GAAK,OAAIA,EAAMC,SAASvB,YAC9B,SAAAsB,GAAK,OAAIA,EAAMC,SAASR,eAC7B,SAAAO,GAAK,OAAIA,EAAMC,SAASJ,OAGT,SAAAG,GAAK,OAAIA,EAAMC,SAASJ,OACnC,SAAAG,GAAK,OAAIA,EAAMC,SAASvB,aA4C1ByB,OAAMC,KAxBoB,SAAAC,GAAqC,IAAnCyS,EAAmCzS,EAAnCyS,WAAYC,EAAuB1S,EAAvB0S,SAAUzS,EAAaD,EAAbC,QAEvD0S,EAAqBC,aAAQ,SAAAC,GAAkB,IAAhBC,EAAgBD,EAAhBC,IAAKC,EAAWF,EAAXE,MACjC,OAALA,QAAK,IAALA,KAAOC,kBACHF,GAAKJ,MAGPO,EAAuBL,aAAQ,SAAAM,GAAkB,IAAhBJ,EAAgBI,EAAhBJ,IAAKC,EAAWG,EAAXH,MACnC,OAALA,QAAK,IAALA,KAAOC,kBACHF,GAAKL,MAGb,OACI7T,EAAAC,EAAAC,cAACyT,GAAD,KACI3T,EAAAC,EAAAC,cAAC0T,GAADjU,OAAAsT,OAAA,GAAYc,IAAZ,CAAkC/S,SAAUK,IACxCrB,EAAAC,EAAAC,cAACqU,GAAA,EAAD,CAAiBC,KAAK,UAE1BxU,EAAAC,EAAAC,cAAC0T,GAADjU,OAAAsT,OAAA,GAAYoB,IAAZ,CAAoCrT,SAAUK,IAC1CrB,EAAAC,EAAAC,cAACqU,GAAA,EAAD,CAAiBC,KAAK,cCpEzBC,GAAW,SAACrR,GACrB,OAAiB,OAAVA,IAAmB,QAAQsR,KAAKtR,IAAUA,EAAMsD,OAAS,KCC9DiO,GAAkBjW,IAAOE,IAAVC,WAAA,CAAAC,YAAA,gCAAAC,YAAA,eAAGL,CAAH,2LAMN,SAAAqC,GAAK,OAAIA,EAAM2C,UAAY,EAAI,IAQxCkR,GAAWlW,IAAOmW,MAAVhW,WAAA,CAAAC,YAAA,yBAAAC,YAAA,eAAGL,CAAH,ocAgCRoW,GAAMpW,IAAOqW,IAAVlW,WAAA,CAAAC,YAAA,oBAAAC,YAAA,eAAGL,CAAH,oYAwCMwC,OAAMC,KAdqB,SAAAC,GAAwC,IAAtCoH,EAAsCpH,EAAtCoH,KAAMwM,EAAgC5T,EAAhC4T,iBAAkBlR,EAAc1C,EAAd0C,SAEhE,OACI9D,EAAAC,EAAAC,cAACyU,GAAD,CAAiBjR,UAAWI,GACxB9D,EAAAC,EAAAC,cAAC0U,GAAD,CAAUpN,KAAK,WAAWyN,QAAyB,IAAhBzM,EAAKjB,OAAc2N,SAAUpR,EACtDqR,SAAU,SAACC,GAAD,OAAOJ,EAAiBI,MAC5CpV,EAAAC,EAAAC,cAAC4U,GAAD,KACI9U,EAAAC,EAAAC,cAAA,QACImV,EAAE,kLCtEhBC,GAAc5W,IAAOE,IAAVC,WAAA,CAAAC,YAAA,4BAAAC,YAAA,eAAGL,CAAH,iEAGF,SAAAqC,GAAK,OAAIA,EAAMwU,aAAe,EAAI,GACnC,SAAAxU,GAAK,OAAIA,EAAM2C,UAAY,OAAS,WAC5C,SAAA3C,GAAK,OAAIA,EAAM2C,WAAN,WAAAgC,OACAiO,GADA,OAAAjO,OACuBiO,GADvB,4HAST6B,GAAiB9W,IAAOE,IAAVC,WAAA,CAAAC,YAAA,+BAAAC,YAAA,eAAGL,CAAH,khBAEF,SAAAqC,GAAK,OAAIA,EAAMC,SAASvB,YAC7B,SAAAsB,GAAK,OAAIA,EAAMC,SAASJ,OAKd,SAAAG,GAAK,OAAIA,EAAMwU,aAAe,IAAM,GAWvC,SAAAxU,GAAK,OAAIA,EAAMC,SAASR,eAYxB,SAAAO,GAAK,OAAIA,EAAMC,SAASP,oBAItC,SAAAM,GAAK,OAAIA,EAAM2C,WAAN,0DAAAgC,OAEGiO,GAFH,OAAAjO,OAE0BiO,GAF1B,6QAYT,SAAA5S,GAAK,OAAIA,EAAMwU,cAAN,4FAKTE,GAAW/W,IAAOE,IAAVC,WAAA,CAAAC,YAAA,yBAAAC,YAAA,eAAGL,CAAH,kPAYA,SAAAqC,GAAK,OAAIA,EAAM2U,gBAAkB,OAAS,YAuFzCxU,OAAMC,KA7EqB,SAAAC,GAAiC,IAA/BoH,EAA+BpH,EAA/BoH,KAAM/C,EAAyBrE,EAAzBqE,WAAYpE,EAAaD,EAAbC,QAEpDyC,EAAW5E,YAAY,SAACyI,GAAD,OAAyBA,EAAMkD,SAAS/G,UAAUxE,KACzEyH,EAAgB7H,YAAY,SAACyI,GAAD,OAAyBA,EAAMvI,UAAU2H,eAAezH,KAEpFyJ,EAAW6B,cALsDI,EAOjCC,oBAAkB,GAPeC,EAAAvL,OAAAC,EAAA,EAAAD,CAAAqL,EAAA,GAOhE2K,EAPgEzK,EAAA,GAOnD0K,EAPmD1K,EAAA,GAQjE4I,EAAWxH,sBAAY,WACzBsJ,GAAe,GACf7M,EAASzB,GAA4BjG,IACrC0H,EAASzB,IAAkC,KAC5C,CAACjG,EAAS0H,IAEP8M,EAAUC,iBAAuB,MACvC/V,oBAAU,WACF4V,GAAaE,EAAQE,QAASC,SACnC,CAACL,IAEJ,IAAM9B,EAAavH,sBAAY,WAC3BvD,EAAST,GAAwB7C,EAAY+C,EAAKoB,MACnD,CAACnE,EAAY+C,EAAKoB,GAAIb,IAEzBkN,0BAAgB,WACZJ,EAAQE,QAASG,YAAc1N,EAAKhD,MACjB,KAAfgD,EAAKhD,OAAcsO,KACxB,CAACtL,EAAMsL,IAEV,IAAMkB,EAAmB1I,sBAAY,SAAC8I,GAClC,IAAIxP,EAAOjG,OAAA4D,EAAA,EAAA5D,CAAA,GAAO6I,EAAP,CAAajB,OAAQ6N,EAAEe,cAAclB,QAAU,EAAI,IAC9DlM,EAAST,GAAwB1C,KAClC,CAAC4C,EAAMO,IAEJqN,EAAgB9J,sBAAY,WAC9B,IAAM+J,EAAYR,EAAQE,QAASG,YACnC,GAAIzB,GAAS4B,GAAY,CACrB,IAAIzQ,EAAOjG,OAAA4D,EAAA,EAAA5D,CAAA,GAAO6I,EAAP,CAAahD,MAAO6Q,IAC/BtN,EAAST,GAAwB1C,IACjCgQ,GAAe,GACf7M,EAASzB,IAAkC,SACnCmN,GAAS4B,IAA6B,KAAf7N,EAAKhD,OAKpCuD,EAASzB,IAAkC,IAC3CuM,MALAgC,EAAQE,QAASG,YAAc1N,EAAKhD,MACpCoQ,GAAe,GACf7M,EAASzB,IAAkC,MAKhD,CAACkB,EAAMqL,EAAY9K,IAEhBuN,EAAmBhK,sBAAY,SAAC8I,GAChB,KAAdA,EAAEmB,SAAgC,KAAdnB,EAAEmB,UACtBnB,EAAEoB,iBACFX,EAAQE,QAASU,SAEtB,IAEGC,EAAe1C,aAAQ,SAAAC,GAAa,IAAXE,EAAWF,EAAXE,MACtB,OAALA,QAAK,IAALA,KAAOC,oBAMX,OACIpU,EAAAC,EAAAC,cAACoV,GAAD,CAAa5R,UAAWI,IAAaiD,EAAewO,aAAcI,GAC9D3V,EAAAC,EAAAC,cAACyW,GAAD,CAAa7C,SAAUA,EAAUD,WAAYA,EAAYxS,QAASA,IAClErB,EAAAC,EAAAC,cAACsV,GAAD,CAAgB9R,UAAWI,EAAU9C,SAAUK,EAASkU,aAAcI,GAClE3V,EAAAC,EAAAC,cAAC0W,GAAD,CAAcpO,KAAMA,EAAMwM,iBAAkBA,EAAkBlR,SAAUA,IACxE9D,EAAAC,EAAAC,cAACuV,GAAD9V,OAAAsT,OAAA,CAAUyC,gBAAiBC,EAAakB,UAAW,SAAAzB,GAAC,OAAIkB,EAAiBlB,IAC/D1B,IAAKmC,EAASiB,OAAQV,GAAmBT,GAAWhW,OAAA4D,EAAA,EAAA5D,CAAA,GAAQ+W,UAO9ChV,KCpK3BqV,GAAerY,IAAOE,IAAVC,WAAA,CAAAC,YAAA,+BAAAC,YAAA,eAAGL,CAAH,0GAGb,SAAAqC,GAAK,OAAIA,EAAMc,UAIrByT,GAAc5W,YAAOC,WAASC,KAAnBC,WAAA,CAAAC,YAAA,8BAAAC,YAAA,eAAGL,CAAH,0HAkLFwC,OAAMC,KAhKuB,SAAAC,GAA+D,IAA7DqG,EAA6DrG,EAA7DqG,MAAOhC,EAAsDrE,EAAtDqE,WAAYuR,EAA0C5V,EAA1C4V,UAAW3V,EAA+BD,EAA/BC,QAAS4V,EAAsB7V,EAAtB6V,iBAE3EnT,EAAW5E,YAAY,SAACyI,GAAD,OAAyBA,EAAMkD,SAAS/G,UAAUxE,KACzEyC,EAAQ7C,YAAY,SAACC,GAAD,OAAyBA,EAAMC,UAAU2C,OAAOzC,KACpE4E,EAAkBhF,YAAY,SAACC,GAAD,OAAyBA,EAAMC,UAAU8E,iBAAiB5E,KACxFyJ,EAAW6B,cAEXsM,EAAW5K,sBAAY,SAACmD,EAAsB0H,EAAgBC,EAAwBpU,GAA/D,OAAmF,SAAC6G,GACzG,GAAIsN,GAAQtN,IAAUuN,QAAuBtP,IAAN9E,EAAiB,CACpD,IAAMqU,EAAQrU,EAAIsU,EAAOvB,QAAQ,GAAKuB,EAAOvB,QAAQ,GAA+B,IAAzB/S,EAAIsU,EAAOvB,QAAQ,IAAY/S,EAAIsU,EAAOvB,QAAQ,GACzGuB,EAAOvB,QAAQ,GAA+B,IAAzB/S,EAAIsU,EAAOvB,QAAQ,IAAY/S,EACxD,MAAO,CACHuU,MAAO,IACPC,OAAQ,EACRxU,EAAGyU,EAAkB1B,QAAWsB,EAChCtU,QAAS,EACT2U,UAAW,SAAC3F,GAAD,MAAoC,WAATA,GAA8B,MAATA,IAG/D,MAAO,CACHwF,MAAO,EACPvU,EAAG2U,EAAS5B,QAAQrP,OAASe,EAAMf,OAASiR,EAAS5B,QAAQtG,EAAMmI,QAAQnQ,EAAMf,OAAOmD,EAAM,KAAO,EAC/F8N,EAAS5B,QAAQtG,EAAMmI,QAAQnQ,EAAMf,OAAOmD,EAAM,KAAO,EAC/D2N,OAAQ,UACRzU,QAAS,EACT2U,WAAW,KAGpB,CAACjQ,IAEFgI,EAAQqG,iBAAsB,IAC9B2B,EAAoB3B,iBAAsB,MAC1C+B,EAAgB/B,iBAAsB,IACtCgC,EAAkBhC,iBAAsB,IACxC6B,EAAW7B,iBAAsB,IACjCiC,EAAUjC,iBAAsB,IAChCwB,EAASxB,iBAAsB,IAC/BkC,EAAiBlC,iBAAyE,IAC1FmC,EAAcnC,iBAAyC,IAtC0C9K,EAuCpEC,mBAAiB,GAvCmDC,EAAAvL,OAAAC,EAAA,EAAAD,CAAAqL,EAAA,GAuChG1J,EAvCgG4J,EAAA,GAuCxFgN,EAvCwFhN,EAAA,GAAAiN,EAyCzEC,qBAAW3Q,EAAMf,OAAQwQ,EAASzH,EAAMsG,SAAU,CAACtO,IAzCsB4Q,EAAA1Y,OAAAC,EAAA,EAAAD,CAAAwY,EAAA,GAyChGG,EAzCgGD,EAAA,GAyCvFE,EAzCuFF,EAAA,GAAAG,EA2CrEvN,mBAAiB,GA3CoDwN,EAAA9Y,OAAAC,EAAA,EAAAD,CAAA6Y,EAAA,GA2ChGE,EA3CgGD,EAAA,GA2CjFE,EA3CiFF,EAAA,GA4CvG1Y,oBAAU,WACNkY,EAAYlC,QAAUtO,EAAMiC,IAAI,kBAAMxI,IAAM0X,cAC5CD,EAAShN,KAAKe,WACf,CAACjF,IAEJ,IAAMoR,EAAgBvM,sBAAY,SAACwM,GAC/BnB,EAAS5B,QAAU+C,EAAapP,IAAI,SAACpI,EAAQuI,GACzC,OAAOiP,EAAaC,OAAO,SAACC,EAAOvS,EAAMgE,GAIrC,OAHU,IAANA,GAAWA,GAAKZ,IAChBmP,GAASF,EAAarO,EAAI,IAEvBuO,GACR,KAEPhB,EAAejC,QAAU4B,EAAS5B,QAAQrM,IAAI,SAACjD,EAAMgE,GAAP,MAAc,CACxDwO,UAAWxS,EACXyS,OAAQzS,EAAOqS,EAAarO,GAAG,EAC/B0O,aAAc1S,EAAOqS,EAAarO,OAEvC,IAEHwL,0BAAgB,WAYZ,GAXKnS,GAA6B,IAAjB2D,EAAMf,SACnB+I,EAAMsG,QAAUtO,EAAMiC,IAAI,SAAC0P,EAAG3O,GAAJ,OAAUA,IACpCsN,EAAQhC,QAAUkC,EAAYlC,QAAQrM,IAAI,SAAAgK,GAAG,OAAIA,EAAIqC,QAASsD,gBAE9DvV,GAA6B,IAAjB2D,EAAMf,SAClB+I,EAAMsG,QAAU,CAAC,IAEjBjS,GAAY2D,EAAMf,OAASoR,EAAgB/B,QAAQrP,QAAyC,IAA/BuR,EAAYlC,QAAQrP,SACjF+I,EAAMsG,QAAN,CAAiB,GAAjBrQ,OAAA/F,OAAAiH,EAAA,EAAAjH,CAAuB8P,EAAMsG,QAAQrM,IAAI,SAAAjD,GAAI,OAAIA,EAAO,MACxDsR,EAAQhC,QAAR,CAAmBkC,EAAYlC,QAAQ,GAAGA,QAASsD,cAAnD3T,OAAA/F,OAAAiH,EAAA,EAAAjH,CAAoEoY,EAAQhC,WAE5EjS,GAAY2D,EAAMf,OAASoR,EAAgB/B,QAAQrP,OAAQ,CAC3D,IAAM4S,EAAmBxB,EAAgB/B,QAAQjM,UAAU,SAAAnE,GAAM,OAAqD,IAAjD8B,EAAMqC,UAAU,SAAArD,GAAI,OAAIA,EAAKmD,KAAOjE,MACnG4T,EAAe9J,EAAMsG,QAAQ6B,QAAQ0B,GAC3C7J,EAAMsG,QAAUtG,EAAMsG,QAAQxL,OAAO,SAAAV,GAAK,OAAIA,IAAUyP,IACnD5P,IAAI,SAAAjD,GAAI,OAAIA,EAAO6S,EAAmB7S,EAAO,EAAIA,IACtDsR,EAAQhC,QAAUgC,EAAQhC,QAAQxL,OAAO,SAAC6O,EAAGvP,GAAJ,OAAcA,IAAU0P,IAEjE9R,EAAMf,SAAWoR,EAAgB/B,QAAQrP,SACzCqR,EAAQhC,QAAUkC,EAAYlC,QAAQrM,IAAI,SAAAgK,GAAG,OAAIA,EAAIqC,QAASsD,gBAElER,EAAcd,EAAQhC,SACtBwC,EAAWrB,EAASzH,EAAMsG,UAC1B,IAAMyD,EAAazB,EAAQhC,QAAQgD,OAAO,SAACU,EAAK1D,GAAN,OAAkB0D,EAAM1D,GAAS,GAC3EmC,EAAiBsB,GACjBxC,EAAUwC,GACV1B,EAAgB/B,QAAUtO,EAAMiC,IAAI,SAAAjD,GAAI,OAAIA,EAAKmD,MAClD,CAAC8O,EAAe3W,EAAO8W,EAAe7B,EAAWuB,EAAYL,EAAkBpU,EAAU2D,EAAOyP,IAEnG,IAAMwC,EAAcpN,sBAAY,SAACzC,EAAe7G,GAC5C,GAAIA,EAAI,EAAG,CAGP,IAFA,IAAI2W,EAAW9P,EACXvI,EAAS,EACN0B,EAAI1B,EAASyW,EAAQhC,QAAQlM,EAAQ,GAAK,GAC7C8P,GAAY,EACZrY,GAAUyW,EAAQhC,QAAQlM,EAAQ,GAEtC,OAAO8P,EAAW5B,EAAQhC,QAAQrP,OAAS,EAAIqR,EAAQhC,QAAQrP,OAAS,EAAIiT,EAEhF,GAAI3W,EAAI,EAAG,CAGP,IAFA,IAAI2W,EAAW9P,EACXvI,EAAS,EACNqK,KAAKiO,IAAI5W,GAAK1B,EAASyW,EAAQhC,QAAQlM,EAAQ,GAAK,GACvD8P,GAAY,EACZrY,GAAUyW,EAAQhC,QAAQlM,EAAQ,GAEtC,OAAO8P,EAAW,EAAI,EAAIA,EAE9B,OAAO9P,GACR,IAEGgQ,EAAU7F,aAAQ,SAAAC,GAAsE,IAAA6F,EAAAna,OAAAC,EAAA,EAAAD,CAAAsU,EAApE8F,KAAoE,GAA7D3C,EAA6D0C,EAAA,GAA9CE,EAA8CF,EAAA,GAAlC3C,EAAkClD,EAAlCkD,KAAmBnU,EAAerD,OAAAC,EAAA,EAAAD,CAAAsU,EAA5BgG,SAA4B,MAAX9F,EAAWF,EAAXE,MAC/E,IAAI/P,aAAYF,EAAhB,CACK,OAALiQ,QAAK,IAALA,KAAOC,kBACP,IAAM8F,EAAWzK,EAAMsG,QAAQ6B,QAAQoC,GACL,OAA9BvC,EAAkB1B,UAClB0B,EAAkB1B,QAAU4B,EAAS5B,QAAQmE,GAC7C5C,EAAOvB,QAAU,EAAE0B,EAAkB1B,QAAS4B,EAAS5B,QAAQtO,EAAMf,OAAO,GAAK+Q,EAAkB1B,SACnGhN,EAASzB,IAAkC,KAE1CmQ,EAAkB1B,UAAS0B,EAAkB1B,QAAU4B,EAAS5B,QAAQmE,IAC7E,IAAMC,EAAST,EAAYQ,EAAUlX,GAC/BqN,EAAWhK,GAAQoJ,EAAMsG,QAASmE,EAAUC,GAC5CC,EAAa/T,GAAQ0R,EAAQhC,QAASmE,EAAUC,GAGtD,GAFAtB,EAAcuB,GACd7B,EAAWrB,EAAS7G,EAAU8G,EAAMC,EAAepU,KAC9CmU,EAAM,CAIP,GAHA1H,EAAMsG,QAAU1F,EAChB0H,EAAQhC,QAAUqE,EAClB3C,EAAkB1B,QAAU,MACvBrU,IAAQ+N,EAAMsG,QAAS8B,EAAc9B,SAAU,CAChD,IAAM1F,EAAWZ,EAAMsG,QAAQrM,IAAI,SAAAjD,GAAI,OAAIgB,EAAMhB,GAAMmD,KACvDb,EAAST,GAAuB7C,EAAY4K,IAEhDtH,EAASzB,IAAkC,OAEhD,CAAC+S,YAAY,IAEVC,EAAWC,aAAS,SAAAjG,GAAgB,IAAdgG,EAAchG,EAAdgG,SACpBA,GAAUrD,GAAiB,GAC1BqD,GAAUrD,GAAiB,KAGpC,OACIjX,EAAAC,EAAAC,cAAC6W,GAADpX,OAAAsT,OAAA,CAAcpR,QAASP,GAAYwC,GAAQnE,OAAA4D,EAAA,EAAA5D,CAAA,GAAQ2a,MAC9C7S,EAAMiC,IAAI,SAAClB,EAAMiC,GAAP,OACPzK,EAAAC,EAAAC,cAACsa,GAAD7a,OAAAsT,OAAA,GAAiBnP,GAAQnE,OAAA4D,EAAA,EAAA5D,CAAA,GAAQka,EAAQpS,EAAMf,OAAO+D,EAAE,EAAGA,IAA3D,CAAgEgQ,IAAKjS,EAAKoB,GAAIzJ,MAAOmY,EAAQ7Q,EAAMf,OAAO+D,EAAE,GAC/FiJ,IAAKuE,EAAYlC,QAAQtL,KAClCzK,EAAAC,EAAAC,cAACwa,GAAD,CAAclS,KAAMA,EAAM/C,WAAYA,EAAYpE,QAASA,SAMrCK,KC9LpCiZ,UAAYjc,IAAOE,IAAVC,WAAA,CAAAC,YAAA,2BAAAC,YAAA,gBAAGL,CAAH,keACO,SAAAqC,GAAK,OAAIA,EAAMC,SAASvB,YACnC,SAAAsB,GAAK,OAAIA,EAAMC,SAASJ,OAOvB,SAAAG,GAAK,OAAIA,EAAM2U,gBAAkB,OAAS,WAOjC,SAAA3U,GAAK,OAAIA,EAAM2U,gBAAkB,IAAM,GAUxC,SAAA3U,GAAK,OAAIA,EAAMC,SAAST,gBAgE7BW,OAAMC,KAnDsB,SAAAC,GACmD,IADjDwZ,EACiDxZ,EADjDwZ,UAAWhR,EACsCxI,EADtCwI,GAAIiR,EACkCzZ,EADlCyZ,gBACZC,EAA8C1Z,EAA9C0Z,eAAgBC,EAA8B3Z,EAA9B2Z,gBAAiB1Z,EAAaD,EAAbC,QAEvE0H,EAAW6B,cAEjB7K,oBAAU,WACF2T,EAAIqC,SAAW8E,IACfnH,EAAIqC,QAAQC,QACZjN,EAASzB,IAAkC,MAEhD,CAACuT,EAAiB9R,IAErB,IAAM2K,EAAMoC,iBAAuB,MACnCG,0BAAgB,WACRvC,EAAIqC,UACJrC,EAAIqC,QAAQG,YAAc0E,EACR,KAAdA,GAAkBG,GAAgB,KAE3C,CAACH,EAAWG,IAEf,IAqBMrE,EAAe1C,aAAQ,SAAAC,GAAa,IAAXE,EAAWF,EAAXE,MACtB,OAALA,QAAK,IAALA,KAAOC,oBAGX,OACIpU,EAAAC,EAAAC,cAACya,GAADhb,OAAAsT,OAAA,CAAWyC,gBAAiBmF,EAAiBnH,IAAKA,EAAKmD,UAAW,SAAAzB,GAAC,OA1B7C,SAACA,GACL,KAAdA,EAAEmB,SAAgC,KAAdnB,EAAEmB,UACtBnB,EAAEoB,iBACF9C,EAAIqC,QAASU,QAuBsDuE,CAAkB5F,IAC9E0B,OArBO,WACdrC,GAASf,EAAIqC,QAASG,cACtBnN,EAAST,GAAiCsB,EAAI8J,EAAIqC,QAASG,cAC3D6E,GAAgB,GAChBhS,EAASzB,IAAkC,KACnCmN,GAASf,EAAIqC,QAASG,cAA8B,KAAd0E,GAK9C7R,EAASzB,IAAkC,IAC3CwT,MALApH,EAAIqC,QAASG,YAAc0E,EAC3BG,GAAgB,GAChBhS,EAASzB,IAAkC,MAabtG,SAAUK,GAAawZ,GAAelb,OAAA4D,EAAA,EAAA5D,CAAA,GAAQ+W,SC1F3EuE,GAAgBvc,IAAOE,IAAVC,WAAA,CAAAC,YAAA,gCAAAC,YAAA,YAAGL,CAAH,yNAabkV,GAASlV,IAAOE,IAAVC,WAAA,CAAAC,YAAA,yBAAAC,YAAA,YAAGL,CAAH,2ZASD,SAAAqC,GAAK,OAAIA,EAAMma,OAAOzb,YAC3B,SAAAsB,GAAK,OAAIA,EAAMma,OAAOta,OACjB,SAAAG,GAAK,OAAIA,EAAMma,OAAO1a,eAGZ,SAAAO,GAAK,OAAIA,EAAMma,OAAOta,OACjC,SAAAG,GAAK,OAAIA,EAAMma,OAAOzb,aA8CxByB,OAAMC,KApBuB,SAAAC,GAAiD,IAA/C+Z,EAA+C/Z,EAA/C+Z,OAAQL,EAAuC1Z,EAAvC0Z,eAAgBM,EAAuBha,EAAvBga,QAASC,EAAcja,EAAdia,SAE3E,OACIrb,EAAAC,EAAAC,cAAC+a,GAAD,KACIjb,EAAAC,EAAAC,cAACob,GAAD,CAAQJ,OAAQC,EACRhY,QAASiY,GACbpb,EAAAC,EAAAC,cAACqU,GAAA,EAAD,CAAiBC,KAAK,UAE1BxU,EAAAC,EAAAC,cAACob,GAAD,CAAQJ,OAAQC,EACRhY,QAAS2X,GACb9a,EAAAC,EAAAC,cAACqU,GAAA,EAAD,CAAiBC,KAAK,WAE1BxU,EAAAC,EAAAC,cAACob,GAAD,CAAQJ,OAAQC,EACRhY,QAAS,kBAAMkY,GAAS,KAC5Brb,EAAAC,EAAAC,cAACqU,GAAA,EAAD,CAAiBC,KAAK,aC5DhC+G,GAAoB7c,IAAOE,IAAVC,WAAA,CAAAC,YAAA,8BAAAC,YAAA,gBAAGL,CAAH,sKAOX,SAAAqC,GAAK,OAAIA,EAAM2C,WAAa3C,EAAMya,gBAAkB,UAAY,WAIxE,SAAAza,GAAK,OAAKA,EAAM2C,YAAc3C,EAAMya,kBAAoBza,EAAM0a,sBAArD,WAAA/V,OACEgW,GADF,kEAAAhW,OAIEiW,GAJF,4FAUPD,GAAiBhd,IAAOE,IAAVC,WAAA,CAAAC,YAAA,2BAAAC,YAAA,gBAAGL,CAAH,2iBACR,SAAAqC,GAAK,OAAIA,EAAM2C,UAAY,OAAS,WAKhC,SAAA3C,GAAK,OAAIX,EAAeW,EAAMC,UAAUX,mBAcpC,SAAAU,GAAK,OAAIX,EAAeW,EAAMC,UAAUV,SAC3C,SAAAS,GAAK,OAAIA,EAAMya,gBAAkB,EAAI,GAElD,SAAAza,GAAK,OAAIA,EAAM2C,YAAc3C,EAAM6a,iBAAmB7a,EAAM8a,iBAAnD,WAAAnW,OACEuV,GADF,OAAAvV,OACqBuV,GADrB,qLAAAvV,OAOIoW,GAPJ,wCAqBI,SAAA/a,GAAK,OAAKA,EAAMya,gBAAsB,EAAJ,GAE/C,SAAAza,GAAK,OAAIA,EAAM2C,WAAN,0LAAAgC,OAOHoW,GAPG,0BAWPA,GAAiBpd,IAAOE,IAAVC,WAAA,CAAAC,YAAA,2BAAAC,YAAA,gBAAGL,CAAH,4NASJ,SAAAqC,GAAK,OAAIX,EAAeW,EAAMC,UAAUT,eAKlDob,GAAajd,IAAOE,IAAVC,WAAA,CAAAC,YAAA,uBAAAC,YAAA,gBAAGL,CAAH,4WACH,SAAAqC,GAAK,OAAIA,EAAM2C,WAAa3C,EAAMya,gBAAkB,OAAS,UA8H3Dta,OAAMC,KAlGiB,SAAAC,GAGO,IAFFwI,EAEExI,EAFFwI,GAAIgR,EAEFxZ,EAFEwZ,UAAWmB,EAEb3a,EAFa2a,UAAWC,EAExB5a,EAFwB4a,aAC1BC,EACE7a,EADF6a,cAAeC,EACb9a,EADa8a,WAAYC,EACzB/a,EADyB+a,YAG5DrY,EAAW5E,YAAY,SAACyI,GAAD,OAAyBA,EAAMkD,SAAS/G,UAAUxE,KACzEyH,EAAgB7H,YAAY,SAACyI,GAAD,OAAyBA,EAAMvI,UAAU2H,eAAezH,KACpFyL,EAAY7L,YAAY,SAACyI,GAAD,OAAyBA,EAAMvI,UAAUgI,gBAAgB9H,KACjF+H,EAAsBnI,YAAY,SAACyI,GAAD,OAAyBA,EAAMvI,UAAUiI,qBAAqB/H,KAEhGyJ,EAAW6B,cAPwBI,EASOC,oBAAkB,GATzBC,EAAAvL,OAAAC,EAAA,EAAAD,CAAAqL,EAAA,GASlCoR,EATkClR,EAAA,GASlBmR,EATkBnR,EAAA,GAUnC+L,EAAmB3K,sBAAY,SAAC/E,GAClC8U,EAAsB9U,IACvB,IAEG+U,EAAaxG,iBAAe,GAC5BpC,EAAMoC,iBAAuB,MAC7BkB,EAAY1K,sBAAY,SAAChL,GACA,IAAvBgb,EAAWvG,SAAiBrC,EAAIqC,UAChCuG,EAAWvG,QAAUrC,EAAIqC,QAAQsD,cAEjCiD,EAAWvG,UAAYzU,GACvB2a,EAAc3a,EAASgb,EAAWvG,QAASnM,IAEhD,CAACA,EAAIqS,IAEFb,EAAU9O,sBAAY,WACxB,IAAM3G,EAAS,uCAAuC4G,QAAQ,QAAS,SAAAC,GACnE,IAAIC,EAAoB,GAAhBd,KAAKe,SAAgB,EAC7B,OAD0C,MAANF,EAAYC,EAAU,EAAJA,EAAW,GACxDE,SAAS,MAOtB5D,EAAST,GALO,CACZ9C,MAAO,GACPoE,GAAIjE,EACJF,WAAYmE,GAEuBA,KACxC,CAACA,EAAIb,IAEF+R,EAAiBxO,sBAAY,WAC/B4P,EAAWtS,GACXb,EAAST,GAA4BsB,KACtC,CAACA,EAAIb,EAAUmT,IAzCuB1D,EA2CnBvN,mBAAiB,OAAhCsR,EA3CkC5c,OAAAC,EAAA,EAAAD,CAAA6Y,EAAA,MA+CnC/Q,EAAQsU,EAAYA,EAAUxR,OAAO,SAAAiS,GACvC,MAAoB,WAAhBD,EACoB,IAAbC,EAAEjV,OAEO,cAAhBgV,GACoB,IAAbC,EAAEjV,SAGZ,GAICkV,EAAOlC,aAAS,SAAAtG,GAAgB,IAAdqG,EAAcrG,EAAdqG,UAChBA,GAAavP,GAAchE,GAC3BgC,EAASzB,GAA4BlH,EAAe4b,KAEnD1B,GAAavP,GAAchE,GAC5BgC,EAASzB,GAA4BzG,MAhEJ6b,EAqEGzR,oBAAkB,GArErB0R,EAAAhd,OAAAC,EAAA,EAAAD,CAAA+c,EAAA,GAqElC7B,EArEkC8B,EAAA,GAqEjBC,EArEiBD,EAAA,GAsEnC5B,EAAkBzO,sBAAY,SAAC3E,GACjCiV,EAAiBjV,IAClB,IAEH,OACI3H,EAAAC,EAAAC,cAACqb,GAAD5b,OAAAsT,OAAA,GAAuBwJ,IAAvB,CAA+B/I,IAAKA,EAAKhQ,UAAWI,EAAU0X,gBAAiBW,EAC5DV,qBAAsBpU,IACrCrH,EAAAC,EAAAC,cAACyb,GAAD,CAAYjY,UAAWI,EAAU0X,gBAAiBW,IAClDnc,EAAAC,EAAAC,cAACwb,GAAD,CAAgB1a,SAAUgb,EAActY,UAAWI,EAAU+X,gBAAiBO,EAC9DZ,gBAAiBW,EAAaP,eAAgB7U,GAC1D/G,EAAAC,EAAAC,cAAC4b,GAAD,CAAgB9a,SAAUgb,IAC1Bhc,EAAAC,EAAAC,cAAC2c,GAAD,CAAgB1B,OAAQ/a,EAAe4b,GAAelB,eAAgBA,EACtDM,QAASA,EAASC,SAAUN,IAC5C/a,EAAAC,EAAAC,cAAC4c,GAAD,CAAelC,UAAWA,EAAWhR,GAAIA,EAAIiR,gBAAiBA,EAC/CC,eAAgBA,EAChBC,gBAAiBA,EAAiB1Z,QAASjB,EAAe4b,KACzEhc,EAAAC,EAAAC,cAAC6c,GAAD,CAAetX,WAAYmE,EAAInC,MAAOA,EAAOuP,UAAWA,EACzC3V,QAASjB,EAAe4b,GACxB/E,iBAAkBA,OAObvV,KC/N9Bsb,GAA6Bte,YAAOC,WAASC,KAAnBC,WAAA,CAAAC,YAAA,0CAAAC,YAAA,YAAGL,CAAH,2CAK1Bue,GAAcve,YAAOC,WAASC,KAAnBC,WAAA,CAAAC,YAAA,cAAAC,YAAA,YAAGL,CAAH,mOAGJ0F,WAAW,GAAK,GACfA,WAAW,GAAK,GAIZ,SAAArD,GAAK,OAAIA,EAAMC,SAASvB,YAC7B,SAAAsB,GAAK,OAAIA,EAAMC,SAASJ,OACnB,SAAAG,GAAK,OAAIA,EAAMC,SAASR,eAGpB,SAAAO,GAAK,OAAIA,EAAMC,SAASJ,OAC7B,SAAAG,GAAK,OAAIA,EAAMC,SAASvB,aAsB1ByB,OAAMC,KAbsB,SAAAC,GAAiD,IAA/C8b,EAA+C9b,EAA/C8b,qBAAsBC,EAAyB/b,EAAzB+b,oBAEzDle,EAAiBC,YAAY,SAACyI,GAAD,OAAyBA,EAAMvI,UAAUC,qBAAqBC,KAEjG,OACIU,EAAAC,EAAAC,cAAC8c,GAAD,CAA4B7Z,QAASga,EAAqBhd,MAAO+c,GAC7Dld,EAAAC,EAAAC,cAAC+c,GAAD,CAAajc,SAAU/B,GACnBe,EAAAC,EAAAC,cAACqU,GAAA,EAAD,CAAiBC,KAAK,aAMG9S,KCnCnC0b,GAAoB1e,YAAOC,WAASC,KAAnBC,WAAA,CAAAC,YAAA,uCAAAC,YAAA,gBAAGL,CAAH,iEAGZ,SAAAqC,GAAK,OAAIA,EAAMsc,SAmZXnc,OAAMC,KA5X0B,SAAAC,GAGC,IAFFkc,EAEElc,EAFFkc,oBAAqBC,EAEnBnc,EAFmBmc,qBACrBC,EACEpc,EADFoc,kBAAmBC,EACjBrc,EADiBqc,yBAA0BC,EAC3Ctc,EAD2Csc,gBAGjF5Z,EAAW5E,YAAY,SAACC,GAAD,OAAyBA,EAAM0L,SAAS/G,UAAUxE,KACzE0I,EAAY9I,YAAY,SAACC,GAAD,OAAyBA,EAAM0L,SAAS7C,WAAWtG,KAC3EK,EAAQ7C,YAAY,SAACC,GAAD,OAAyBA,EAAMC,UAAU2C,OAAOzC,KACpE2C,EAAkB/C,YAAY,SAACC,GAAD,OAAyBA,EAAMC,UAAU6C,iBAAiB3C,KACxF4E,EAAkBhF,YAAY,SAACyI,GAAD,OAAyBA,EAAMvI,UAAU8E,iBAAiB5E,KACxFyH,EAAgB7H,YAAY,SAACyI,GAAD,OAAyBA,EAAMvI,UAAU2H,eAAezH,KAEpFyJ,EAAW6B,cAGX+S,EAAY7H,iBAA6B,IAZHqC,EAcdC,qBAAWpQ,EAAUtB,OAAQ,SAAA+D,GACvD,GAAiC,IAA7BkT,EAAU5H,QAAQrP,OAAc,MAAO,CACvClF,EAAG,EAAGwB,EAAG,EAAGwU,OAAQ,EAAGzU,QAAS,EAAG6a,QAAS,SAEhD,IAAMC,EAAkBF,EAAU5H,QAAQxH,KAAK,SAACxE,GAAD,OAAUA,EAAKF,QAAU7B,EAAUtB,OAAS,EAAI+D,IAC/F,MAAO,CACHjJ,EAAGqc,EAAkBA,EAAgBrc,EAAI,EACzCwB,EAAG6a,EAAkBA,EAAgB7a,EAAI,EACzCD,QAAS,EACTyU,OAAQ,EACRoG,QAAS,WAxB2BvF,EAAA1Y,OAAAC,EAAA,EAAAD,CAAAwY,EAAA,GAcrCG,EAdqCD,EAAA,GAc5BE,EAd4BF,EAAA,GA6BtCyF,EAAU5L,kBAAQ,WACpB,OAAOnQ,GAAS,KAAO,EAAIA,GAAS,KAAO,EAAIA,GAAS,IAAM,EAAI,GACnE,CAACA,IACEgc,EAAY7L,kBAAQ,kBAAMnQ,EAAQ+b,GAAS,CAAC/b,EAAO+b,IAEnDE,EAAsB1R,sBAAY,WACpC,IAAM8N,EAAa,IAAI6D,MAAMH,GAASI,KAAK,GAC3CP,EAAU5H,QAAU4H,EAAU5H,QAAQrM,IAAI,SAACjD,EAAMgE,GAC7C,IAAM0T,EAAwBC,EAAerI,QAAQxH,KAAK,SAAAxE,GAAI,OAAItD,EAAKmD,KAAOG,EAAKH,KAC7EtI,EAAS6c,EAAwBA,EAAsB7c,OAAS,EAChE+c,EAAS5T,EAAIqT,EACbtc,EAAIuc,EAAYM,EAChBrb,GAAKoX,EAAWiE,IAAW/c,GAAUA,EACrCgd,EAAS9c,EAAIuc,EACbQ,EAAOvb,EAAI1B,EACXkd,EAAmBhd,EAAIuc,EAAY,EACnCU,EAAiBzb,EAAI1B,EAAS,EACpC,OAAO3B,OAAA4D,EAAA,EAAA5D,CAAA,GAAI8G,EAAX,CAAiBjF,IAAGwB,IAAGsb,SAAQC,OAAMC,mBAAkBC,iBAAgBnd,aAEvEqK,KAAK+S,IAALC,MAAAhT,KAAIhM,OAAAiH,EAAA,EAAAjH,CAAQya,MAAgB9Y,EAAOyU,UACnCzU,EAAOyU,QAAUpK,KAAK+S,IAALC,MAAAhT,KAAIhM,OAAAiH,EAAA,EAAAjH,CAAQya,IAC7BrR,EAASzB,GAA2BhG,EAAOyU,YAEhD,CAACgI,EAAWD,EAAS/U,IAGlBqV,EAAiBtI,iBAA8C,IAC/DmG,EAAgB3P,sBAAY,SAAChL,EAAgBsI,GAC/C,IAAMgV,EAAaR,EAAerI,QAAQjM,UAAU,SAAArD,GAAI,OAAIA,EAAKmD,KAAOA,IAClEiV,GAAkC,IAAhBD,EAAA,GAAAlZ,OAAA/F,OAAAiH,EAAA,EAAAjH,CAAwBye,EAAerI,SAAvC,CAAgD,CAACzU,SAAQsI,QAC3EwU,EAAerI,QAAQrM,IAAI,SAACjD,EAAMgE,GAChC,OAAIA,IAAMmU,EAAmB,CAACtd,SAAQsI,MAC/BnD,IAEf2X,EAAerI,QAAU8I,EACrBA,EAAgBnY,SAAWsB,EAAUtB,SACrCsX,IACAzF,EAAW,SAAA9N,GACP,IAAMoT,EAAkBF,EAAU5H,QAAQxH,KAAK,SAACxE,GAAD,OAAUA,EAAKF,QAAU7B,EAAUtB,OAAS,EAAI+D,IAC/F,OAAIoT,EAAwB,CAACrc,EAAGqc,EAAgBrc,EAAGwB,EAAG6a,EAAgB7a,GAC/D,CAACK,IAAI,OAGrB,CAAC2E,EAAWuQ,EAAYyF,IAErB9B,EAAa5P,sBAAY,SAAC1C,GAC5BwU,EAAerI,QAAUqI,EAAerI,QAAQxL,OAAO,SAAA9D,GAAI,OAAIA,EAAKmD,KAAOA,KAC5E,IAEGtI,EAASwU,iBAAe,GAG9B/V,oBAAU,WACN,IAAK+D,GAAyC,IAA7B6Z,EAAU5H,QAAQrP,OAAc,CAC7C,IAAM0T,EAAa,IAAI6D,MAAMH,GAASI,KAAK,GAC3CP,EAAU5H,QAAU/N,EAAU0B,IAC1B,SAACjD,EAAMgE,GACH,IAAM0T,EAAwBC,EAAerI,QAAQxH,KAAK,SAAAxE,GAAI,OAAItD,EAAKmD,KAAOG,EAAKH,KAC7EtI,EAAS6c,EAAwBA,EAAsB7c,OAAS,EAChE+c,EAAS5T,EAAIqT,EACbtc,EAAIuc,EAAYM,EAChBrb,GAAKoX,EAAWiE,IAAW/c,GAAUA,EACrCgd,EAAS9c,EAAIuc,EACbQ,EAAOvb,EAAI1B,EACXkd,EAAmBhd,EAAIuc,EAAY,EACnCU,EAAiBzb,EAAI1B,EAAS,EAC9BuI,EAAQY,EACd,MAAO,CAACjJ,IAAGwB,IAAG1B,SAAQsI,GAAInD,EAAKmD,GAAI2U,OAAMD,SAAQE,mBAAkBC,iBAAgB5U,WAE3FvI,EAAOyU,QAAUpK,KAAK+S,IAALC,MAAAhT,KAAIhM,OAAAiH,EAAA,EAAAjH,CAAQya,IAC7BrR,EAASzB,GAA2BhG,EAAOyU,UAY/C,GAVIjS,GAAY6Z,EAAU5H,QAAQrP,OAASsB,EAAUtB,SACjDiX,EAAU5H,QAAU,CAAC,CACjBvU,EAAG,EAAGwB,EAAG,EAAG1B,OAAQ,EAAGsI,GAAI5B,EAAU,GAAG4B,GAAI2U,KAAM,EAClDD,OAAQ,EAAGE,iBAAkB,EAAGC,eAAgB,EAAG5U,MAAO,IAF1CnE,OAAA/F,OAAAiH,EAAA,EAAAjH,CAGdge,EAAU5H,UAASrM,IAAI,SAACjD,EAAMgE,GAChC,OAAU,IAANA,EAAgBhE,EACb9G,OAAA4D,EAAA,EAAA5D,CAAA,GAAI8G,EAAX,CAAiBoD,MAAOpD,EAAKoD,MAAQ,MAEzCmU,KAEAla,GAAY6Z,EAAU5H,QAAQrP,OAASsB,EAAUtB,OAAQ,CACzD,IAAMoY,EAAmBnB,EAAU5H,QAAQjM,UAAU,SAAArD,GAAI,OACC,IAAtDuB,EAAU8B,UAAU,SAAAC,GAAI,OAAIA,EAAKH,KAAOnD,EAAKmD,OAC3CmV,EAAcpB,EAAU5H,QAAQ+I,GACtCnB,EAAU5H,QAAU4H,EAAU5H,QAAQrM,IAAI,SAACjD,GACvC,IAAMoD,EAAQpD,EAAKoD,MAAQkV,EAAYlV,MAAQpD,EAAKoD,MAAQ,EAAIpD,EAAKoD,MACrE,OAAOlK,OAAA4D,EAAA,EAAA5D,CAAA,GAAI8G,EAAX,CAAiBoD,YAClBU,OAAO,SAAC9D,EAAMgE,GAAP,OAAaA,IAAMqU,IAC7Bd,IAEAL,EAAU5H,QAAQrP,SAAWsB,EAAUtB,QAAQsX,IACnDzF,EAAW,SAAA9N,GACP,IAAMoT,EAAkBF,EAAU5H,QAAQxH,KAAK,SAACxE,GAAD,OAAUA,EAAKF,QAAU7B,EAAUtB,OAAS,EAAI+D,IAC/F,MAAO,CAACjJ,EAAGqc,EAAgBrc,EAAGwB,EAAG6a,EAAgB7a,MAEtD,CAACgF,EAAW8V,EAASC,EAAWhV,EAAUjF,EAAUka,EAAqBzF,IAE5ExY,oBAAU,WACNie,IACAzF,EAAW,SAAA9N,GACP,IAAMoT,EAAkBF,EAAU5H,QAAQxH,KAAK,SAACxE,GAAD,OAAUA,EAAKF,QAAU7B,EAAUtB,OAAS,EAAI+D,IAC/F,MAAO,CAACjJ,EAAGqc,EAAgBrc,EAAGwB,EAAG6a,EAAgB7a,MAEtD,CAACjB,EAAO+b,EAASC,EAAWC,EAAqBhW,EAAUtB,OAAQ6R,IAEtE,IAAMyG,EAAU1S,sBAAY,SAACiD,EAAkBoK,GAC3C,ICtLasF,EAAiBC,EAAgBC,EDsLxC/E,EAAa,IAAI6D,MAAMH,GAASI,KAAK,GAC3CP,EAAU5H,SCvLGkJ,EDuLYtB,EAAU5H,QCvLLmJ,EDuLc3P,ECvLE4P,EDuLQxF,ECvLWsF,EAAIvV,IAAI,SAAC0V,EAAKC,GACnF,OAAIA,IAAQH,EAAeD,EAAIE,GAC3BE,IAAQF,EAAeF,EAAIC,GACxBE,KDoL6D1V,IAAI,SAACjD,EAAMgE,GACvE,IAAM4T,EAAS5T,EAAIqT,EACbtc,EAAIuc,EAAYM,EAChBrb,GAAKoX,EAAWiE,IAAW5X,EAAKnF,QAAUmF,EAAKnF,OAC/Cgd,EAAS9c,EAAIuc,EACbQ,EAAOvb,EAAIyD,EAAKnF,OAChBkd,EAAmBhd,EAAIuc,EAAY,EACnCU,EAAiBzb,EAAIyD,EAAKnF,OAAS,EACzC,OAAO3B,OAAA4D,EAAA,EAAA5D,CAAA,GAAI8G,EAAX,CAAiBjF,IAAGwB,IAAGsb,SAAQC,OAAMC,mBAAkBC,qBAEvD9S,KAAK+S,IAALC,MAAAhT,KAAIhM,OAAAiH,EAAA,EAAAjH,CAAQya,MAAgB9Y,EAAOyU,UACnCzU,EAAOyU,QAAUpK,KAAK+S,IAALC,MAAAhT,KAAIhM,OAAAiH,EAAA,EAAAjH,CAAQya,IAC7BrR,EAASzB,GAA2BhG,EAAOyU,YAEhD,CAACgI,EAAWD,EAAS/U,IAElBuW,EAAqBhT,sBAAY,SAAC9K,EAAWwB,GAC/C,IAAMuc,EAAOtP,EAAS8F,QAAQyI,iBAAmBhd,EAC3Cge,EAAOvP,EAAS8F,QAAQ0I,eAAiBzb,EACzCyc,EAAaxP,EAAS8F,QAAQzU,OAAS,EACzCmJ,EAAIkT,EAAU5H,QAAQjM,UAAU,SAAArD,GAChC,OAAQA,EAAKjF,EAAI+d,GAAQ9Y,EAAK6X,OAASiB,GAAQ9Y,EAAKgY,eAAiBgB,EAAaD,GAAQ/Y,EAAKgY,eAAiBgB,EAAaD,IAEjI,OAAO/U,EAAIzC,EAAUtB,QAAU+D,GAAK,EAAIA,EAAI,MAC7C,CAACzC,IAEE0X,EAAmBpT,sBAAY,SAAC9K,EAAWwB,EAAW2c,GACxDpH,EAAW,SAAA9N,GACP,GAAIA,IAAMkV,EACN,MAAO,CACHne,EAAGyO,EAAS8F,QAAQvU,EAAIA,EACxBwB,EAAGiN,EAAS8F,QAAQ/S,EAAIA,EACxBwU,OAAQ,EACRxF,OAAQ,CAAC4N,QAAS,IAAKC,OAAO,GAC9BnI,UAAW,SAACoI,GAAD,MAA8B,WAANA,IAG3C,IAAMjC,EAAkBF,EAAU5H,QAAQxH,KAAK,SAACxE,GAAD,OAAUA,EAAKF,QAAU7B,EAAUtB,OAAS,EAAI+D,IAC/F,MAAO,CAACjJ,EAAGqc,EAAgBrc,EAAGwB,EAAG6a,EAAgB7a,MAEtD,CAACgF,EAAWuQ,IAETtI,EAAW6F,iBAAsB,MACjCwB,EAASxB,iBAA0G,CACrHiK,KAAM,EAAGC,MAAO,EAAGhN,IAAK,EAAGiN,OAAQ,EAAGC,QAAS,EAAGC,WAAY,IAE5DC,EAActK,iBAAsF,MACpGuK,EAAWvK,iBAAe,GAC1BwK,EAASxK,iBAAe,GACxBxK,EAAYwK,iBAAsB,MAElCyK,EAAYjU,sBAAY,WAC1B,IAAMyT,GAAQ9P,EAAS8F,QAASvU,EAAI,GAAK4e,EAAYrK,QAASyK,QACxDR,EAAQje,EAAQkO,EAAS8F,QAASuI,OAAS,IAAMvc,EAAQ+b,EAAUsC,EAAYrK,QAASyK,SACxFxN,EAA6B,GAAtB/C,EAAS8F,QAAS/S,EAASod,EAAYrK,QAAS0K,QAAU,GAAK,GACtER,EAAS3e,EAAOyU,QAAU9F,EAAS8F,QAAS/S,EAAI,IAAMod,EAAYrK,QAAS0K,QAAU,IACrFP,GAAWE,EAAYrK,QAAS2K,QAAUze,EAAkB,GAAK,GACjEke,EAAa1U,OAAOC,YAAmC,GAArBD,OAAOC,YAAoBwU,EAAUje,EAAkB,GAC/FqV,EAAOvB,QAAU,CAACgK,OAAMC,QAAOhN,MAAKiN,SAAQC,UAASC,eACtD,CAACpe,EAAO+b,EAAS7b,IAEd4X,EAAU7F,aAAQ,SAAAC,GAGO,IAAA6F,EAAAna,OAAAC,EAAA,EAAAD,CAAAsU,EAFF8F,KAEE,GAFKlQ,EAELiQ,EAAA,GAFY6F,EAEZ7F,EAAA,GAF2B3C,EAE3BlD,EAF2BkD,KAE3BwJ,EAAAhhB,OAAAC,EAAA,EAAAD,CAAAsU,EAFiCgG,SAEjC,GAF4CzY,EAE5Cmf,EAAA,GAF+C3d,EAE/C2d,EAAA,GADFC,EACE3M,EADF2M,OAAQC,EACN5M,EADM4M,MAAO1M,EACbF,EADaE,MAExC,IAAIjQ,IAAmBE,WAAvB,CACK,OAAL+P,QAAK,IAALA,KAAOC,kBACP,IAAM0M,EAAcnD,EAAU5H,QAAQjM,UAAU,SAAArD,GAAI,OAAIA,EAAKoD,QAAUA,IAgBvE,GAfK9C,GACDgC,EAASzB,IAAkC,IAE3CuZ,IACA5Q,EAAS8F,QAAU4H,EAAU5H,QAAQ+K,GAErCV,EAAYrK,QAAU,CAACyK,QAASrM,EAAMqM,QAASC,QAAStM,EAAMsM,QAASM,QAAS5M,EAAM4M,QAASL,QAASvM,EAAMuM,SAC9GH,IACAF,EAAStK,QAAU/S,EACnBsd,EAAOvK,QAAU,GAEK,OAAtBzK,EAAUyK,UACV9J,aAAaX,EAAUyK,SACvBzK,EAAUyK,QAAU,MAEpB6K,EACA,GAAI5d,EAAIsU,EAAOvB,QAAQoK,YAAcE,EAAStK,QAAUuB,EAAOvB,QAAQkK,OAAQ,CAC3E,IAAMe,EAAc,SAAdA,IAAc,IAAAC,EAAA,OAAA9X,EAAAlJ,EAAAmJ,MAAA,SAAAyI,GAAA,cAAAA,EAAAvI,KAAAuI,EAAAtI,MAAA,cACV0X,EAAU,IAAI9W,QAAQ,SAAC+W,GACzB5V,EAAUyK,QAAUtK,OAAOpB,WAAW,WAC9BkT,EAAqB,UACrB8C,EAAStK,QAAUsK,EAAStK,QAAU,EACtCuK,EAAOvK,QAAUuK,EAAOvK,QAAU,EAClC,IAAM4D,EAAW2F,EAAmB9d,EAAG6e,EAAStK,SAC/B,OAAb4D,GAAqBA,IAAamH,GAAa9B,EAAQ8B,EAAanH,GACxE+F,EAAiBle,EAAG6e,EAAStK,QAAS4J,GACtCuB,KAEF,MAXMrP,EAAAtI,KAAA,EAAAJ,EAAAlJ,EAAAuJ,MAaVyX,EAAQhc,KAAK,WACXob,EAAStK,QAAUuB,EAAOvB,QAAQkK,QAAQe,OAdlC,wBAAAnP,EAAA3H,WAiBnBf,EAAAlJ,EAAAmJ,MAAA,SAAAO,GAAA,cAAAA,EAAAL,KAAAK,EAAAJ,MAAA,cAAAI,EAAAJ,KAAA,EAAAJ,EAAAlJ,EAAAuJ,MAAkBwX,KAAlB,cAAArX,EAAAM,OAAA,SAAAN,EAAAF,MAAA,wBAAAE,EAAAO,eACE,GAAIlH,EAAIsU,EAAOvB,QAAQmK,SAAWG,EAAStK,QAAUuB,EAAOvB,QAAQ/C,IAAK,CAC5E,IAAMgO,EAAc,SAAdA,IAAc,IAAAC,EAAA,OAAA9X,EAAAlJ,EAAAmJ,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACV0X,EAAU,IAAI9W,QAAQ,SAAC+W,GACzB5V,EAAUyK,QAAUtK,OAAOpB,WAAW,WAC9BkT,EAAqB,OACrB8C,EAAStK,QAAUsK,EAAStK,QAAU,EACtCuK,EAAOvK,QAAUuK,EAAOvK,QAAU,EAClC,IAAM4D,EAAW2F,EAAmB9d,EAAG6e,EAAStK,SAC/B,OAAb4D,GAAqBA,IAAamH,GAAa9B,EAAQ8B,EAAanH,GACxE+F,EAAiBle,EAAG6e,EAAStK,QAAS4J,GACtCuB,KAEF,MAXM7X,EAAAE,KAAA,EAAAJ,EAAAlJ,EAAAuJ,MAaVyX,EAAQhc,KAAK,WACXob,EAAStK,QAAUuB,EAAOvB,QAAQ/C,KAAKgO,OAd/B,wBAAA3X,EAAAa,WAiBnBf,EAAAlJ,EAAAmJ,MAAA,SAAAyF,GAAA,cAAAA,EAAAvF,KAAAuF,EAAAtF,MAAA,cAAAsF,EAAAtF,KAAA,EAAAJ,EAAAlJ,EAAAuJ,MAAkBwX,KAAlB,cAAAnS,EAAA5E,OAAA,SAAA4E,EAAApF,MAAA,wBAAAoF,EAAA3E,cACE,CACHmW,EAAStK,QAAU/S,EAAIsd,EAAOvK,QAC9B,IAAM4D,EAAW2F,EAAmB9d,EAAG6e,EAAStK,SAC/B,OAAb4D,GAAqBA,IAAamH,GAAa9B,EAAQ8B,EAAanH,GACxE+F,EAAiBle,EAAG6e,EAAStK,QAAS4J,GAG9C,IAAKxI,EAAM,CACPiJ,EAAYrK,QAAU,KACtBwC,EAAW,SAAA9N,GACP,IAAMoT,EAAkBF,EAAU5H,QAAQxH,KAAK,SAACxE,GAAD,OAAUA,EAAKF,QAAU7B,EAAUtB,OAAS,EAAI+D,IAC/F,MAAO,CAACjJ,EAAGqc,EAAgBrc,EAAGwB,EAAG6a,EAAgB7a,EAAGwU,OAAQ,KAEhE,IAAMnH,EAAWsN,EAAU5H,QAAQrM,IAAI,SAAAjD,GAAI,OAAIA,EAAKmD,KACpDb,EAAST,GAA2B+H,IACpCtH,EAASzB,IAAkC,OAEhD,CAAC+S,YAAY,IArR4B9a,EAwRYC,oBAAU,iBAAO,CACrEgC,EAAG,EACHwB,EAAG,EACHD,QAAS,EACT6a,QAAS,UA5R+Ble,EAAAC,OAAAC,EAAA,EAAAD,CAAAJ,EAAA,GAwRrC2d,EAxRqCxd,EAAA,GAwRfyhB,EAxRezhB,EAAA,GAAAsL,EA+RMC,mBAAwB,MA/R9BC,EAAAvL,OAAAC,EAAA,EAAAD,CAAAqL,EAAA,GA+RrCoW,GA/RqClW,EAAA,GA+RlBmW,GA/RkBnW,EAAA,GAgStCH,GAAYuB,sBAAY,SAAOzC,GAAP,IAAAoG,EAAAqR,EAAAC,EAAA,OAAApY,EAAAlJ,EAAAmJ,MAAA,SAAA2G,GAAA,cAAAA,EAAAzG,KAAAyG,EAAAxG,MAAA,WACtBzF,GAAkC,OAAtBsd,GADU,CAAArR,EAAAxG,KAAA,eAAAwG,EAAA9F,OAAA,wBAE1BlB,EAASzB,IAAmC,IACtC2I,EAAW0N,EAAU5H,QAAQxH,KAAK,SAAA9H,GAAI,OAAIA,EAAKoD,QAAUA,IAC/D6T,GAAgB,GAJU3N,EAAAxG,KAAA,EAAAJ,EAAAlJ,EAAAuJ,MAKpB+O,EAAW,SAAA9N,GACb,OAAIA,IAAMzC,EAAUtB,OAAS,EAAImD,EAAc,CAC3CxG,GAAI,SAAMuO,GAAN,OAAAzI,EAAAlJ,EAAAmJ,MAAA,SAAAwF,GAAA,cAAAA,EAAAtF,KAAAsF,EAAArF,MAAA,cAAAqF,EAAArF,KAAA,EAAAJ,EAAAlJ,EAAAuJ,MACMoI,EAAQ,CAAC7O,QAAS,KADxB,cAAA6L,EAAArF,KAAA,EAAAJ,EAAAlJ,EAAAuJ,MAEMoI,EAAQ,CAACgM,QAAS,UAFxB,wBAAAhP,EAAA1E,YAKD,CAAC7G,IAAI,MAZU,cAc1B0F,EAASzB,GAA2B2I,EAAS3O,SAC7Cgc,EAAoB,CAChB9b,EAAGiK,OAAOK,YAAc,KAAO,MAAQ,OACvC0V,QAAS,EACTjgB,QAAS,EACTyB,EAAG,IAEPwa,EAAkBvN,EAAS3O,QAC3ByH,EAASzB,GAA4BlH,GAAgB4H,EAAUtB,OAAS,EAAImD,GAASzJ,EAAesG,UACpG2a,GAAqBxX,GACfyX,EAAQrR,EAAS3O,OAASmK,OAAOC,YAAc,IAAMD,OAAOC,YAAc,EAAIuE,EAAS3O,OAAS,EAAI,IACpGigB,EAAQxf,EAAQ,EAAKA,EAAQ+b,EAAW,EAzBpB/N,EAAAxG,KAAA,GAAAJ,EAAAlJ,EAAAuJ,MA0BpB+O,EAAW,SAAA9N,GACb,OAAIA,IAAMzC,EAAUtB,OAAS,EAAImD,EAAc,CAACxG,IAAI,GAC7C,CAACL,EAAGse,EAAM9f,EAAG+f,MA5BE,QA8B1BJ,EAAwB,CACpB9d,GAAI,SAAMuO,GAAN,IAAA5O,EAAAxB,EAAA,OAAA2H,EAAAlJ,EAAAmJ,MAAA,SAAA6F,GAAA,cAAAA,EAAA3F,KAAA2F,EAAA1F,MAAA,cACMvG,EAAKoB,WAAwBkd,EAAQ,GAArBA,EAAQ,GACxB9f,EAAK4C,WAAoDrC,EAAQ,EAAI,GAArDA,EAAQ,EAAKA,EAAQ+b,EAAW,EAAI,GAF1D7O,EAAA1F,KAAA,EAAAJ,EAAAlJ,EAAAuJ,MAGMoI,EAAQ,CAAC5O,IAAGxB,IAAGoc,QAAS,QAASlG,WAAW,KAHlD,cAAAzI,EAAA1F,KAAA,EAAAJ,EAAAlJ,EAAAuJ,MAIMoI,EAAQ,CAAC7O,QAAS,EAAG2U,WAAW,KAJtC,wBAAAzI,EAAA/E,aA/BkB,yBAAA6F,EAAA7F,WAsC3B,CAAClC,EAAWwV,EAAmB4D,GAAmBD,EAAyBpY,EAAU+U,EAASha,EAAUyU,EAC3GxW,EAAO2b,EAAiBJ,IAElBH,GAAsB7Q,sBAAY,kBAAAnD,EAAAlJ,EAAAmJ,MAAA,SAAA2H,GAAA,cAAAA,EAAAzH,KAAAyH,EAAAxH,MAAA,cACpCmU,GAAgB,GADoB3M,EAAAxH,KAAA,EAAAJ,EAAAlJ,EAAAuJ,MAE7B2X,EAAwB,CAC3B9d,GAAI,SAAMuO,GAAN,OAAAzI,EAAAlJ,EAAAmJ,MAAA,SAAA0G,GAAA,cAAAA,EAAAxG,KAAAwG,EAAAvG,MAAA,cAAAuG,EAAAvG,KAAA,EAAAJ,EAAAlJ,EAAAuJ,MACMoI,EAAQ,CAAC7O,QAAS,KADxB,cAAA+M,EAAAvG,KAAA,EAAAJ,EAAAlJ,EAAAuJ,MAEMoI,EAAQ,CAACgM,QAAS,UAFxB,wBAAA9N,EAAA5F,cAH4B,cAQpCuT,IACA1U,EAASzB,GAA2BhG,EAAOyU,UAC3CwC,EAAW,SAAA9N,GACP,GAAIA,IAAMzC,EAAUtB,OAAS,EAAI0a,GAAoB,MAAO,CAAC/d,IAAI,GACjE,IAAM4M,EAAW0N,EAAU5H,QAAQxH,KAAK,SAAA9H,GAAI,OAAIA,EAAKoD,QAAUuX,KAC/D,MAAO,CAAC5f,EAAGyO,EAASzO,EAAGwB,EAAGiN,EAASjN,KAbH+N,EAAAxH,KAAA,EAAAJ,EAAAlJ,EAAAuJ,MAe9B8T,EAAoB,CACtB9b,EAAGiK,OAAOK,YAAc,KAAO,OAAS,QACxC0V,QAAS,GACTjgB,QAAS,GACTyB,EAAG,OAnB6B,OAqBpC0a,GAAgB,GAChB3U,EAASzB,GAA4BzG,IACrCwgB,GAAqB,MACrB9I,EAAW,SAAA9N,GACP,OAAIA,IAAMzC,EAAUtB,OAAS,EAAI0a,GAA2B,CAACre,QAAS,EAAG6a,QAAS,SAC3E,CAACva,IAAI,KAEhB0F,EAASzB,IAAmC,IA5BR,yBAAAyJ,EAAA7G,WA6BrC,CAAClC,EAAWyV,EAA0B2D,GAAmBrY,EAAUwP,EAAYmF,EAAiByD,EAC/F7D,IAEJ,OACItd,EAAAC,EAAAC,cAAAF,EAAAC,EAAAkE,SAAA,KACInE,EAAAC,EAAAC,cAACuhB,GAAD,CAAetE,oBAAqBA,GAAqBD,qBAAsBA,IACzD,IAArBlV,EAAUtB,QAAgBsB,EAAU0B,IAAI,SAACK,EAAMU,GAAP,OACrCzK,EAAAC,EAAAC,cAACkd,GAADzd,OAAAsT,OAAA,CACI9S,MAAOmY,EAAQtQ,EAAUtB,OAAS+D,EAAI,IAAQ3G,GAAQnE,OAAA4D,EAAA,EAAA5D,CAAA,GAAQka,EAAQpP,EAAGzC,EAAUtB,OAAS+D,EAAI,IADpG,CAEItH,QAAS,kBAAM4H,GAAUN,IACzB4S,OAAQU,EAAWtD,IAAK1Q,EAAKH,KAC7B5J,EAAAC,EAAAC,cAACwhB,GAAD,CAAU9X,GAAIG,EAAKH,GAAIoS,cAAehU,EAAUtB,OAAS,EAAI+D,GAAKrK,EAAesG,OACvEwV,WAAYA,EAAYD,cAAeA,EAAeE,YAAa1R,IAAM2W,GACzExG,UAAW7Q,EAAKvE,MAAOuW,UAAWhS,EAAKtC,aAMxB/F,KEnL9BigB,GAvOmB,WAE9B,IAAM1iB,EAAiBC,YAAY,SAACC,GAAD,OAAyBA,EAAMC,UAAUC,qBAAqBC,KAC3FwE,EAAW5E,YAAY,SAACC,GAAD,OAAyBA,EAAM0L,SAAS/G,UAAUxE,KACzEgC,EAASpC,YAAY,SAACC,GAAD,OAAyBA,EAAMC,UAAUkC,QAAQhC,KACtEyC,EAAQ7C,YAAY,SAACC,GAAD,OAAyBA,EAAMC,UAAU2C,OAAOzC,KACpE0H,EAAsB9H,YAAY,SAACC,GAAD,OAAyBA,EAAMC,UAAU4H,qBAAqB1H,KAChGyL,EAAY7L,YAAY,SAACC,GAAD,OAAyBA,EAAMC,UAAUgI,gBAAgB9H,KACjF2C,EAAkB/C,YAAY,SAACyI,GAAD,OAAyBA,EAAMvI,UAAU6C,iBAAiB3C,KACxF4E,EAAkBhF,YAAY,SAACyI,GAAD,OAAyBA,EAAMvI,UAAU8E,iBAAiB5E,KACxF+H,EAAsBnI,YAAY,SAACyI,GAAD,OAAyBA,EAAMvI,UAAUiI,qBAAqB/H,KAEhGyJ,EAAW6B,cAEjB7K,oBAAU,WACNgJ,EfgLuC,SAAOA,GAAP,OAAAI,EAAAlJ,EAAAmJ,MAAA,SAAAyI,GAAA,cAAAA,EAAAvI,KAAAuI,EAAAtI,MAAA,cAAAsI,EAAAtI,KAAA,EAAAJ,EAAAlJ,EAAAuJ,MACnBzE,KADmB,UAAA8M,EAAApI,KAE5BtE,KAAKyE,GAFuB,CAAAiI,EAAAtI,KAAA,eAAAsI,EAAAtI,KAAA,EAAAJ,EAAAlJ,EAAAuJ,MAGjCzE,KAHiC,OAK3CgE,EAASF,IAAmB,IALe,wBAAAgJ,EAAA3H,Ye/KvC,IAAImB,GAAY,EACZC,OAAgCxD,EAC9BkE,EAAiB,WACfX,IACAY,aAAaX,GACbA,EAAYG,OAAOpB,WAAW,kBAAMtB,EAASzB,GAA0BkM,EAAYuC,QAAS6L,eAAe,OAInH,OADAnW,OAAOW,iBAAiB,SAAUJ,GAC3B,WACHX,GAAY,EACZI,OAAOY,oBAAoB,SAAUL,KAE1C,CAACjD,IA7BgC,IAAAiC,EA+BYC,mBAAS,CAAC4W,OAAQ,EAAGhP,gBAAiB,IA/BlD3H,EAAAvL,OAAAC,EAAA,EAAAD,CAAAqL,EAAA,GAAA8W,EAAA5W,EAAA,GA+B5B2W,EA/B4BC,EA+B5BD,OAAQhP,EA/BoBiP,EA+BpBjP,gBAAkBkP,EA/BE7W,EAAA,GAAAsN,EAgCNvN,oBAAkB,GAhCZwN,EAAA9Y,OAAAC,EAAA,EAAAD,CAAA6Y,EAAA,GAgC7BzF,EAhC6B0F,EAAA,GAgCpBuJ,EAhCoBvJ,EAAA,GAAAiE,EAiCNzR,oBAAkB,GAjCZ0R,EAAAhd,OAAAC,EAAA,EAAAD,CAAA+c,EAAA,GAiC7B5J,EAjC6B6J,EAAA,GAiCpBsF,EAjCoBtF,EAAA,GAAAuF,EAkCkBjX,oBAAkB,GAlCpCkX,EAAAxiB,OAAAC,EAAA,EAAAD,CAAAuiB,EAAA,GAkC7BE,EAlC6BD,EAAA,GAkCRE,EAlCQF,EAAA,GAoC9B3O,EAAcsC,iBAAuB,MAE3CG,0BAAgB,WACZlN,EAASzB,GAA0BkM,EAAYuC,QAAS6L,eACzD,CAAC7Y,IAxCgC,IAAAxJ,EA0CYC,oBAAU,iBAAO,CAC7DgC,EAAG,SACHggB,QAAS,GACTjgB,QAAS,GACTyB,EAAG,IACHgP,OAAQ,CAAC4N,QAAS,GAAIC,OAAO,MA/CGngB,EAAAC,OAAAC,EAAA,EAAAD,CAAAJ,EAAA,GA0C7BgU,EA1C6B7T,EAAA,GA0CX4d,EA1CW5d,EAAA,GAiDpCK,oBAAU,WACDiH,GAAqBsW,EAAoB,CAC1C9b,EAAGiK,OAAOK,YAAc,KAAO,OAAS,WAE7C,CAAC9E,EAAqBsW,IAGzB,IAAMgF,EAAYxM,iBAAe,GAC3ByM,EAAkBzM,iBAAe,GACjC0M,EAAmB1M,iBAAerK,OAAOK,YAAc,MAAQL,OAAOC,YAAc,EAAI,GACxF+W,EAAe3M,iBAAsB,IA3DPtE,EA6DIhS,oBAAU,iBAAO,CACrDwD,GAAIwf,EAAiBzM,QACrB/C,IAAG,KACH1R,OAAQ,EACRoW,WAAW,KAjEqBjG,EAAA9R,OAAAC,EAAA,EAAAD,CAAA6R,EAAA,GA6D7BkR,EA7D6BjR,EAAA,GA6DTkR,EA7DSlR,EAAA,GAqEpC1R,oBAAU,WACN,IACI6iB,EADEC,EAAsBvhB,GAAcmK,OAAOC,aAAe5H,EAAW7B,EAAkB,IAAMX,EAAS,IAAvE,EAEhCyJ,EAIMU,OAAOK,WAAa,OAASf,GACpC6X,EAAY9e,EAAYxC,EAASmK,OAAOC,YAAczJ,EAAkB,EAAI,EAAIX,EAASmK,OAAOC,YAAczJ,EACvGX,EAASmK,OAAOC,YAAc,EAAI,GAAMpK,EAASA,EAASmK,OAAOC,YAAc,EACtFqW,EAAW,CAACF,OAAQe,EAAW/P,gBAAiBgQ,KAC7CD,EAAYf,GAPfe,EAAY9e,EAAYxC,EAASmK,OAAOC,YAAczJ,EAAkB,EAAI,EAAIX,EAASmK,OAAOC,YAAczJ,EACxGX,EACNygB,EAAW,CAACF,OAAQe,EAAW/P,gBAAiBgQ,KAMpDL,EAAiBzM,QAAUjS,GAAYiH,EAAY,EAAIU,OAAOK,YAAc,MAAQL,OAAOC,YAAc,EAAI,EACxGrE,IACGib,EAAUvM,QAAU6M,GACpBL,EAAgBxM,QAAU,IAAMlD,EAChC8P,EAAU,CAACrhB,SAAQ0B,GAAI4f,EAAYJ,EAAiBzM,QAAS/C,IAAG,GAAAtN,OAAK6c,EAAgBxM,QAArB,SAEhEwM,EAAgBxM,QAAUuM,EAAUvM,QAAU6M,GAAa,IAAM/P,GACjE8P,EAAU,CAACrhB,SAAQ0B,GAAIsf,EAAUvM,QAAUyM,EAAiBzM,QAAS/C,IAAG,GAAAtN,OAAK6c,EAAgBxM,QAArB,SAG3E/O,GAAwBK,GAAqBiW,EAAoB,CAClE9b,EAAGsC,GAAYiH,EAAaU,OAAOK,YAAc,KAAO,MAAQ,OAAWL,OAAOK,YAAc,KAAO,OAAS,QAChH0V,QAAS1d,GAAYiH,EAAY,EAAI,GACrCxJ,QAASuC,GAAYiH,EAAY,EAAI,GACrC/H,EAAGc,GAAYiH,EAAY,EAAI,MAE/BzJ,EAASmK,OAAOC,YAAczJ,EAAiBggB,GAAW,GACpD5a,GAAqB4a,GAAW,IAC3C,CAAC3gB,EAAQS,EAAO+B,EAAU6e,EAAWrF,EAAqBvS,EAAW9I,EAAiB+E,EACrFK,EAAqBwa,EAAQhP,IAGjCiQ,aAAS,SAAA1hB,GAAoB,IAAR4B,EAAQrD,OAAAC,EAAA,EAAAD,CAAAyB,EAAlB2hB,MAAkB,MACpBjQ,IACLwP,EAAUvM,QAAUuM,EAAUvM,QAAU/S,EAAI6e,GAAUS,EAAUvM,QAAU/S,EAAI,EAAIsf,EAAUvM,QAAU/S,EAChGsf,EAAUvM,QAAU/S,GAAK,EAAI,EAAI6e,EACvCU,EAAgBxM,QAAUuM,EAAUvM,QAAU8L,GAAU,IAAMhP,GAC9D8P,EAAU,CACN3f,GAAIsf,EAAUvM,QAAUyM,EAAiBzM,QACzC/C,IAAG,GAAAtN,OAAK6c,EAAgBxM,QAArB,SAER,CAACiN,UAAWvX,SACfuI,aAAQ,SAAAC,GAA+C,IAAnCjR,EAAmCrD,OAAAC,EAAA,EAAAD,CAAAsU,EAA7C8O,MAA6C,MAA/BnC,EAA+B3M,EAA/B2M,OAAkBqC,EAAatjB,OAAAC,EAAA,EAAAD,CAAAsU,EAAvBiP,MAAuB,MAGnD,GAFI9e,YAAYpB,EAAI,GAAoC,OAA/BmgB,SAASC,mBAA4BD,SAASE,gBAAgBC,oBACnFlf,YAAYpB,EAAI,GAAoC,OAA/BmgB,SAASC,mBAA4BD,SAASI,iBAClEzQ,IAAa1O,YAAaF,GAA/B,CACA,GAAe,IAAX+e,EAAc,CACd,IAAMO,GAAkB/X,OAAOC,YAAczJ,GAAmBghB,EAChEX,EAAUvM,QAAUuM,EAAUvM,QAAUyN,EAAiB3B,GAAUS,EAAUvM,QAAUyN,EAAiB,EACpGlB,EAAUvM,QAAUyN,EAAiBlB,EAAUvM,QAAUyN,GAAkB,EAAI,EAAI3B,EAE3F,GAAIjB,EAAQ,CACR,IAAM6C,GAAQzgB,EACdsf,EAAUvM,QAAUuM,EAAUvM,QAAU0N,EAAO5B,GAAUS,EAAUvM,QAAU0N,EAAO,EAAInB,EAAUvM,QAAU0N,EACtGnB,EAAUvM,QAAU0N,GAAQ,EAAI,EAAI5B,EAE9CU,EAAgBxM,QAAUuM,EAAUvM,QAAU8L,GAAU,IAAMhP,GAC9D8P,EAAU,CACN3f,GAAIsf,EAAUvM,QAAUyM,EAAiBzM,QACzC/C,IAAG,GAAAtN,OAAK6c,EAAgBxM,QAArB,SAER,CAACiN,UAAWvX,OAAQ4O,YAAY,EAAMqJ,aAAc,CAACC,SAAS,KAGjE,IAAM/Q,EAAuBoB,aAAQ,SAAAM,GAAwC,IAA5BtR,EAA4BrD,OAAAC,EAAA,EAAAD,CAAA2U,EAAtCyO,MAAsC,MAAxB5O,EAAwBG,EAAxBH,MAAO0M,EAAiBvM,EAAjBuM,MAAO1J,EAAU7C,EAAV6C,KAC1D,OAALhD,QAAK,IAALA,KAAOC,kBACHyM,GAAOmB,GAAW,GACtB,IAAM4B,EAAO5gB,GAAKc,EAAW2H,OAAOC,YAAczJ,EAAkBwJ,OAAOC,aAAe,IAC1F6W,EAAgBxM,QAAUwM,EAAgBxM,QAAU6N,EAAO,GAAKrB,EAAgBxM,QAAU6N,EAAO,IAAM/Q,EACnG0P,EAAgBxM,QAAU6N,EAAOrB,EAAgBxM,QAAU6N,GAAQ,EAAI,EAAI,IAAM/Q,EACrFyP,EAAUvM,QAAU8L,EAASU,EAAgBxM,SAAW,IAAMlD,GAC9D8P,EAAU,CACN3f,GAAIsf,EAAUvM,QAAUyM,EAAiBzM,QACzC/C,IAAG,GAAAtN,OAAK6c,EAAgBxM,QAArB,KACH2B,UAAW,SAAC3F,GAAD,MAAmB,QAATA,KAEpBoF,GAAM6K,GAAW,KAGpBzE,EAAuBjR,sBAAY,SAACuX,GACpB,WAAdA,GAA0BvB,EAAUvM,QAAU8L,IAC9CS,EAAUvM,QAAUuM,EAAUvM,QAAU,EAAI8L,EAASS,EAAUvM,QAAU,EAAI8L,EAC7EU,EAAgBxM,QAAUuM,EAAUvM,QAAU8L,GAAU,IAAMhP,GAC9D8P,EAAU,CACN3f,GAAIsf,EAAUvM,QACd/C,IAAG,GAAAtN,OAAK6c,EAAgBxM,QAArB,QAGO,QAAd8N,GAAuBvB,EAAUvM,QAAU,IAC3CuM,EAAUvM,QAAUuM,EAAUvM,QAAU,EAAI,EAAIuM,EAAUvM,QAAU,EAAI,EACxEwM,EAAgBxM,QAAUuM,EAAUvM,QAAU8L,GAAU,IAAMhP,GAC9D8P,EAAU,CACN3f,GAAIsf,EAAUvM,QACd/C,IAAG,GAAAtN,OAAK6c,EAAgBxM,QAArB,SAGZ,CAAC8L,EAAQhP,EAAiB8P,IAEvBnF,EAAoBlR,sBAAY,SAACwX,GACnC,IAAMlB,EAAYkB,EAAgBrY,OAAOC,YAAc,IACnDoY,GAAiBrY,OAAOC,YAAc,KAAO,EACjD,GAAIkX,EAAY,EAAG,CACfH,EAAa1M,QAAU,CAACuM,EAAUvM,QAASwM,EAAgBxM,QAAS8L,EAAQhP,GAC5E,IAAMgQ,GAAsBpX,OAAOC,YAAc,KAAOoY,EAAgB,IACxE/B,EAAW,CAACF,OAAQe,EAAW/P,gBAAiBgQ,IAChDP,EAAUvM,QAAU,EACpBwM,EAAgBxM,QAAU,EAC1B4M,EAAU,CACN3f,EAAG,EACHgQ,IAAG,GAAAtN,OAAK,EAAL,OAEPuc,GAAW,GAEG,IAAdW,IACAH,EAAa1M,QAAU,CAACuM,EAAUvM,QAASwM,EAAgBxM,QAAS8L,EAAQhP,GAC5EkP,EAAW,CAACF,OAAQ,EAAGhP,gBAAiB,IACxCyP,EAAUvM,QAAU,EACpBwM,EAAgBxM,QAAU,EAC1B4M,EAAU,CACN3f,EAAG,EACHgQ,IAAG,GAAAtN,OAAK,EAAL,QAGX2c,GAAuB,IACxB,CAACR,EAAQhP,EAAiB8P,IAEvBlF,EAA2BnR,sBAAY,WACL,IAAhCmW,EAAa1M,QAAQrP,SACrB4b,EAAUvM,QAAU0M,EAAa1M,QAAQ,GACzCwM,EAAgBxM,QAAU0M,EAAa1M,QAAQ,GAC/CgM,EAAW,CAACF,OAAQY,EAAa1M,QAAQ,GAAIlD,gBAAiB4P,EAAa1M,QAAQ,KACnFyM,EAAiBzM,QAAUtK,OAAOK,YAAc,MAAQL,OAAOC,YAAc,EAAI,EACjFiX,EAAU,CACN3f,GAAIyf,EAAa1M,QAAQ,GAAKyM,EAAiBzM,QAC/C/C,IAAG,GAAAtN,OAAK+c,EAAa1M,QAAQ,GAA1B,QAGXsM,GAAuB,IACxB,CAACM,IAEEjF,GAAkBpR,sBAAY,SAACyX,GAAD,OAAyB9B,EAAW8B,IAAa,IAErF,OACI/jB,EAAAC,EAAAC,cAAAF,EAAAC,EAAAkE,SAAA,KACInE,EAAAC,EAAAC,cAAC8jB,GAAD,CAAmB1iB,OAAQohB,EAAmBphB,OAAQwR,QAASA,EAAS/H,UAAWqX,EAChEte,SAAUA,EACVd,EAAG0f,EAAmB1f,EAAGf,gBAAiBA,EAAiBuR,YAAaA,EACxED,iBAAkBA,GACjCvT,EAAAC,EAAAC,cAAC+jB,GAAD,CAAmB3G,oBAAqBA,EAAqBC,qBAAsBA,EACjEC,kBAAmBA,EACnBC,yBAA0BA,EAC1BC,gBAAiBA,MAEvC1d,EAAAC,EAAAC,cAACgkB,GAAD,CAAW7iB,QAASpC,EAAgB6T,QAASA,EAAShP,SAAUA,EACrD7B,gBAAiBA,EAAiB8Q,QAASA,EAASC,IAAK0P,EAAmB1P,IAC5EJ,qBAAsBA,EAAsBC,gBAAiBA,odCrOpFxU,IAAQC,IAAIC,IAAKC,KAEjB,IAAM2lB,GAAeC,YAAHC,MAsBZC,GAAU5lB,IAAOE,IAAVC,WAAA,CAAAC,YAAA,eAAAC,YAAA,eAAGL,CAAH,8DA2BE6lB,GApBO,WAQlB,OANAxkB,oBAAU,WACN,IAAMykB,EAAiB,kBAAMrB,SAASsB,SAASC,UAE/C,OADAjZ,OAAOW,iBAAiB,oBAAqBoY,GACtC,kBAAM/Y,OAAOY,oBAAoB,oBAAqBmY,KAC9D,IAGCxkB,EAAAC,EAAAC,cAAAF,EAAAC,EAAAkE,SAAA,KACInE,EAAAC,EAAAC,cAACikB,GAAD,MACAnkB,EAAAC,EAAAC,cAACykB,EAAD,MACA3kB,EAAAC,EAAAC,cAACokB,GAAD,KACItkB,EAAAC,EAAAC,cAAC0kB,GAAD,MACA5kB,EAAAC,EAAAC,cAAC2kB,GAAD,oCChDVC,GAAcC,2BAAgB,CAChCla,SAAUP,GACVlL,UAAWwI,KAWAzI,GAFD6lB,uBAAYF,GAAaG,+BAAoBC,2BAAgBC,QCJrEC,GAAOjC,SAASkC,eAAe,QAErCC,IAASC,oBAAoBH,IAAMI,OAAQxlB,EAAAC,EAAAC,cAACulB,EAAA,EAAD,CAAUtmB,MAAOA,IACxDa,EAAAC,EAAAC,cAACwlB,GAAD","file":"static/js/main.e1717d81.chunk.js","sourcesContent":["import React, {useEffect} from \"react\";\r\nimport {shallowEqual, useSelector} from 'react-redux';\r\nimport {AppStateType} from \"../../redux/store\";\r\nimport styled from \"styled-components/macro\";\r\nimport {animated, useSpring} from \"react-spring\";\r\nimport {library} from \"@fortawesome/fontawesome-svg-core\";\r\nimport {far} from \"@fortawesome/free-regular-svg-icons\";\r\nimport {fas} from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nlibrary.add(far, fas);\r\n\r\n\r\nconst Background = styled(animated.div)` \r\n  position: fixed;\r\n  width: 100vw;\r\n  height: 100vh;\r\n`;\r\n\r\nconst AnimatedBackground:React.FC = () => {\r\n\r\n    const currentPalette = useSelector((store: AppStateType) => store.interface.currentPaletteIndex, shallowEqual);\r\n\r\n    const [animateBackground, setBackground] = useSpring(() => ({\r\n        background: currentPalette.background\r\n    }));\r\n\r\n    useEffect(() => {\r\n        setBackground({background: currentPalette.background})\r\n    }, [currentPalette, setBackground])\r\n\r\n    return <Background style={animateBackground}/>\r\n}\r\n\r\nexport default AnimatedBackground;\r\n\r\n","\r\nexport const neumorphColors: Array<NeumorphColorsType> = [\r\n    {\r\n        background: '#F9DCC4',\r\n        concaveBackground: 'linear-gradient(145deg, #e0c6b0, #ffebd2)',\r\n        shadows: '14px 14px 35px #c2ac99, -14px -14px 35px #ffffef',\r\n        innerShadows: 'inset 14px 14px 35px #c2ac99, inset -14px -14px 35px #ffffef',\r\n        littleShadows: '5px 5px 10px #c2ac99, -5px -5px 10px #ffffef',\r\n        innerLittleShadows: 'inset 5px 5px 10px #c2ac99, inset -5px -5px 10px #ffffef',\r\n        progressBarColor: '#ffffef',\r\n        progressBarHoverColor: '#c2ac99',\r\n        color: '#141718'\r\n    },\r\n    {\r\n        background: '#F8EDEB',\r\n        concaveBackground: 'linear-gradient(145deg, #dfd5d4, #fffefb)',\r\n        shadows: '14px 14px 35px #c1b9b7, -14px -14px 35px #ffffff',\r\n        innerShadows: 'inset 14px 14px 35px #c1b9b7, inset -14px -14px 35px #ffffff',\r\n        littleShadows: '5px 5px 10px #c1b9b7, -5px -5px 10px #ffffff',\r\n        innerLittleShadows: 'inset 5px 5px 10px #c1b9b7, inset -5px -5px 10px #ffffff',\r\n        progressBarColor: '#ffffff',\r\n        progressBarHoverColor: '#c1b9b7',\r\n        color: '#141718'\r\n    },\r\n    {\r\n        background: '#FCD5CE',\r\n        concaveBackground: 'linear-gradient(145deg, #e3c0b9, #ffe4dc)',\r\n        shadows: '14px 14px 35px #c5a6a1, -14px -14px 35px #fffffb',\r\n        innerShadows: 'inset 14px 14px 35px #c5a6a1, inset -14px -14px 35px #fffffb',\r\n        littleShadows: '5px 5px 10px #c5a6a1, -5px -5px 10px #fffffb',\r\n        innerLittleShadows: 'inset 5px 5px 10px #c5a6a1, inset -5px -5px 10px #fffffb',\r\n        progressBarColor: '#fffffb',\r\n        progressBarHoverColor: '#c5a6a1',\r\n        color: '#141718'\r\n    },\r\n    {\r\n        background: '#FFB5A7',\r\n        concaveBackground: 'linear-gradient(145deg, #e6a396, #ffc2b3)',\r\n        shadows: '14px 14px 35px #c78d82, -14px -14px 35px #ffddcc',\r\n        innerShadows: 'inset 14px 14px 35px #c78d82, inset -14px -14px 35px #ffddcc',\r\n        littleShadows: '5px 5px 10px #c78d82, -5px -5px 10px #ffddcc',\r\n        innerLittleShadows: 'inset 5px 5px 10px #c78d82, inset -5px -5px 10px #ffddcc',\r\n        progressBarColor: '#ffddcc',\r\n        progressBarHoverColor: '#c78d82',\r\n        color: '#141718'\r\n    }\r\n];\r\n\r\nexport const defaultPalette: NeumorphColorsType = {\r\n    background: '#EAE8DE',\r\n    concaveBackground: ' linear-gradient(145deg, #d3d1c8, #faf8ee)',\r\n    shadows: '14px 14px 35px #b9b7af, -14px -14px 35px #ffffff',\r\n    innerShadows: 'inset 14px 14px 35px #b9b7af, inset -14px -14px 35px #ffffff',\r\n    littleShadows: '5px 5px 10px #b9b7af, -5px -5px 10px #ffffff',\r\n    color: '#141718',\r\n    innerLittleShadows: 'inset 5px 5px 10px #b9b7af, inset -5px -5px 10px #ffffff',\r\n    progressBarColor: '#ffffff',\r\n    progressBarHoverColor: '#b9b7af',\r\n    default: true\r\n};\r\n\r\nexport type NeumorphColorsType = {\r\n    background: string,\r\n    concaveBackground: string,\r\n    shadows: string,\r\n    innerShadows: string,\r\n    littleShadows: string,\r\n    innerLittleShadows: string,\r\n    progressBarColor: string,\r\n    progressBarHoverColor: string,\r\n    color: string,\r\n    default?: boolean\r\n};","import React from \"react\";\r\nimport styled from \"styled-components/macro\";\r\nimport {animated, SpringValue} from \"react-spring\";\r\nimport {defaultPalette, NeumorphColorsType} from \"../neumorphColors\";\r\nimport isEqual from \"react-fast-compare\";\r\n\r\nconst Background = styled(animated.div)<{ $palette: NeumorphColorsType }>`\r\n   position: absolute;\r\n   z-index: 998;\r\n   background-color: ${props => props.$palette.default ? defaultPalette.background : props.$palette.background};\r\n   width: 300%;\r\n   transform-origin: 50% 0;\r\n   left: -150%;\r\n   transition: background-color 0.3s cubic-bezier(0.25, 0, 0, 1);\r\n   box-shadow: ${props => props.$palette.default ? defaultPalette.shadows : props.$palette.shadows};\r\n`;\r\n\r\nconst InnerShadow = styled.div<{ $palette: NeumorphColorsType }>`\r\n  position: absolute;\r\n  bottom: 10px;\r\n  width: 100%;\r\n  height: calc(100% - 10px);\r\n  box-shadow: ${props => props.$palette.default ? defaultPalette.innerShadows : props.$palette.innerShadows};\r\n`;\r\n\r\ntype PropsType = {\r\n    palette: NeumorphColorsType,\r\n    height:  SpringValue<number>,\r\n    rotateZ:  SpringValue<number>,\r\n    x: SpringValue<string>\r\n}\r\n\r\nconst RotatedBackground: React.FC<PropsType> = ({palette, height, rotateZ, x}) => {\r\n\r\n    return(\r\n        <Background $palette={palette} style={{height, rotateZ, x}}>\r\n            <InnerShadow $palette={palette}/>\r\n        </Background>\r\n    )\r\n}\r\n\r\nexport default React.memo(RotatedBackground, isEqual)","import React from \"react\";\r\nimport styled from \"styled-components/macro\";\r\nimport {animated, SpringValue} from \"react-spring\";\r\n\r\nconst WholeWrapper = styled(animated.div)`\r\n  position: absolute;\r\n  font-family: 'Made Evolve Sans Light', sans-serif;\r\n  box-sizing: border-box;\r\n  display: grid;\r\n  place-items: center;\r\n  z-index: 999;\r\n`;\r\n\r\nconst ButtonsWrapper = styled.div<{$height: number}>`\r\n  position: absolute;\r\n  width: ${props => props.$height * 0.8}px;\r\n  height: ${props => props.$height * 0.8}px;\r\n  border-radius:30px;\r\n  display: grid;\r\n  place-items: center;\r\n`;\r\n\r\ntype PropsType = {\r\n    width: SpringValue<number>,\r\n    height: SpringValue<number>,\r\n    interfaceHeight: number,\r\n    x: SpringValue<string>\r\n}\r\n\r\nconst InterfaceWrapper: React.FC<PropsType> = ({width, height, children,\r\n                                               interfaceHeight, x}) => {\r\n\r\n    return(\r\n        <WholeWrapper style={{width, height, x}}>\r\n            <ButtonsWrapper $height={interfaceHeight}>\r\n                {children}\r\n            </ButtonsWrapper>\r\n        </WholeWrapper>\r\n    )\r\n}\r\n\r\nexport default InterfaceWrapper","import React from \"react\";\r\nimport styled from \"styled-components/macro\";\r\nimport {defaultPalette, NeumorphColorsType} from \"../neumorphColors\";\r\nimport {animated, SpringValue, useTransition} from \"react-spring\";\r\nimport isEqual from \"react-fast-compare\";\r\n\r\nconst EditButtonWrapper = styled.div<{ $palette: NeumorphColorsType, $height: number }>`\r\n  position: relative;\r\n  z-index: 3;\r\n  width: ${props => props.$height * 0.8}px;\r\n  height: ${props => props.$height * 0.8}px;\r\n  border-radius: 30px;\r\n  box-shadow: ${props => props.$palette.default ? defaultPalette.shadows : props.$palette.shadows} ;\r\n  background: ${props => props.$palette.default ? defaultPalette.background : props.$palette.background};\r\n`;\r\n\r\nconst ProgressBackground = styled(animated.div)`\r\n  position: absolute;\r\n  width: 100%;\r\n  border-radius: 30px;\r\n  top: 0;\r\n  background-color: red;\r\n`;\r\n\r\nconst InnerBackground = styled.div<{ $palette: NeumorphColorsType, $cantBeHovered: boolean }>`\r\n  cursor: ${props => props.$cantBeHovered ? 'inherit' : 'pointer'};\r\n  width: 90%;\r\n  height: 90%;\r\n  top: 5%;\r\n  left: 5%;\r\n  position: absolute;\r\n  background-color: ${props => props.$palette.default ? defaultPalette.background : props.$palette.background};\r\n  color: ${props => props.$palette.default ? defaultPalette.color : props.$palette.color};\r\n  display: grid;\r\n  place-items: center;\r\n  border-radius: 30px;\r\n  &:before {\r\n    border-radius: 25px;\r\n    content: \"\";\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translateY(-50%) translateX(-50%);\r\n    z-index: 1;\r\n    width: calc(100% - 6px);\r\n    height: calc(100% - 6px);\r\n    box-shadow: ${props => props.$palette.innerShadows};\r\n    opacity: 0;\r\n    transition: opacity .3s linear;\r\n  }\r\n  ${props => !props.$cantBeHovered && `&:hover:before {opacity: 1}`}\r\n`;\r\n\r\n//calc([minimum size] + ([maximum size] - [minimum size]) * ((100vw - [minimum viewport width]) / ([maximum viewport width] - [minimum viewport width])));\r\nconst InnerEditButtonText = styled(animated.div)`\r\n  z-index: 12;\r\n  text-align: center;\r\n  position: absolute;\r\n  overflow: hidden;\r\n  top: 50%;\r\n  font-size: calc(20px + (35 - 20) * ((100vw - 300px) / (2000 - 300)));\r\n`;\r\n\r\nconst ProgressCounter = styled(animated.div)`\r\n  font-size: calc(12px + (25 - 12) * ((100vw - 300px) / (2000 - 300)));\r\n  text-align: center;\r\n  position: absolute;\r\n  bottom: 10%;\r\n  border-radius: 30px;\r\n`;\r\n\r\ntype PropsType = {\r\n    switchEditMode: () => void,\r\n    palette: NeumorphColorsType,\r\n    cantBeHovered: boolean,\r\n    actionMessage: string,\r\n    progressBarAnimation: { value: SpringValue<number>, height: SpringValue<string>, opacity: SpringValue<number> },\r\n    interfaceHeight: number\r\n}\r\n\r\nconst EditButton: React.FC<PropsType> = ({\r\n                                             switchEditMode, palette, cantBeHovered, actionMessage,\r\n                                             progressBarAnimation, interfaceHeight\r\n                                         }) => {\r\n\r\n    const textTransition = useTransition(actionMessage, {\r\n        from: {opacity: 1, y: '-100%'},\r\n        enter: {opacity: 1, y: '0%'},\r\n        leave: {opacity: 0, y: '100%'},\r\n    })\r\n\r\n    return (\r\n        <EditButtonWrapper onClick={switchEditMode} $palette={palette} $height={interfaceHeight}>\r\n            <InnerBackground $palette={palette}\r\n                             $cantBeHovered={cantBeHovered}>\r\n                <ProgressBackground style={{\r\n                    height: progressBarAnimation.height,\r\n                    opacity: progressBarAnimation.opacity\r\n                }}/>\r\n                <ProgressCounter style={{opacity: progressBarAnimation.opacity}}>\r\n                    {progressBarAnimation.value.to(value => value.toFixed(0) + ' %')}\r\n                </ProgressCounter>\r\n                {textTransition((style) =>\r\n                    <InnerEditButtonText style={{...style, translateY: '-50%'}}>\r\n                        {actionMessage}\r\n                    </InnerEditButtonText>)}\r\n            </InnerBackground>\r\n        </EditButtonWrapper>\r\n    )\r\n}\r\n\r\nexport default React.memo(EditButton, isEqual)","import React from \"react\";\r\nimport styled from \"styled-components/macro\";\r\nimport {defaultPalette, NeumorphColorsType} from \"../neumorphColors\";\r\nimport isEqual from \"react-fast-compare\";\r\nimport {isMobile} from \"react-device-detect\";\r\n\r\nconst RightButton = styled.div<{ $palette: NeumorphColorsType, $editable: boolean, $height: number }>`\r\n  cursor: pointer;\r\n  position: absolute;\r\n  z-index: 1;\r\n  width: ${props => props.$height * 0.5}px;\r\n  height: ${props => props.$height * 0.5}px;\r\n  border-radius: 30px;\r\n  display: grid;\r\n  place-items: center;\r\n  box-shadow: ${props => props.$palette.default ? defaultPalette.littleShadows : props.$palette.littleShadows};\r\n  background: ${props => props.$palette.default ? defaultPalette.background : props.$palette.background};\r\n  color: ${props => props.$palette.color};\r\n  transform: translate(-50%, -50%);\r\n  top: 50%;\r\n  left: ${props => props.$editable ? '150%' : '50%'};\r\n  transition: left 0.4s cubic-bezier(0.25, 0, 0, 1) 0.3s, background, color 0.4s cubic-bezier(0.25, 0, 0, 1);\r\n  &:hover {\r\n    background: ${props => props.$palette.default ? defaultPalette.background : props.$palette.background};\r\n    color: ${props => props.$palette.default ? defaultPalette.color : props.$palette.color};\r\n  };\r\n  &:before {\r\n    border-radius: 25px;\r\n    content: \"\";\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translateY(-50%) translateX(-50%);\r\n    z-index: 1;\r\n    width: calc(100% - 6px);\r\n    height: calc(100% - 6px);\r\n    box-shadow: ${props => props.$palette.innerLittleShadows};\r\n    opacity: 0;\r\n    transition: opacity .3s linear;\r\n  }\r\n  &:hover:before {opacity: 1}\r\n`;\r\n\r\nconst LeftButton = styled(RightButton)`\r\n  left: ${props => props.$editable ? '-50%' : '50%'};\r\n`;\r\n\r\nconst AdditionalButton = styled(RightButton)`\r\n  left: ${props => props.$editable ? '-150%' : '50%'};\r\n`;\r\n\r\nconst InnerSmallerButtonText = styled.div`\r\n  text-align: center;\r\n  font-size: calc(15px + (25 - 15) * ((100vw - 300px) / (2000 - 300)));\r\n`;\r\n\r\ntype PropsType = {\r\n    palette: NeumorphColorsType,\r\n    editable: boolean,\r\n    addTodoList: () => void,\r\n    rejectAllChanges: () => void,\r\n    interfaceHeight: number,\r\n    switchScrollableState: () => void,\r\n    scrollableState: boolean\r\n}\r\n\r\nconst OtherButtons: React.FC<PropsType> = ({palette, editable, switchScrollableState,\r\n                                               interfaceHeight, addTodoList, rejectAllChanges, scrollableState}) => {\r\n\r\n    return (\r\n        <>\r\n            <LeftButton onClick={addTodoList} $palette={palette} $editable={editable} $height={interfaceHeight}>\r\n                <InnerSmallerButtonText>\r\n                    Add list\r\n                </InnerSmallerButtonText>\r\n            </LeftButton>\r\n            <RightButton onClick={rejectAllChanges} $palette={palette} $editable={editable} $height={interfaceHeight}>\r\n                <InnerSmallerButtonText>\r\n                    remove changes\r\n                </InnerSmallerButtonText>\r\n            </RightButton>\r\n            {isMobile &&\r\n                <AdditionalButton onClick={switchScrollableState} $palette={palette} $editable={editable} $height={interfaceHeight}>\r\n                    {scrollableState ? 'Drug' : 'Scroll'}\r\n                </AdditionalButton>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default React.memo(OtherButtons, isEqual)","import axios from \"axios\";\r\nimport {TaskType, TodoListType} from \"./entities\";\r\nimport axiosRetry from \"axios-retry\";\r\n\r\nconst instance = axios.create({\r\n    baseURL: \"https://social-network.samuraijs.com/api/1.1/todo-lists\",\r\n    withCredentials: true,\r\n    headers: {\r\n        'API-KEY': 'b4801660-f864-43f9-8acc-579713cc64df'\r\n    },\r\n});\r\naxiosRetry(instance, { retries: 4 });\r\n\r\nconst loginInstance = axios.create({\r\n    baseURL: \"https://social-network.samuraijs.com/api/1.1/auth\",\r\n    withCredentials: true,\r\n    headers: {\r\n        'API-KEY': 'b4801660-f864-43f9-8acc-579713cc64df'\r\n    }\r\n});\r\naxiosRetry(loginInstance, { retries: 4 });\r\n\r\ntype CommonResponseType<T> = {\r\n    resultCode: number;\r\n    messages: string[];\r\n    data: T\r\n};\r\ntype RestoreTasksResponseType = {\r\n    items: TaskType[];\r\n    totalCount: number;\r\n    error?: string\r\n};\r\ntype GetMeType = {\r\n    id: number,\r\n    email: string,\r\n    login: string\r\n};\r\n\r\nexport const api = {\r\n    getAuthState: () => {\r\n        return loginInstance.get<CommonResponseType<GetMeType>>('/me').then(res => res.data)\r\n    },\r\n    logIn: () => {\r\n        const requestObject = {email: \"npikolist@gmail.com\", password: \"512347\", rememberMe: false};\r\n        return loginInstance.post<CommonResponseType<{ userId: string }>>('/login', requestObject)\r\n            .then(res => res.data)\r\n    },\r\n    restoreState: () => {\r\n        return instance.get<Array<TodoListType>>('').then(res => res.data)\r\n    },\r\n    addTodoList: (title: string) => {\r\n        return instance.post<CommonResponseType<{ item: TodoListType }>>(\"\", {title}).then(res => res.data)\r\n    },\r\n    restoreTasks: (todoListId: string) => {\r\n        return instance.get<RestoreTasksResponseType>(`/${todoListId}/tasks`).then(res => res.data)\r\n    },\r\n    addTask: (title: string, todoListId: string) => {\r\n        return instance.post<CommonResponseType<{ item: TaskType }>>(`/${todoListId}/tasks`, {title})\r\n            .then(res => res.data)\r\n    },\r\n    changeTask: (todoListId: string, taskId: string, newTask: TaskType) => {\r\n        return instance.put<CommonResponseType<{ item: TaskType }>>(`/${todoListId}/tasks/${taskId}`, newTask)\r\n            .then(res => res.data)\r\n    },\r\n    deleteTodoList: (todoListId: string) => {\r\n        return instance.delete<CommonResponseType<{}>>(`/${todoListId}`).then(res => res.data)\r\n    },\r\n    deleteTask: (todoListId: string, taskId: string) => {\r\n        return instance.delete<CommonResponseType<{ item: TaskType }>>(`/${todoListId}/tasks/${taskId}`)\r\n            .then(res => res.data)\r\n    },\r\n    changeTodoListTitle: (todoListId: string, newTitle: string) => {\r\n        return instance.put<CommonResponseType<TodoListType>>(`/${todoListId}`, {title: newTitle})\r\n            .then(res => res.data)\r\n    },\r\n    swapTasks: (todoListId: string, swappedTask: string, beforeSwappedTask: string | null) => {\r\n        return instance.put<CommonResponseType<{}>>(`/${todoListId}/tasks/${swappedTask}/reorder`, {putAfterItemId: beforeSwappedTask})\r\n            .then(res => res.data)\r\n    },\r\n    swapTodoList: (swappedList: string, beforeSwappedList: string | null) => {\r\n        return instance.put<CommonResponseType<{}>>(`/${swappedList}/reorder`, {putAfterItemId: beforeSwappedList})\r\n            .then(res => res.data)\r\n    }\r\n};\r\n","export const movePos  = (array: Array<any>, moveIndex: number, toIndex: number) => {\r\n    /* #move - Moves an array item from one position in an array to another.\r\n\r\n       Note: This is a pure function so a new array will be returned, instead\r\n       of altering the array argument.\r\n\r\n      Arguments:\r\n      1. array     (String) : Array in which to move an item.         (required)\r\n      2. moveIndex (Object) : The index of the item to move.          (required)\r\n      3. toIndex   (Object) : The index to move item at moveIndex to. (required)\r\n    */\r\n    let item = array[moveIndex];\r\n    let length = array.length;\r\n    let diff = moveIndex - toIndex;\r\n\r\n    if (diff > 0) {\r\n        // move left\r\n        return [\r\n            ...array.slice(0, toIndex),\r\n            item,\r\n            ...array.slice(toIndex, moveIndex),\r\n            ...array.slice(moveIndex + 1, length)\r\n        ];\r\n    } else if (diff < 0) {\r\n        // move right\r\n        return [\r\n            ...array.slice(0, moveIndex),\r\n            ...array.slice(moveIndex + 1, toIndex + 1),\r\n            item,\r\n            ...array.slice(toIndex + 1, length)\r\n        ];\r\n    }\r\n    return array;\r\n}","import {InferActionTypes} from \"./store\";\r\nimport {defaultPalette, NeumorphColorsType} from \"../Components/neumorphColors\";\r\n\r\ntype InitialStateType = {\r\n    focusedStatus: boolean,\r\n    currentPaletteIndex: NeumorphColorsType,\r\n    initialLoadingState: boolean,\r\n    fetchingState: null | string,\r\n    height: number,\r\n    width: number,\r\n    interfaceHeight: number,\r\n    allTasks: number,\r\n    completedTasks: number,\r\n    closeLookState: boolean,\r\n    scrollableState: boolean,\r\n    animationInProgress: boolean\r\n};\r\n\r\nconst initialState = {\r\n    focusedStatus: false,\r\n    currentPaletteIndex: defaultPalette,\r\n    initialLoadingState: true,\r\n    fetchingState: null,\r\n    height: 0,\r\n    width: 0,\r\n    interfaceHeight: 0,\r\n    allTasks: 0,\r\n    completedTasks: 0,\r\n    closeLookState: false,\r\n    scrollableState: true,\r\n    animationInProgress: false\r\n};\r\n\r\nconst interfaceReducer = (state: InitialStateType = initialState, action: InterfaceActionsTypes): InitialStateType => {\r\n    switch (action.type) {\r\n        case \"interfaceReducer/SET_FOCUSED_STATUS\":\r\n            return {\r\n                ...state,\r\n                focusedStatus: action.status\r\n            };\r\n        case \"interfaceReducer/SET_CURRENT_PALETTE_INDEX\":\r\n            return {\r\n                ...state,\r\n                currentPaletteIndex: action.palette\r\n            }\r\n        case \"interfaceReducer/COMPLETE_INITIAL_LOADING_STATE\":\r\n            return {\r\n                ...state,\r\n                initialLoadingState: false\r\n            }\r\n        case \"interfaceReducer/SET_HEIGHT\":\r\n            return {\r\n                ...state,\r\n                height: action.height\r\n            }\r\n        case \"interfaceReducer/SET_WIDTH\":\r\n            return {\r\n                ...state,\r\n                width: action.width\r\n            }\r\n        case \"interfaceReducer/SET_INTERFACE_HEIGHT\":\r\n            return {\r\n                ...state,\r\n                interfaceHeight: action.height\r\n            }\r\n        case \"interfaceReducer/SET_ALL_TASKS\":\r\n            return {\r\n                ...state,\r\n                allTasks: action.tasks\r\n            }\r\n        case \"interfaceReducer/SET_COMPLETED_TASK\":\r\n            return {\r\n                ...state,\r\n                completedTasks: action.restore ? 0 : state.completedTasks+1\r\n            }\r\n        case \"interfaceReducer/SET_CLOSE_LOOK_STATE\":\r\n            return {\r\n                ...state,\r\n                closeLookState: action.state,\r\n                animationInProgress: action.state\r\n            }\r\n        case \"interfaceReducer/SET_SCROLLABLE_STATE\":\r\n            return {\r\n                ...state,\r\n                scrollableState: action.state\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const interfaceActions = {\r\n    setFocusedStatus: (status: boolean) => ({type: 'interfaceReducer/SET_FOCUSED_STATUS', status} as const),\r\n    setPalette: (palette: NeumorphColorsType) => ({type: 'interfaceReducer/SET_CURRENT_PALETTE_INDEX', palette} as const),\r\n    completeInitialLoadingState: () => ({type: 'interfaceReducer/COMPLETE_INITIAL_LOADING_STATE'} as const),\r\n    setHeight: (height: number) => ({type: 'interfaceReducer/SET_HEIGHT', height} as const),\r\n    setWidth: (width: number) => ({type: 'interfaceReducer/SET_WIDTH', width} as const),\r\n    setInterfaceHeight: (height: number) => ({type: 'interfaceReducer/SET_INTERFACE_HEIGHT', height} as const),\r\n    setAllTasks: (tasks: number) => ({type: 'interfaceReducer/SET_ALL_TASKS', tasks} as const),\r\n    setCompletedTask: (restore: boolean) => ({type: 'interfaceReducer/SET_COMPLETED_TASK', restore} as const),\r\n    setFetchingState: (state: string | null) => ({type: 'interfaceReducer/SET_FETCHING_STATE', state} as const),\r\n    setCloseLookState: (state: boolean) => ({type: 'interfaceReducer/SET_CLOSE_LOOK_STATE', state} as const),\r\n    setScrollableState: (state: boolean) => ({type: 'interfaceReducer/SET_SCROLLABLE_STATE', state} as const),\r\n}\r\n\r\ntype InterfaceActionsTypes = InferActionTypes<typeof interfaceActions>;\r\n\r\nexport default interfaceReducer","import {api} from \"../api/api\";\r\nimport {TaskType, TodoListType} from \"../api/entities\";\r\nimport {ThunkAction, ThunkDispatch} from \"redux-thunk\";\r\nimport {AppStateType, InferActionTypes} from \"./store\";\r\nimport cloneDeep from \"lodash-es/cloneDeep\";\r\nimport {movePos} from \"../serviceFunctions/movePos\";\r\nimport {interfaceActions} from \"./interfaceReducer\";\r\n\r\ntype InitialStateType = {\r\n    todoLists: Array<TodoListType>,\r\n    deepCopy: Array<TodoListType>,\r\n    editable: boolean,\r\n    listsOrder: Array<string>,\r\n    tasksOrder: Array<{ todoListId: string, newTasksOrder: Array<string> }>,\r\n    newListsId: Array<{ oldId: string, newId: string }>,\r\n    newTasksId: Array<{ oldId: string, newId: string, todoListId: string }>,\r\n};\r\n\r\nconst initialState = {\r\n    todoLists: [],\r\n    deepCopy: [],\r\n    editable: false,\r\n    listsOrder: [],\r\n    tasksOrder: [],\r\n    newListsId: [],\r\n    newTasksId: [],\r\n};\r\n\r\nconst stateReducer = (state: InitialStateType = initialState, action: StateActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'stateReducer/SET_TODO_LISTS':\r\n            return {\r\n                ...state,\r\n                todoLists: action.todoLists\r\n            };\r\n        case 'stateReducer/SET_TASKS':\r\n            return {\r\n                ...state,\r\n                todoLists: state.todoLists.map(list => {\r\n                    if (list.id === action.todoListId) {\r\n                        return {...list, tasks: action.tasks}\r\n                    } else return list\r\n                }),\r\n            };\r\n        case 'stateReducer/ADD_TODO_LIST':\r\n            return {\r\n                ...state,\r\n                todoLists: [action.newTodoList, ...state.todoLists],\r\n            };\r\n        case 'stateReducer/ADD_TASK':\r\n            return {\r\n                ...state,\r\n                todoLists: state.todoLists.map(list => {\r\n                    if (list.id === action.todoListId) {\r\n                        return {...list, tasks: [action.newTask, ...list.tasks]}\r\n                    } else return list\r\n                }),\r\n            };\r\n        case 'stateReducer/CHANGE_TASK':\r\n            return {\r\n                ...state,\r\n                todoLists: state.todoLists.map(list => {\r\n                    if (list.id === action.task.todoListId) {\r\n                        return {\r\n                            ...list, tasks: list.tasks.map(task => {\r\n                                if (task.id === action.task.id) {\r\n                                    return {...action.task}\r\n                                } else return task;\r\n                            })\r\n                        }\r\n                    } else return list\r\n                }),\r\n            };\r\n        case 'stateReducer/DELETE_TODO_LIST':\r\n            return {\r\n                ...state,\r\n                todoLists: state.todoLists.filter(list => list.id !== action.todoListId),\r\n            };\r\n        case 'stateReducer/DELETE_TASK':\r\n            return {\r\n                ...state,\r\n                todoLists: state.todoLists.map(list => {\r\n                    if (list.id === action.todoListId) {\r\n                        return {...list, tasks: list.tasks.filter(task => task.id !== action.taskId)}\r\n                    } else return list\r\n                }),\r\n            };\r\n        case 'stateReducer/CHANGE_TODO_LIST_TITLE':\r\n            return {\r\n                ...state,\r\n                todoLists: state.todoLists.map(list => {\r\n                    if (list.id === action.todoListId) {\r\n                        return {...list, title: action.todoListTitle}\r\n                    } else return list\r\n                }),\r\n            };\r\n        case \"stateReducer/SWAP_TODO_LISTS\":\r\n            return {\r\n                ...state,\r\n                listsOrder: action.newListsOrder\r\n            }\r\n        case \"stateReducer/SWAP_TASKS\":\r\n            const index = state.tasksOrder.findIndex(item => item.todoListId === action.todoListId);\r\n            const newSwappedTasks = index !== -1 ? state.tasksOrder.map((item, i) => {\r\n                if (i === index) return {todoListId: action.todoListId, newTasksOrder: action.newTasksOrder}\r\n                return item\r\n            }) : [...state.tasksOrder, {todoListId: action.todoListId, newTasksOrder: action.newTasksOrder}]\r\n            return {\r\n                ...state,\r\n                tasksOrder: newSwappedTasks\r\n            }\r\n        case \"stateReducer/ENABLE_EDIT_MODE\": //\r\n            return {\r\n                ...state,\r\n                editable: true,\r\n                listsOrder: [],\r\n                tasksOrder: [],\r\n                deepCopy: cloneDeep(state.todoLists)\r\n            };\r\n        case \"stateReducer/DISABLE_EDIT_MODE\":\r\n            return {\r\n                ...state,\r\n                editable: false\r\n            }\r\n        case \"stateReducer/SET_NEW_ID\":\r\n            return {\r\n                ...state,\r\n                todoLists: action.newTodoLists\r\n            };\r\n        case \"stateReducer/REJECT_ALL_CHANGES\":\r\n            return {\r\n                ...state,\r\n                todoLists: state.deepCopy,\r\n                editable: false,\r\n                listsOrder: [],\r\n                tasksOrder: [],\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const stateActions = {\r\n    addTodoList: (newTodoList: TodoListType) => ({type: 'stateReducer/ADD_TODO_LIST', newTodoList} as const),\r\n    addTask: (newTask: TaskType, todoListId: string) => ({type: 'stateReducer/ADD_TASK', newTask, todoListId} as const),\r\n    changeTask: (task: TaskType) => ({type: 'stateReducer/CHANGE_TASK', task} as const),\r\n    deleteTodoList: (todoListId: string) => ({type: 'stateReducer/DELETE_TODO_LIST', todoListId} as const),\r\n    deleteTask: (todoListId: string, taskId: string) => ({type: 'stateReducer/DELETE_TASK', taskId, todoListId} as const),\r\n    restoreTodoList: (todoLists: TodoListType[]) => ({type: 'stateReducer/SET_TODO_LISTS', todoLists} as const),\r\n    restoreTasks: (tasks: TaskType[], todoListId: string) => ({\r\n        type: 'stateReducer/SET_TASKS',\r\n        tasks,\r\n        todoListId\r\n    } as const),\r\n    changeTodoListTitle: (todoListId: string, todoListTitle: string) => ({\r\n        type: 'stateReducer/CHANGE_TODO_LIST_TITLE',\r\n        todoListId,\r\n        todoListTitle\r\n    } as const),\r\n    enableEditMode: () => ({type: 'stateReducer/ENABLE_EDIT_MODE'} as const),\r\n    disableEditMode: () => ({type: 'stateReducer/DISABLE_EDIT_MODE'} as const),\r\n    swapTasks: (todoListId: string, newTasksOrder: Array<string>) => ({\r\n        type: 'stateReducer/SWAP_TASKS', todoListId, newTasksOrder\r\n    } as const),\r\n    swapTodoLists: (newListsOrder: Array<string>) => ({type: 'stateReducer/SWAP_TODO_LISTS', newListsOrder} as const),\r\n    setTodoLists: (newTodoLists: Array<TodoListType>) => ({type: 'stateReducer/SET_NEW_ID', newTodoLists} as const),\r\n    rejectAllChanges: () => ({type: 'stateReducer/REJECT_ALL_CHANGES'} as const),\r\n}\r\n\r\ntype StateActionsType = InferActionTypes<typeof stateActions>;\r\ntype DispatchedActionsTypes = InferActionTypes<typeof stateActions & typeof interfaceActions>;\r\n\r\ntype ThunkType = ThunkAction<void, AppStateType, unknown, DispatchedActionsTypes>;\r\ntype ThunkActionType = ThunkDispatch<AppStateType, unknown, DispatchedActionsTypes>;\r\n\r\nexport const loadTodoListsTC = (): ThunkType => (dispatch: ThunkActionType) => {\r\n    api.restoreState().then(data => {\r\n        dispatch(stateActions.restoreTodoList(data))\r\n    })\r\n};\r\nexport const addTodoListTC = (title: string): ThunkType => (dispatch: ThunkActionType) => {\r\n    api.addTodoList(title).then(data => {\r\n        if (data.resultCode === 0) dispatch(stateActions.addTodoList(data.data.item))\r\n    })\r\n};\r\nexport const changeTaskTC = (todoListId: string, taskId: string, newTask: TaskType): ThunkType => (dispatch: ThunkActionType) => {\r\n    api.changeTask(todoListId, taskId, newTask).then(data => {\r\n        if (data.resultCode === 0) dispatch(stateActions.changeTask(data.data.item))\r\n    })\r\n};\r\nexport const deleteTaskTC = (todoListId: string, taskId: string): ThunkType => (dispatch: ThunkActionType) => {\r\n    api.deleteTask(todoListId, taskId).then(data => {\r\n        if (data.resultCode === 0) dispatch(stateActions.deleteTask(todoListId, taskId))\r\n    })\r\n};\r\nexport const changeTodoListTitleTC = (todoListId: string, todoListTitle: string): ThunkType => (dispatch: ThunkActionType) => {\r\n    api.changeTodoListTitle(todoListId, todoListTitle).then(data => {\r\n        if (data.resultCode === 0) dispatch(stateActions.changeTodoListTitle(todoListId, todoListTitle))\r\n    })\r\n};\r\n\r\n\r\n\r\nexport const initialization = (): ThunkType => async (dispatch: ThunkActionType) => {\r\n    const authState = await api.getAuthState();\r\n    if (!authState.data.id) {\r\n        await api.logIn()\r\n    }\r\n    dispatch(getStateFromServer(true));\r\n};\r\n\r\nconst getStateFromServer = (initial: boolean): ThunkType => async (dispatch: ThunkActionType) => {\r\n    if (!initial) dispatch(interfaceActions.setFetchingState('fetching new data'));\r\n    const lists = await api.restoreState();\r\n    let listsWithTasks = lists;\r\n    if (lists.length !== 0) {\r\n        dispatch(interfaceActions.setAllTasks(lists.length));\r\n        dispatch(interfaceActions.setCompletedTask(true))\r\n        const getTasks = lists.map(async (item) => {\r\n            return await api.restoreTasks(item.id).then(data => {\r\n                const index = listsWithTasks.findIndex(list => item.id === list.id);\r\n                listsWithTasks[index] = {...item, tasks: data.items};\r\n                dispatch(interfaceActions.setCompletedTask(false))\r\n            })\r\n        });\r\n        await Promise.all(getTasks)\r\n    }\r\n    dispatch(stateActions.setTodoLists(listsWithTasks));\r\n    if (initial) setTimeout(() => dispatch(interfaceActions.completeInitialLoadingState()), 600);\r\n};\r\n\r\nexport const submitAllChanges = (): ThunkType =>\r\n    async (dispatch: ThunkActionType, getState: () => AppStateType) => {\r\n\r\n        dispatch(stateActions.disableEditMode());\r\n        dispatch(interfaceActions.setFetchingState('sending data'))\r\n        /*dispatch(actions.setPendingState(true))*/\r\n\r\n        const oldTodoLists = getState().todoList.deepCopy;\r\n        const newTodoLists = getState().todoList.todoLists;\r\n        let listsOrder = getState().todoList.listsOrder;\r\n        let tasksOrder = getState().todoList.tasksOrder;\r\n\r\n        const newListsId: Array<{ oldId: string, newId: string }> = [];\r\n        const newTasksId: Array<{ oldId: string, newId: string, todoListId: string }> = [];\r\n        let todoListsWithNewId: Array<TodoListType> = [];\r\n\r\n        //added items\r\n        const addedLists = newTodoLists.filter(list => oldTodoLists.findIndex(oldList => oldList.id === list.id) === -1);\r\n        const deletedLists = oldTodoLists.filter(list => newTodoLists.findIndex(newList => newList.id === list.id) === -1);\r\n        const editedLists: Array<TodoListType> = []\r\n        newTodoLists.forEach(list => {\r\n            const oldList = oldTodoLists.find(oldList => oldList.id === list.id);\r\n            if (oldList && list.title !== oldList.title) {\r\n                editedLists.push(list)\r\n            }\r\n        })\r\n\r\n        let addedTasks: Array<TaskType> = [];\r\n        const editedTasks: Array<TaskType> = [];\r\n        newTodoLists.forEach(list => {\r\n            const oldList = oldTodoLists.find(oldList => oldList.id === list.id);\r\n            if (oldList) {\r\n                list.tasks.forEach(task => {\r\n                    const oldTask = oldList.tasks.find(oldTask => oldTask.id === task.id)\r\n                    if (!oldTask) {\r\n                        addedTasks.push(task);\r\n                        return\r\n                    }\r\n                    if (oldTask && oldTask.title !== task.title) {\r\n                        editedTasks.push(task)\r\n                    }\r\n                })\r\n            }\r\n            if (!oldList && list.tasks.length !== 0) {\r\n                list.tasks.forEach(task => addedTasks.push(task))\r\n            }\r\n        })\r\n        const deletedTasks: Array<TaskType> = [];\r\n        oldTodoLists.forEach(list => {\r\n            const newList = newTodoLists.find(newList => newList.id === list.id);\r\n            if (newList) {\r\n                list.tasks.forEach(task => {\r\n                    const newTask = newList.tasks.find(newTask => newTask.id === task.id)\r\n                    if (!newTask) {\r\n                        deletedTasks.push(task)\r\n                    }\r\n                })\r\n            }\r\n        })\r\n\r\n        //progress bar logic\r\n        let allTasks = 0;\r\n        if (deletedLists.length !== 0) allTasks = allTasks + deletedLists.length;\r\n        if (deletedTasks.length !== 0) allTasks = allTasks + deletedTasks.length;\r\n        if (addedLists.length !== 0) allTasks = allTasks + addedLists.length;\r\n        if (addedTasks.length !== 0) allTasks = allTasks + addedTasks.length;\r\n        if (editedLists.length !== 0) allTasks = allTasks + editedLists.length;\r\n        if (editedTasks.length !== 0) allTasks = allTasks + editedTasks.length;\r\n        dispatch(interfaceActions.setAllTasks(allTasks));\r\n\r\n        //queries\r\n        dispatch(interfaceActions.setCompletedTask(true))\r\n        if (deletedLists.length !== 0) {\r\n            deletedLists.forEach(list => {\r\n                api.deleteTodoList(list.id).then(data => {\r\n                    if (data.resultCode === 0) dispatch(interfaceActions.setCompletedTask(false))\r\n                })\r\n            })\r\n        }\r\n        if (deletedTasks.length !== 0) {\r\n            deletedTasks.forEach(task => {\r\n                api.deleteTask(task.todoListId, task.id).then(data => {\r\n                    if (data.resultCode === 0) dispatch(interfaceActions.setCompletedTask(false))\r\n                })\r\n            })\r\n        }\r\n        if (editedLists.length !== 0) {\r\n            editedLists.forEach(list => {\r\n                api.changeTodoListTitle(list.id, list.title).then(data => {\r\n                    if (data.resultCode === 0) dispatch(interfaceActions.setCompletedTask(false))\r\n                })\r\n            })\r\n        }\r\n        if (editedTasks.length !== 0) {\r\n            editedTasks.forEach(task => {\r\n                api.changeTask(task.todoListId, task.id, task).then(data => {\r\n                    if (data.resultCode === 0) dispatch(interfaceActions.setCompletedTask(false))\r\n                })\r\n            })\r\n        }\r\n\r\n        const createAndChangeIdOfTasksInOrderList = async () => {\r\n            if (addedTasks.length !== 0) {\r\n                const tasksPromises = addedTasks.map(async (task) => {\r\n                    return await api.addTask(task.title, task.todoListId).then(data => {\r\n                        if (data.resultCode === 0) newTasksId.push({\r\n                            newId: data.data.item.id,\r\n                            oldId: task.id,\r\n                            todoListId: data.data.item.todoListId\r\n                        })\r\n                        if (data.resultCode === 0) dispatch(interfaceActions.setCompletedTask(false))\r\n                    });\r\n                })\r\n                await Promise.all(tasksPromises);\r\n                if (tasksOrder.length !== 0) {\r\n                    tasksOrder = tasksOrder.map(item => {\r\n                        const newList = newListsId.find(list => list.oldId === item.todoListId)\r\n                        const tasksWithNewId = item.newTasksOrder.map(taskId => {\r\n                            const newTask = newTasksId.find(newTask => newTask.oldId === taskId);\r\n                            if (newTask) return newTask.newId;\r\n                            return taskId\r\n                        })\r\n                        return {todoListId: newList ? newList.newId : item.todoListId, newTasksOrder: tasksWithNewId}\r\n                    })\r\n                }\r\n            }\r\n        }\r\n\r\n        if (addedLists.length !== 0) {\r\n            const listPromises = addedLists.map(async (list) => {\r\n                return await api.addTodoList(list.title).then(data => {\r\n                    if (data.resultCode === 0) {\r\n                        newListsId.push({newId: data.data.item.id, oldId: list.id});\r\n                        dispatch(interfaceActions.setCompletedTask(false))\r\n                    }\r\n                })\r\n\r\n            })\r\n            await Promise.all(listPromises);\r\n            if (addedTasks.length !== 0) {\r\n                addedTasks = addedTasks.map(task => {\r\n                    const newListId = newListsId.find(list => list.oldId === task.todoListId);\r\n                    if (newListId) return {...task, todoListId: newListId.newId}\r\n                    return task\r\n                })\r\n            }\r\n            if (listsOrder.length !== 0) {\r\n                listsOrder = listsOrder.map(item => {\r\n                    const newList = newListsId.find(list => list.oldId === item)\r\n                    if (newList) return newList.newId;\r\n                    return item\r\n                })\r\n            }\r\n            await createAndChangeIdOfTasksInOrderList()\r\n        } else await createAndChangeIdOfTasksInOrderList();\r\n\r\n        //swap progress\r\n        dispatch(interfaceActions.setFetchingState('swap items'));\r\n\r\n        //changing id\r\n        if (newListsId.length !== 0) {\r\n            todoListsWithNewId = newTodoLists.map(list => {\r\n                const newList = newListsId.find(item => item.oldId === list.id)\r\n                if (newList) return {...list, id: newList.newId};\r\n                return list\r\n            })\r\n        } else todoListsWithNewId = newTodoLists;\r\n        if (newTasksId.length !== 0) {\r\n            todoListsWithNewId = todoListsWithNewId.map(list => {\r\n                const tasks = list.tasks.map(task => {\r\n                    const newTask = newTasksId.find(item => item.oldId === task.id)\r\n                    if (newTask) return {...task, id: newTask.newId}\r\n                    return task\r\n                })\r\n                return {...list, tasks}\r\n            })\r\n        }\r\n\r\n        //swap items\r\n        if (listsOrder.length !== 0 || addedLists.length > 1) {\r\n            if (deletedLists.length !== 0 && listsOrder.length !== 0) {\r\n                listsOrder = listsOrder.filter(list => todoListsWithNewId.findIndex(item => item.id === list) !== -1)\r\n            }\r\n            let currentOrder = addedLists.length > 1 ? await api.restoreState().then(data => data.map(item => item.id))\r\n                : todoListsWithNewId.map(list => list.id);\r\n            const swapOrder: Array<{ swappedId: string, beforeSwappedId: string | null }> = [];\r\n            const order = listsOrder.length !== 0 ? listsOrder : todoListsWithNewId.map(list => list.id);\r\n            order.forEach((thisListPosId, index) => {\r\n                if (thisListPosId !== currentOrder[index]) {\r\n                    if (index === 0) swapOrder.push({swappedId: thisListPosId, beforeSwappedId: null})\r\n                    else swapOrder.push({swappedId: thisListPosId, beforeSwappedId: listsOrder[index - 1]});\r\n                    const oldIndex = currentOrder.findIndex(listId => listId === thisListPosId)\r\n                    currentOrder = movePos(currentOrder, oldIndex, index)\r\n                }\r\n            });\r\n            for (let order of swapOrder) {\r\n                await api.swapTodoList(order.swappedId, order.beforeSwappedId)\r\n            }\r\n        }\r\n\r\n        if (tasksOrder.length !== 0 || addedTasks.length > 1) {\r\n            if (deletedTasks.length !== 0 && tasksOrder.length !== 0) {\r\n                tasksOrder = tasksOrder.map(item => {\r\n                    const currentList = todoListsWithNewId.find(list => list.id === item.todoListId)\r\n                    if (currentList) {\r\n                        const newTasksOrder = item.newTasksOrder.filter(taskId => currentList.tasks.findIndex(task =>\r\n                            task.id === taskId) !== -1)\r\n                        return {...item, newTasksOrder}\r\n                    }\r\n                    return item\r\n                })\r\n            }\r\n            let addedTasksInLists: Array<{ todoListId: string, tasks: Array<string> }> = [];\r\n            const currentListsStateOnServer = newTasksId.length > 1 ? await (async () => {\r\n                newTasksId.forEach(task => {\r\n                    const list = addedTasksInLists.length !== 0 ?\r\n                        addedTasksInLists.find(list => list.todoListId === task.todoListId) : undefined;\r\n                    if (list) {\r\n                        const index = addedTasksInLists.findIndex(list => list.todoListId === task.todoListId);\r\n                        addedTasksInLists[index] = {...list, tasks: [...list.tasks, task.newId]}\r\n                    } else addedTasksInLists.push({todoListId: task.todoListId, tasks: [task.newId]})\r\n                })\r\n                let listsToUpdate: Array<string> = [];\r\n                addedTasksInLists.forEach(item => {\r\n                    if (item.tasks.length > 1) listsToUpdate.push(item.todoListId)\r\n                })\r\n                if (listsToUpdate.length !== 0) {\r\n                    let listsOnServer: Array<{ todoListId: string, tasks: Array<string> }> = [];\r\n                    const getListOrder = listsToUpdate.map(async (item) => {\r\n                        return await api.restoreTasks(item).then(res => {\r\n                            const tasks = res.items.map(item => item.id);\r\n                            listsOnServer.push({todoListId: item, tasks})\r\n                        });\r\n                    });\r\n                    await Promise.all(getListOrder);\r\n                    return listsOnServer\r\n                } else return undefined\r\n            })() : undefined;\r\n\r\n            /*console.log(currentListsStateOnServer,\r\n                todoListsWithNewId.find(item => item.id === currentListsStateOnServer![0].todoListId)!\r\n                    .Tasks.map(item => item.id),\r\n                todoListsWithNewId.find(item => item.id === currentListsStateOnServer![0].todoListId)!\r\n                    .Tasks.map(item => item.title))*/\r\n\r\n            let requiredOrder: Array<{ todoListId: string, tasks: Array<string> }> = [];\r\n            if (currentListsStateOnServer && tasksOrder.length !== 0) {\r\n                currentListsStateOnServer.forEach(item => {\r\n                    const isItemInOrder = tasksOrder.find(currItem =>\r\n                        currItem.todoListId === item.todoListId);\r\n                    if (isItemInOrder) return;\r\n                    const orderFromCurrentState = todoListsWithNewId.find(list => item.todoListId === list.id)!;\r\n                    requiredOrder.push({\r\n                        todoListId: orderFromCurrentState.id,\r\n                        tasks: orderFromCurrentState.tasks.map(task => task.id)\r\n                    })\r\n                });\r\n                tasksOrder.forEach(item => requiredOrder.push({todoListId: item.todoListId, tasks: item.newTasksOrder}))\r\n            } else if (!currentListsStateOnServer && tasksOrder.length !== 0) {\r\n                requiredOrder = tasksOrder.map(item => ({todoListId: item.todoListId, tasks: item.newTasksOrder}));\r\n            } else if (currentListsStateOnServer && tasksOrder.length === 0) {\r\n                currentListsStateOnServer.forEach(item => {\r\n                    const orderFromCurrentState = todoListsWithNewId.find(list => item.todoListId === list.id)!;\r\n                    requiredOrder.push({\r\n                        todoListId: orderFromCurrentState.id,\r\n                        tasks: orderFromCurrentState.tasks.map(task => task.id)\r\n                    })\r\n                });\r\n            }\r\n\r\n            const currentOrder = requiredOrder.map(item => {\r\n                const itemWithUpdatedState = currentListsStateOnServer ? currentListsStateOnServer\r\n                    .find(list => list.todoListId === item.todoListId) : undefined;\r\n                const curItem = todoListsWithNewId.find(list => list.id === item.todoListId)!;\r\n                if (itemWithUpdatedState) return itemWithUpdatedState;\r\n                return {todoListId: curItem.id, tasks: curItem.tasks.map(task => task.id)}\r\n            });\r\n\r\n            const swapOrder: Array<{ todoListId: string, swappedId: string, beforeSwappedId: string | null }> = [];\r\n            requiredOrder.forEach(newOrder => {\r\n                let currOrder = currentOrder.find(item => item.todoListId === newOrder.todoListId)!.tasks;\r\n                newOrder.tasks.forEach((newTaskPosId, index) => {\r\n                    if (newTaskPosId !== currOrder[index]) {\r\n                        if (index === 0) swapOrder.push({\r\n                            todoListId: newOrder.todoListId, swappedId: newTaskPosId, beforeSwappedId: null\r\n                        });\r\n                        else swapOrder.push({\r\n                            todoListId: newOrder.todoListId, swappedId: newTaskPosId,\r\n                            beforeSwappedId: currOrder[index - 1]\r\n                        });\r\n                        const oldIndex = currOrder.findIndex(taskId => taskId === newTaskPosId)\r\n                        currOrder = movePos(currOrder, oldIndex, index)\r\n                    }\r\n                })\r\n            });\r\n            const groupedSwapOrder: Array<{todoListId: string, swapOrder: Array<{swappedId: string, beforeSwappedId: string | null}>}> = [];\r\n            swapOrder.forEach(task => {\r\n                const currentList = groupedSwapOrder.find(item => item.todoListId === task.todoListId);\r\n                if (currentList) groupedSwapOrder.map(item => item.todoListId === currentList.todoListId ?\r\n                    item.swapOrder.push({swappedId: task.swappedId, beforeSwappedId: task.todoListId}) : item\r\n                );\r\n                groupedSwapOrder.push({\r\n                    todoListId: task.todoListId,\r\n                    swapOrder: [{swappedId: task.swappedId, beforeSwappedId: task.beforeSwappedId}]\r\n                })\r\n            });\r\n            const swapOrderPending = groupedSwapOrder.map(async (item) => {\r\n                const consistentSwapOrder = item.swapOrder\r\n                for (let order of consistentSwapOrder) {\r\n                    await api.swapTasks(item.todoListId, order.swappedId, order.beforeSwappedId)/*.then(data => {\r\n                        if (data.resultCode !== 0) dispatch(actions.setError())\r\n                    })*/\r\n                }\r\n            });\r\n            await Promise.all(swapOrderPending)\r\n        }\r\n        dispatch(interfaceActions.setFetchingState(null));\r\n\r\n\r\n        if (addedLists.length !== 0 || addedTasks.length !== 0) {\r\n            dispatch(getStateFromServer(false))\r\n        }\r\n    };\r\n\r\nexport default stateReducer","import React, {useCallback, useEffect, useMemo, useState} from \"react\";\r\nimport {shallowEqual, useDispatch, useSelector} from \"react-redux\";\r\nimport {AppStateType} from \"../../redux/store\";\r\nimport {useSpring} from \"react-spring\";\r\nimport RotatedBackground from \"./RotatedBackground\";\r\nimport InterfaceWrapper from \"./InterfaceWrapper\";\r\nimport EditButton from \"./EditButton\";\r\nimport OtherButtons from \"./OtherButtons\";\r\nimport {stateActions, submitAllChanges} from \"../../redux/stateReducer\";\r\nimport {interfaceActions} from \"../../redux/interfaceReducer\";\r\n\r\n\r\nconst MainInterfaceContainer = () => {\r\n\r\n    const dispatch = useDispatch();\r\n    const editable = useSelector((state: AppStateType) => state.todoList.editable, shallowEqual);\r\n    const currentPalette = useSelector((state: AppStateType) => state.interface.currentPaletteIndex, shallowEqual);\r\n    const initialLoading = useSelector((state: AppStateType) => state.interface.initialLoadingState, shallowEqual);\r\n    const allTasks = useSelector((state: AppStateType) => state.interface.allTasks, shallowEqual);\r\n    const completedTasks = useSelector((state: AppStateType) => state.interface.completedTasks, shallowEqual);\r\n    const fetchingState = useSelector((state: AppStateType) => state.interface.fetchingState, shallowEqual);\r\n    const closeLook = useSelector((state: AppStateType) => state.interface.closeLookState, shallowEqual);\r\n    const interfaceHeight = useSelector((state: AppStateType) => state.interface.interfaceHeight, shallowEqual);\r\n    const width = useSelector((state: AppStateType) => state.interface.width, shallowEqual);\r\n    const scrollableState = useSelector((state: AppStateType) => state.interface.scrollableState, shallowEqual);\r\n\r\n    const [buttonsWrapperHeight, setButtonsHeight] = useState<number>(0);\r\n\r\n    useEffect(() => {\r\n        let isMounted = true;\r\n        let timeoutId: number | undefined = undefined;\r\n        const getHeight = (getButtonHeight: boolean) => {\r\n            if (!getButtonHeight) return editable ? (window.innerHeight * 0.17 > 230 ? 230 :\r\n                window.innerHeight * 0.17 < 150 ? 150 : window.innerHeight * 0.17) :\r\n                (Math.sqrt((window.innerHeight * 0.23) ** 2 + (window.innerWidth * 0.23) ** 2) > 300 ? 300 :\r\n                    Math.sqrt((window.innerHeight * 0.23) ** 2 + (window.innerWidth * 0.23) ** 2));\r\n            return window.innerHeight * 0.17 > 230 ? 230 :\r\n                window.innerHeight * 0.17 < 150 ? 150 : window.innerHeight * 0.17\r\n        }\r\n        if (isMounted) {\r\n            const height = getHeight(false);\r\n            dispatch(interfaceActions.setInterfaceHeight(height));\r\n            const buttonHeight = getHeight(true);\r\n            setButtonsHeight(buttonHeight);\r\n        }\r\n        const resizeListener = () => {\r\n            if (isMounted) {\r\n                clearTimeout(timeoutId);\r\n                timeoutId = window.setTimeout(() => {\r\n                    const newHeight = getHeight(false);\r\n                    dispatch(interfaceActions.setInterfaceHeight(newHeight));\r\n                    const newButtonHeight = getHeight(true);\r\n                    setButtonsHeight(newButtonHeight);\r\n                }, 150);\r\n            }\r\n        };\r\n        window.addEventListener('resize', resizeListener);\r\n        return () => {\r\n            isMounted = false;\r\n            window.removeEventListener('resize', resizeListener);\r\n        }\r\n    }, [editable, dispatch]);\r\n\r\n    const addTodoList = useCallback(() => {\r\n        const id = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n            let r = Math.random() * 16 | 0, v = c === 'x' ? r : ((r & 0x3) | 0x8);\r\n            return v.toString(16);\r\n        });\r\n        const newList = {\r\n            id,\r\n            title: '',\r\n            tasks: []\r\n        }\r\n        dispatch(stateActions.addTodoList(newList));\r\n    }, [dispatch]);\r\n\r\n    const rejectAllChanges = useCallback(() => {\r\n        dispatch(stateActions.rejectAllChanges())\r\n    }, [dispatch]);\r\n\r\n    const switchScrollableState = useCallback(() => {\r\n        dispatch(interfaceActions.setScrollableState(!scrollableState))\r\n    }, [scrollableState, dispatch]);\r\n\r\n    const switchEditMode = useCallback(() => {\r\n        if (!editable) dispatch(stateActions.enableEditMode());\r\n        if (editable) dispatch(submitAllChanges());\r\n    }, [editable, dispatch]);\r\n\r\n    //animation logic\r\n    const [spring, setSpring] = useSpring(() => ({\r\n        height: window.innerHeight,\r\n        width: window.innerWidth,\r\n        backgroundHeight: Math.sqrt(window.innerHeight ** 2 + window.innerWidth ** 2),\r\n        rotateZ: -35,\r\n        x: '0vw',\r\n    }));\r\n\r\n    const [progressBarAnimation, setProgressBar] = useSpring(() => ({\r\n        value: 0,\r\n        height: '0%',\r\n        opacity: 1\r\n    }));\r\n\r\n    useEffect(() => {\r\n        if (editable) setSpring({width: window.innerWidth})\r\n    }, [width, setSpring, editable]);\r\n\r\n    useEffect(() => {\r\n        setProgressBar(() => {\r\n            if (completedTasks / allTasks !== 1) return {\r\n                value: isNaN(completedTasks / allTasks * 100) ? 0 : completedTasks / allTasks * 100,\r\n                height: `${completedTasks / allTasks * 100}%`,\r\n            };\r\n            else return {\r\n                to: async animate => {\r\n                    await animate({\r\n                        value: isNaN(completedTasks / allTasks * 100) ? 0 : completedTasks / allTasks * 100,\r\n                        height: `${completedTasks / allTasks * 100}%`});\r\n                    await animate({opacity: 0})\r\n                }\r\n            }\r\n        })\r\n    }, [allTasks, completedTasks, setProgressBar]);\r\n\r\n    useEffect(() => {\r\n        if (!initialLoading && !editable && !closeLook) {\r\n            setSpring({\r\n                height: interfaceHeight,\r\n                width: buttonsWrapperHeight,\r\n                backgroundHeight: interfaceHeight,\r\n                rotateZ: -35,\r\n                x: '0vw',\r\n                delay: (prop) => prop === 'rotateZ' ? 300 : 0,\r\n                config: {friction: 50}\r\n            })\r\n        } else if (editable) {\r\n            setSpring({\r\n                backgroundHeight: interfaceHeight,\r\n                height: interfaceHeight,\r\n                width: window.innerWidth,\r\n                rotateZ: 0,\r\n                delay: (prop) => prop === 'width' ? 300 : 0\r\n            })\r\n        } else if (closeLook) {\r\n            setSpring({\r\n                x: '-100vw'\r\n            })\r\n        }\r\n    }, [editable, initialLoading, fetchingState, closeLook, interfaceHeight, setSpring, buttonsWrapperHeight]);\r\n\r\n    const actionMessage = useMemo(() =>\r\n            initialLoading ? 'Loading' : editable ? 'Submit' : fetchingState !== null ? fetchingState : 'Edit'\r\n        , [editable, fetchingState, initialLoading]);\r\n\r\n    return (\r\n        <>\r\n            <RotatedBackground palette={currentPalette} height={spring.backgroundHeight} rotateZ={spring.rotateZ} x={spring.x}/>\r\n            <InterfaceWrapper height={spring.height} width={spring.width} interfaceHeight={buttonsWrapperHeight} x={spring.x}>\r\n                <EditButton actionMessage={actionMessage} interfaceHeight={buttonsWrapperHeight}\r\n                            cantBeHovered={initialLoading || !!fetchingState}\r\n                            switchEditMode={switchEditMode} palette={currentPalette}\r\n                            progressBarAnimation={progressBarAnimation}/>\r\n                <OtherButtons palette={currentPalette} editable={editable} addTodoList={addTodoList} switchScrollableState={switchScrollableState}\r\n                              rejectAllChanges={rejectAllChanges} interfaceHeight={buttonsWrapperHeight} scrollableState={scrollableState}/>\r\n            </InterfaceWrapper>\r\n        </>\r\n    )\r\n};\r\n\r\nexport default MainInterfaceContainer","import React from \"react\";\r\nimport styled from \"styled-components/macro\";\r\nimport {animated, SpringValue} from \"react-spring\";\r\nimport {defaultPalette, NeumorphColorsType} from \"../../neumorphColors\";\r\nimport {isMobile} from \"react-device-detect\";\r\nimport {ReactEventHandlers} from \"react-use-gesture/dist/types\";\r\nimport isEqual from \"react-fast-compare\";\r\n\r\nconst ScrollBarWrapper = styled(animated.div)<{ $palette: NeumorphColorsType, $visible: boolean, $editable: boolean, $interfaceHeight: number }>`\r\n  position: absolute;\r\n  width: 30px;\r\n  border-radius: 10px;\r\n  height: ${props => props.$editable ? window.innerHeight - props.$interfaceHeight : window.innerHeight}px;\r\n  top: ${props => props.$editable ? props.$interfaceHeight : 0}px;\r\n  right: ${props => props.$visible ? 0 : -50}px;\r\n  overflow: hidden;\r\n  transition: .6s cubic-bezier(0.25, 0, 0, 1);\r\n  background: ${props => props.$palette.progressBarColor};\r\n`;\r\n\r\nconst ScrollBarThing = styled(animated.div)<{ $palette: NeumorphColorsType, $height: number, $drugged: boolean }>`\r\n  position: absolute;\r\n  width: 20px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  height: ${props => props.$height}%;\r\n  border-radius: 10px;\r\n  transition: background 0.3s cubic-bezier(0.25, 0, 0, 1), height 0.3s cubic-bezier(0.25, 0, 0, 1);\r\n  background: ${props => props.$drugged ? defaultPalette.background : props.$palette.background};\r\n  cursor: grab;\r\n  &:active {\r\n      cursor: grabbing;\r\n      background-color: ${props => props.$palette.progressBarHoverColor}\r\n  }\r\n  &:hover {\r\n      background-color: ${props => props.$palette.progressBarHoverColor}\r\n  }\r\n`;\r\n\r\ntype PropsType = {\r\n    palette: NeumorphColorsType,\r\n    visible: boolean,\r\n    editable: boolean,\r\n    interfaceHeight: number,\r\n    drugged: boolean,\r\n    top: SpringValue<string>,\r\n    bindDraggedScrollBar: (...args: any[]) => ReactEventHandlers,\r\n    scrollBarHeight: number\r\n}\r\n\r\nconst ScrollBar: React.FC<PropsType> = ({\r\n                                            palette, interfaceHeight, editable, bindDraggedScrollBar, scrollBarHeight,\r\n                                            visible, drugged, top\r\n                                        }) => {\r\n\r\n    return (\r\n        <ScrollBarWrapper $palette={palette} $visible={visible}\r\n                          $editable={editable} $interfaceHeight={interfaceHeight}>\r\n            <ScrollBarThing $palette={palette} $drugged={drugged}\r\n                            style={{top}} {...!isMobile && {...bindDraggedScrollBar()}}\r\n                            $height={scrollBarHeight}/>\r\n        </ScrollBarWrapper>\r\n    )\r\n}\r\n\r\nexport default React.memo(ScrollBar, isEqual)","import React from \"react\";\r\nimport styled from \"styled-components/macro\";\r\nimport {animated, SpringValue} from \"react-spring\";\r\nimport {isMobile} from \"react-device-detect\";\r\n\r\nconst AllLists = styled(animated.div)<{ $editable: boolean, $closeLook: boolean, $interfaceHeight: number }>`\r\n  position: relative;\r\n  transform-style: preserve-3d;\r\n  width: 70vw;\r\n  top: ${props => props.$editable && !props.$closeLook ? props.$interfaceHeight : 0}px;\r\n  height: calc(100vh - 280px);\r\n  transform-origin: 50% 100%;\r\n  transition: top 0.5s cubic-bezier(0.25, 0, 0, 1);\r\n  @media screen and (max-width: 1210px) {\r\n    top: ${props => props.$editable ? `${props.$interfaceHeight}px` : props.$closeLook ?\r\n    '0px' : '-38vh'};\r\n    width: 90vw\r\n  }\r\n`;\r\n\r\nconst ScrollWrapper = styled(animated.div)<{ $top: number }>`\r\n  position: absolute;\r\n  transform-style: preserve-3d;\r\n  width: 100%;\r\n  z-index: 1;\r\n  left: 50%;\r\n  top: ${props => props.$top}px;\r\n  transition: top 0.5s cubic-bezier(0.25, 0, 0, 1);\r\n  max-width: 2000px;\r\n`;\r\n\r\ntype PropsType = {\r\n    wrapperAnimation: { x: SpringValue<string>, rotateX: SpringValue<number>, rotateZ: SpringValue<number>, y: SpringValue<number> },\r\n    editable: boolean,\r\n    closeLook: boolean,\r\n    interfaceHeight: number,\r\n    y: SpringValue<number>,\r\n    height: SpringValue<number>,\r\n    measuredRef: React.RefObject<HTMLDivElement>,\r\n    visible: boolean,\r\n}\r\n\r\nconst ScrollableWrapper: React.FC<PropsType> = ({\r\n                                                    children, wrapperAnimation,\r\n                                                    editable, closeLook, height, interfaceHeight,\r\n                                                    y, visible, measuredRef\r\n                                                }) => {\r\n\r\n    return (\r\n        <AllLists style={wrapperAnimation} $editable={editable} $closeLook={closeLook}\r\n                  $interfaceHeight={interfaceHeight}>\r\n            <ScrollWrapper style={{y, height, translateX: '-50%'}} ref={measuredRef}\r\n                           $top={closeLook && visible && isMobile ? 50 : closeLook && visible && !isMobile ? 125 : 25}>\r\n                {children}\r\n            </ScrollWrapper>\r\n        </AllLists>\r\n    )\r\n}\r\n\r\nexport default ScrollableWrapper","import React from \"react\";\r\nimport styled from \"styled-components/macro\";\r\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\r\nimport {NeumorphColorsType} from \"../neumorphColors\";\r\nimport {useDrag} from \"react-use-gesture\";\r\n\r\nexport const TaskButtonWrapper = styled.div`\r\n    z-index: 0;\r\n    position: absolute;\r\n    width: 0;\r\n    height: 0;\r\n    transform: translateX(-70%);\r\n    transition: .25s cubic-bezier(0.25, 0, 0, 1);\r\n    overflow: hidden;\r\n`;\r\n\r\nconst Button = styled.div<{$palette: NeumorphColorsType}>`\r\n    display: grid;\r\n    place-items: center;\r\n    position: absolute;\r\n    width: 2rem;\r\n    height: 2rem;\r\n    cursor: pointer;\r\n    left: 10px;\r\n    font-size: 15px;\r\n    border-radius: 100%;\r\n    background-color: ${props => props.$palette.background};\r\n    box-shadow: ${props => props.$palette.littleShadows};\r\n    color: ${props => props.$palette.color};\r\n    transition: .25s cubic-bezier(0.25, 0, 0, 1);\r\n    &:hover {\r\n        background-color: ${props => props.$palette.color};\r\n        color: ${props => props.$palette.background};\r\n    }\r\n    &:first-child:nth-last-child(2),\r\n        &:first-child:nth-last-child(2) ~ * { \r\n            &:nth-child(1) {\r\n                top: 5px;\r\n            }\r\n            &:nth-child(2) {\r\n                bottom: 5px;\r\n            }\r\n        }\r\n`;\r\n\r\n\r\ntype PropsType = {\r\n    deleteTask: () => void;\r\n    editTask: () => void;\r\n    palette: NeumorphColorsType\r\n}\r\n\r\nconst TaskButtons: React.FC<PropsType> = ({deleteTask, editTask, palette}) => {\r\n\r\n    const onEditClickHandler = useDrag(({tap, event}) => {\r\n        event?.stopPropagation()\r\n        if (tap) editTask()\r\n    });\r\n\r\n    const onDeleteClickHandler = useDrag(({tap, event}) => {\r\n        event?.stopPropagation()\r\n        if (tap) deleteTask()\r\n    })\r\n\r\n    return (\r\n        <TaskButtonWrapper>\r\n            <Button {...onEditClickHandler()} $palette={palette}>\r\n                <FontAwesomeIcon icon=\"edit\"/>\r\n            </Button>\r\n            <Button {...onDeleteClickHandler()} $palette={palette}>\r\n                <FontAwesomeIcon icon=\"trash\"/>\r\n            </Button>\r\n        </TaskButtonWrapper>\r\n    );\r\n}\r\n\r\nexport default React.memo(TaskButtons);\r\n\r\n","\r\n\r\nexport const validate = (value: string | null): boolean => {\r\n    return value !== null && !/^\\s*$/.test(value) && value.length < 100\r\n};","import React from \"react\";\r\nimport {TaskType} from \"../../api/entities\";\r\nimport styled from \"styled-components/macro\";\r\n\r\nconst CheckboxWrapper = styled.div<{$editable: boolean}>`\r\n    width: 31px;\r\n    height:31px;\r\n    position: relative;\r\n    padding-top: 10px;\r\n    padding-left: 10px;\r\n    opacity: ${props => props.$editable ? 0 : 1};\r\n    --background: #fff;\r\n    --border: #D1D6EE;\r\n    --border-hover: #BBC1E1;\r\n    --border-active: #1E2235;\r\n    --tick: #fff;\r\n`;\r\n\r\nconst Checkbox = styled.input`\r\n    z-index: 9;\r\n    width: 21px;\r\n    height: 21px;\r\n    display: block;\r\n    -webkit-appearance: none;\r\n    -moz-appearance: none;\r\n    position: relative;\r\n    outline: none;\r\n    background: rgba(255, 255, 255, 0.8);\r\n    border: none;\r\n    margin: 0;\r\n    padding: 0;\r\n    cursor: pointer;\r\n    border-radius: 4px;\r\n    transition: box-shadow .3s;\r\n    box-shadow: inset 0 0 0 var(--s, 1px) var(--b, var(--border));\r\n    &:hover {\r\n        --s: 2px;\r\n        --b: var(--border-hover);\r\n    }\r\n    &:checked {\r\n        --b: var(--border-active);\r\n        --s: 2px;\r\n        transition-delay: .4s;\r\n        & + svg {\r\n            --a: 16.1 86.12;\r\n            --o: 102.22;\r\n        }\r\n    }\r\n`;\r\n\r\nconst Svg = styled.svg`\r\n    z-index: 10;\r\n    width: 21px;\r\n    height: 21px;\r\n    display: block;\r\n    pointer-events: none;\r\n    fill: none;\r\n    stroke-width: 2px;\r\n    stroke-linecap: round;\r\n    stroke-linejoin: round;\r\n    stroke: var(--stroke, var(--border-active));\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 10px;\r\n    transform: scale(var(--scale, 1)) translateZ(0);\r\n    stroke-dasharray: var(--a, 86.12);\r\n    stroke-dashoffset: var(--o, 86.12);\r\n    transition: stroke-dasharray .6s, stroke-dashoffset .6s;\r\n`;\r\n\r\ntype PropsType = {\r\n    task: TaskType;\r\n    changeDoneStatus: (e: React.ChangeEvent<HTMLInputElement>) => void,\r\n    editable: boolean,\r\n}\r\n\r\nconst TaskCheckbox: React.FC<PropsType> = ({task, changeDoneStatus, editable}) => {\r\n\r\n    return (\r\n        <CheckboxWrapper $editable={editable}>\r\n            <Checkbox type=\"checkbox\" checked={task.status === 2} disabled={editable}\r\n                      onChange={(e) => changeDoneStatus(e)}/>\r\n            <Svg>\r\n                <path\r\n                    d=\"M5,10.75 L8.5,14.25 L19.4,2.3 C18.8333333,1.43333333 18.0333333,1 17,1 L4,1 C2.35,1 1,2.35 1,4 L1,17 C1,18.65 2.35,20 4,20 L17,20 C18.65,20 20,18.65 20,17 L20,7.99769186\"/>\r\n            </Svg>\r\n        </CheckboxWrapper>\r\n    );\r\n}\r\n\r\nexport default React.memo(TaskCheckbox);\r\n\r\n","import React, {useCallback, useEffect, useLayoutEffect, useRef, useState} from \"react\";\r\nimport {shallowEqual, useDispatch, useSelector} from 'react-redux';\r\nimport {TaskType} from \"../../api/entities\";\r\nimport {AppStateType} from \"../../redux/store\";\r\nimport styled from \"styled-components/macro\";\r\nimport TaskButtons, {TaskButtonWrapper} from \"./TaskButtons\";\r\nimport {validate} from \"../../serviceFunctions/validate\";\r\nimport TaskCheckbox from \"./TaskCheckbox\";\r\nimport {NeumorphColorsType} from \"../neumorphColors\";\r\nimport isEqual from \"react-fast-compare\";\r\nimport {interfaceActions} from \"../../redux/interfaceReducer\";\r\nimport {stateActions} from \"../../redux/stateReducer\";\r\nimport {useDrag} from \"react-use-gesture\";\r\n\r\nconst TaskWrapper = styled.div<{ $editable: boolean, $editorState: boolean}>`\r\n    position: relative;\r\n    text-align: left;\r\n    z-index: ${props => props.$editorState ? 2 : 1};\r\n    cursor: ${props => props.$editable ? \"grab\" : \"inherit\"};\r\n    ${props => props.$editable &&\r\n    `&:hover ${TaskButtonWrapper},  ${TaskButtonWrapper}:focus-within {\r\n       width: 4rem;\r\n       height: calc(100% + 10px);\r\n       left: -10px;\r\n       top: -5px\r\n     }`}\r\n`;\r\n\r\nconst TaskBackground = styled.div<{$palette: NeumorphColorsType, $editable: boolean, $editorState: boolean}>`\r\n    padding: 15px 0;\r\n    background: ${props => props.$palette.background};\r\n    color: ${props => props.$palette.color};\r\n    display: flex;\r\n    position: relative;\r\n    border-radius: 10px;\r\n    z-index: 2;\r\n    transform: scale(${props => props.$editorState ? 1.3 : 1});\r\n    transition: transform .5s cubic-bezier(0.25, 0, 0, 1);\r\n    &:before {\r\n      border-radius: 10px;\r\n      content: \"\";\r\n      position: absolute;\r\n      top: 0;\r\n      bottom: 0;\r\n      left: 0;\r\n      right: 0;\r\n      z-index: -1;\r\n      box-shadow: ${props => props.$palette.littleShadows};\r\n    };\r\n    &:after {\r\n      border-radius: 7px;\r\n      content: \"\";\r\n      position: absolute;\r\n      top: 50%;\r\n      left: 50%;\r\n      transform: translateY(-50%) translateX(-50%);\r\n      z-index: 1;\r\n      width: calc(100% - 10px);\r\n      height: calc(100% - 10px);\r\n      box-shadow: ${props => props.$palette.innerLittleShadows};\r\n      opacity: 0;\r\n      transition: opacity .3s linear;\r\n    };\r\n    ${props => props.$editable && `\r\n        &:hover:after {opacity: 1};\r\n        &:hover ${TaskButtonWrapper},  ${TaskButtonWrapper}:focus-within {\r\n           width: 4rem;\r\n           height: 5rem;\r\n           left: -10px\r\n        }\r\n        &:active {\r\n           cursor: grabbing;\r\n           &:before {box-shadow: 10px 10px 20px rgba(0, 0, 0, .4)};\r\n           &:after {opacity: 1}\r\n        }`}\r\n    ${props => props.$editorState && `\r\n    &:after {opacity: 1}\r\n    &:before {box-shadow: 10px 10px 20px rgba(0, 0, 0, .4)}`}\r\n`;\r\n\r\nconst TaskText = styled.div<{ contentEditable: boolean}>`\r\n    position: relative;\r\n    padding: 10px;\r\n    outline: none;\r\n    display: inline-block;\r\n    min-width: 100px;\r\n    overflow-wrap: break-word;\r\n    -webkit-line-break: after-white-space;\r\n    font-family: 'Made Evolve Sans Light', sans-serif;\r\n    width: 100%;\r\n    font-size: 20px;\r\n    z-index: 3;\r\n    cursor: ${props => props.contentEditable ? 'text' : 'inherit'}\r\n`;\r\n\r\n\r\ntype PropsType = {\r\n    task: TaskType,\r\n    todoListId: string,\r\n    palette: NeumorphColorsType,\r\n};\r\n\r\nconst TodoListTask: React.FC<PropsType> = ({task, todoListId, palette}) => {\r\n\r\n    const editable = useSelector((state: AppStateType) => state.todoList.editable, shallowEqual);\r\n    const focusedStatus = useSelector((state: AppStateType) => state.interface.focusedStatus, shallowEqual);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const [editorState, setEditorState] = useState<boolean>(false);\r\n    const editTask = useCallback(() => {\r\n        setEditorState(true);\r\n        dispatch(interfaceActions.setPalette(palette));\r\n        dispatch(interfaceActions.setFocusedStatus(true))\r\n    }, [palette, dispatch]);\r\n\r\n    const textRef = useRef<HTMLDivElement>(null);\r\n    useEffect(() => {\r\n        if (editorState) textRef.current!.focus()\r\n    }, [editorState]);\r\n\r\n    const deleteTask = useCallback(() => {\r\n        dispatch(stateActions.deleteTask(todoListId, task.id))\r\n    }, [todoListId, task.id, dispatch]);\r\n\r\n    useLayoutEffect(() => {\r\n        textRef.current!.textContent = task.title;\r\n        if (task.title === '') editTask()\r\n    }, [task, editTask]);\r\n\r\n    const changeDoneStatus = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n        let newTask = {...task, status: e.currentTarget.checked ? 2 : 0};\r\n        dispatch(stateActions.changeTask(newTask))\r\n    }, [task, dispatch]);\r\n\r\n    const onBlurHandler = useCallback(() => {\r\n        const taskTitle = textRef.current!.textContent;\r\n        if (validate(taskTitle)) {\r\n            let newTask = {...task, title: taskTitle!};\r\n            dispatch(stateActions.changeTask(newTask));\r\n            setEditorState(false);\r\n            dispatch(interfaceActions.setFocusedStatus(false));\r\n        } else if (!validate(taskTitle) && task.title !== '') {\r\n            textRef.current!.textContent = task.title;\r\n            setEditorState(false);\r\n            dispatch(interfaceActions.setFocusedStatus(false));\r\n        } else {\r\n            dispatch(interfaceActions.setFocusedStatus(false));\r\n            deleteTask()\r\n        }\r\n    }, [task, deleteTask, dispatch]);\r\n\r\n    const onKeyDownHandler = useCallback((e: React.KeyboardEvent<HTMLDivElement>) => {\r\n        if (e.keyCode === 13 || e.keyCode === 27) {\r\n            e.preventDefault();\r\n            textRef.current!.blur()\r\n        }\r\n    }, []);\r\n\r\n    const captureClick = useDrag(({event}) => {\r\n        event?.stopPropagation();\r\n    });\r\n\r\n    /*const priority = task.priority === 0 ? 'Low' : 1 ? 'Middle' : 2 ?\r\n        'High' : 3 ? 'Urgently' : 'Later';*/\r\n\r\n    return (\r\n        <TaskWrapper $editable={editable && !focusedStatus} $editorState={editorState}>\r\n            <TaskButtons editTask={editTask} deleteTask={deleteTask} palette={palette}/>\r\n            <TaskBackground $editable={editable} $palette={palette} $editorState={editorState}>\r\n                <TaskCheckbox task={task} changeDoneStatus={changeDoneStatus} editable={editable}/>\r\n                <TaskText contentEditable={editorState} onKeyDown={e => onKeyDownHandler(e)}\r\n                          ref={textRef} onBlur={onBlurHandler} {...editorState && {...captureClick()}}/>\r\n            </TaskBackground>\r\n        </TaskWrapper>\r\n\r\n    );\r\n}\r\n\r\nexport default React.memo(TodoListTask, isEqual);\r\n\r\n","import React, {RefObject, useCallback, useEffect, useLayoutEffect, useRef, useState} from \"react\";\r\nimport TodoListTask from \"./TodoListTask\";\r\nimport {TaskType} from \"../../api/entities\";\r\nimport {animated, useSprings} from \"react-spring\";\r\nimport {useDrag, useHover} from \"react-use-gesture\";\r\nimport styled from \"styled-components/macro\";\r\nimport {shallowEqual, useDispatch, useSelector} from \"react-redux\";\r\nimport {AppStateType} from \"../../redux/store\";\r\nimport {movePos} from \"../../serviceFunctions/movePos\";\r\nimport isEqual from \"react-fast-compare\";\r\nimport {NeumorphColorsType} from \"../neumorphColors\";\r\nimport {interfaceActions} from \"../../redux/interfaceReducer\";\r\nimport {stateActions} from \"../../redux/stateReducer\";\r\nimport {isMobile} from \"react-device-detect\";\r\n\r\nexport const TasksWrapper = styled.div<{ $height: number }>`\r\n  user-select: none;\r\n  position: relative;\r\n  height: ${props => props.$height}px;\r\n  transition: height 0.3s cubic-bezier(0.25, 0, 0, 1) 0.2s;\r\n`;\r\n\r\nconst TaskWrapper = styled(animated.div)`\r\n  position: absolute;\r\n  width: 100%;\r\n  overflow: visible;\r\n  padding: 10px 0;\r\n  pointer-events: auto;\r\n  text-align: center;\r\n  font-size: 14.5px;\r\n`;\r\n\r\ntype PropsType = {\r\n    todoListId: string;\r\n    tasks: TaskType[],\r\n    setHeight: (height: number) => void,\r\n    palette: NeumorphColorsType,\r\n    setHoveredStatus: (status: boolean) => void\r\n};\r\n\r\nconst TasksContainer: React.FC<PropsType> = ({tasks, todoListId, setHeight, palette, setHoveredStatus}) => {\r\n\r\n    const editable = useSelector((state: AppStateType) => state.todoList.editable, shallowEqual);\r\n    const width = useSelector((store: AppStateType) => store.interface.width, shallowEqual);\r\n    const scrollableState = useSelector((store: AppStateType) => store.interface.scrollableState, shallowEqual);\r\n    const dispatch = useDispatch();\r\n\r\n    const settings = useCallback((order: Array<number>, down?: boolean, originalIndex?: number, y?: number): any => (index: number) => {\r\n            if (down && index === originalIndex && y !== undefined) {\r\n                const calcY = y > bounds.current[1] ? bounds.current[1] + (y - bounds.current[1]) * 0.1 : y < bounds.current[0] ?\r\n                    bounds.current[0] + (y - bounds.current[0]) * 0.1 : y;\r\n                return {\r\n                    scale: 1.2,\r\n                    zIndex: 2,\r\n                    y: initialYofDragged.current! + calcY,\r\n                    opacity: 1,\r\n                    immediate: (prop: string): boolean => prop === 'zIndex' || prop === 'y',\r\n                }\r\n            } else {\r\n                return {\r\n                    scale: 1,\r\n                    y: initialY.current.length < tasks.length ? initialY.current[order.indexOf(tasks.length-index-2)] || 0\r\n                        : initialY.current[order.indexOf(tasks.length-index-1)] || 0,\r\n                    zIndex: 'inherit',\r\n                    opacity: 1,\r\n                    immediate: false,\r\n                }\r\n            }\r\n        }, [tasks]);\r\n\r\n    const order = useRef<Array<number>>([]);\r\n    const initialYofDragged = useRef<number | null>(null);\r\n    const memoizedOrder = useRef<Array<number>>([]);\r\n    const memoizedTasksId = useRef<Array<string>>([]);\r\n    const initialY = useRef<Array<number>>([]);\r\n    const heights = useRef<Array<number>>([]);\r\n    const bounds = useRef<Array<number>>([]);\r\n    const elementsBorder = useRef<Array<{topBorder: number, center: number, bottomBorder: number}>>([]);\r\n    const elementsRef = useRef<Array<RefObject<HTMLDivElement>>>([]);\r\n    const [height, setCurrentHeight] = useState<number>(0)\r\n\r\n    const [springs, setSprings] = useSprings(tasks.length, settings(order.current), [tasks]);\r\n\r\n    const [forceRerender, rerender] = useState<number>(0);\r\n    useEffect(() => {\r\n        elementsRef.current = tasks.map(() => React.createRef());\r\n        rerender(Math.random())\r\n    }, [tasks]);\r\n\r\n    const calcPositions = useCallback((heightsArray: Array<number>) => {\r\n        initialY.current = heightsArray.map((height, index) => {\r\n            return heightsArray.reduce((total, item, i) => {\r\n                if (i !== 0 && i <= index) {\r\n                    total += heightsArray[i - 1]\r\n                }\r\n                return total\r\n            }, 0)\r\n        });\r\n        elementsBorder.current = initialY.current.map((item, i) => ({\r\n            topBorder: item,\r\n            center: item + heightsArray[i]/2,\r\n            bottomBorder: item + heightsArray[i]\r\n        }));\r\n    }, []);\r\n\r\n    useLayoutEffect(() => {\r\n        if (!editable && tasks.length !== 0) {\r\n            order.current = tasks.map((_, i) => i);\r\n            heights.current = elementsRef.current.map(ref => ref.current!.offsetHeight);\r\n        }\r\n        if (editable && tasks.length === 1) {\r\n            order.current = [0]\r\n        }\r\n        if (editable && tasks.length > memoizedTasksId.current.length && elementsRef.current.length !== 0) {\r\n            order.current = [0, ...order.current.map(item => item + 1)];\r\n            heights.current = [elementsRef.current[0].current!.offsetHeight, ...heights.current];\r\n        }\r\n        if (editable && tasks.length < memoizedTasksId.current.length) {\r\n            const deletedTaskIndex = memoizedTasksId.current.findIndex(taskId => tasks.findIndex(item => item.id === taskId) === -1);\r\n            const deletedOrder = order.current.indexOf(deletedTaskIndex);\r\n            order.current = order.current.filter(index => index !== deletedTaskIndex)\r\n                .map(item => item > deletedTaskIndex ? item - 1 : item);\r\n            heights.current = heights.current.filter((_, index) => index !== deletedOrder);\r\n        }\r\n        if (tasks.length === memoizedTasksId.current.length) {\r\n            heights.current = elementsRef.current.map(ref => ref.current!.offsetHeight);\r\n        }\r\n        calcPositions(heights.current);\r\n        setSprings(settings(order.current));\r\n        const heightsSum = heights.current.reduce((sum, current) => sum + current, 0);\r\n        setCurrentHeight(heightsSum);\r\n        setHeight(heightsSum);\r\n        memoizedTasksId.current = tasks.map(item => item.id);\r\n    }, [forceRerender, width, calcPositions, setHeight, setSprings, setCurrentHeight, editable, tasks, settings]);\r\n\r\n    const getNewIndex = useCallback((index: number, y: number) => {\r\n        if (y > 0) {\r\n            let newIndex = index;\r\n            let height = 0;\r\n            while (y > height + heights.current[index + 1] / 2) {\r\n                newIndex += 1;\r\n                height += heights.current[index + 1];\r\n            }\r\n            return newIndex > heights.current.length - 1 ? heights.current.length - 1 : newIndex;\r\n        }\r\n        if (y < 0) {\r\n            let newIndex = index;\r\n            let height = 0;\r\n            while (Math.abs(y) > height + heights.current[index - 1] / 2) {\r\n                newIndex -= 1;\r\n                height += heights.current[index - 1];\r\n            }\r\n            return newIndex < 0 ? 0 : newIndex;\r\n        }\r\n        return index\r\n    }, [])\r\n\r\n    const gesture = useDrag(({args: [originalIndex, trueIndex], down, movement: [, y], event}) => {\r\n        if (isMobile && scrollableState) return;\r\n        event?.stopPropagation();\r\n        const curIndex = order.current.indexOf(trueIndex);\r\n        if (initialYofDragged.current === null) {\r\n            initialYofDragged.current = initialY.current[curIndex];\r\n            bounds.current = [-initialYofDragged.current, initialY.current[tasks.length-1] - initialYofDragged.current];\r\n            dispatch(interfaceActions.setFocusedStatus(true))\r\n        }\r\n        if (!initialYofDragged.current) initialYofDragged.current = initialY.current[curIndex];\r\n        const curRow = getNewIndex(curIndex, y);//  \r\n        const newOrder = movePos(order.current, curIndex, curRow);//  \r\n        const newHeights = movePos(heights.current, curIndex, curRow);//  \r\n        calcPositions(newHeights);\r\n        setSprings(settings(newOrder, down, originalIndex, y));\r\n        if (!down) {\r\n            order.current = newOrder;\r\n            heights.current = newHeights;\r\n            initialYofDragged.current = null;\r\n            if (!isEqual(order.current, memoizedOrder.current)) {\r\n                const newOrder = order.current.map(item => tasks[item].id)\r\n                dispatch(stateActions.swapTasks(todoListId, newOrder))\r\n            }\r\n            dispatch(interfaceActions.setFocusedStatus(false))\r\n        }\r\n    }, {filterTaps: true});\r\n\r\n    const hovering = useHover(({hovering}) => {\r\n        if (hovering) setHoveredStatus(true);\r\n        if (!hovering) setHoveredStatus(false)\r\n    });\r\n\r\n    return (\r\n        <TasksWrapper $height={height} {...editable && {...hovering()}}>\r\n            {tasks.map((task, i) =>\r\n                <TaskWrapper {...editable && {...gesture(tasks.length-i-1, i)}} key={task.id} style={springs[tasks.length-i-1]}\r\n                             ref={elementsRef.current[i]}>\r\n                    <TodoListTask task={task} todoListId={todoListId} palette={palette}/>\r\n                </TaskWrapper>)}\r\n        </TasksWrapper>\r\n    );\r\n}\r\n\r\nexport default React.memo(TasksContainer, isEqual);\r\n\r\n","import React, {useEffect, useLayoutEffect, useRef} from \"react\";\r\nimport '../../App.css';\r\nimport styled from \"styled-components/macro\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport { NeumorphColorsType } from \"../neumorphColors\";\r\nimport {validate} from \"../../serviceFunctions/validate\";\r\nimport {stateActions} from \"../../redux/stateReducer\";\r\nimport {interfaceActions} from \"../../redux/interfaceReducer\";\r\nimport {useDrag} from \"react-use-gesture\";\r\n\r\nconst ListTitle = styled.div<{$palette: NeumorphColorsType, contentEditable: boolean}>`\r\n  background-color: ${props => props.$palette.background};\r\n  color: ${props => props.$palette.color};\r\n  position: relative;\r\n  font-size: 30px;\r\n  text-align: center;\r\n  padding: 15px 10px;\r\n  margin: 0 auto 10px auto;\r\n  width: 100%;\r\n  cursor: ${props => props.contentEditable ? 'text' : 'inherit'};\r\n  border-radius: 10px;\r\n  outline: none;\r\n  font-family: 'MADE Evolve Bold', sans-serif;\r\n  display: inline-block;\r\n  overflow-wrap: break-word;\r\n  -webkit-line-break: after-white-space;\r\n  transform: scale(${props => props.contentEditable ? 1.3 : 1});\r\n  transition: transform .5s cubic-bezier(0.25, 0, 0, 1);\r\n  &:before {\r\n      border-radius: 10px;\r\n      content: \"\";\r\n      position: absolute;\r\n      top: 0;\r\n      bottom: 0;\r\n      left: 0;\r\n      right: 0;\r\n      box-shadow: ${props => props.$palette.innerShadows};\r\n  }\r\n`;\r\n\r\ntype PropsType = {\r\n    listTitle: string,\r\n    id: string,\r\n    switchTitleMode: (state: boolean) => void,\r\n    isTitleEditable: boolean,\r\n    palette: NeumorphColorsType,\r\n    deleteTodoList: () => void\r\n};\r\n\r\nconst TodoListTitle: React.FC<PropsType> = ({listTitle, id, isTitleEditable,\r\n                                                deleteTodoList, switchTitleMode, palette}) => {\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        if (ref.current && isTitleEditable) {\r\n            ref.current.focus();\r\n            dispatch(interfaceActions.setFocusedStatus(true))\r\n        }\r\n    }, [isTitleEditable, dispatch]);\r\n\r\n    const ref = useRef<HTMLDivElement>(null);\r\n    useLayoutEffect(() => {\r\n        if (ref.current) {\r\n            ref.current.textContent = listTitle;\r\n            if (listTitle === '') switchTitleMode(true)\r\n        }\r\n    }, [listTitle, switchTitleMode]);\r\n\r\n    const onKeyPressHandler = (e: React.KeyboardEvent) => {\r\n        if (e.keyCode === 13 || e.keyCode === 27 ) {\r\n            e.preventDefault();\r\n            ref.current!.blur()\r\n        }\r\n    };\r\n    const onBlurHandler = () => {\r\n        if (validate(ref.current!.textContent)) {\r\n            dispatch(stateActions.changeTodoListTitle(id, ref.current!.textContent!));\r\n            switchTitleMode(false);\r\n            dispatch(interfaceActions.setFocusedStatus(false));\r\n        } else if (!validate(ref.current!.textContent) && listTitle !== '') {\r\n            ref.current!.textContent = listTitle;\r\n            switchTitleMode(false);\r\n            dispatch(interfaceActions.setFocusedStatus(false));\r\n        } else {\r\n            dispatch(interfaceActions.setFocusedStatus(false));\r\n            deleteTodoList()\r\n        }\r\n    };\r\n\r\n    const captureClick = useDrag(({event}) => {\r\n        event?.stopPropagation();\r\n    });\r\n\r\n    return (\r\n        <ListTitle contentEditable={isTitleEditable} ref={ref} onKeyDown={e => onKeyPressHandler(e)}\r\n                   onBlur={onBlurHandler} $palette={palette} {...isTitleEditable && {...captureClick()}}/>\r\n    );\r\n}\r\n\r\nexport default React.memo(TodoListTitle);\r\n\r\n","import React from \"react\";\r\nimport '../../App.css';\r\nimport styled from \"styled-components/macro\";\r\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\r\nimport { NeumorphColorsType } from \"../neumorphColors\";\r\n\r\nexport const ButtonWrapper = styled.div`\r\n    z-index: 0;\r\n    position: absolute;\r\n    top: 7px;\r\n    left: 7px;\r\n    border-radius: 100%;\r\n    width: 0;\r\n    height: 0;\r\n    opacity: 0;\r\n    transform: translate(-50%, -50%);\r\n    transition: opacity .6s cubic-bezier(0.25, 0, 0, 1), width 0s linear .6s, height 0s linear .6s;\r\n`;\r\n\r\nexport const Button = styled.div<{ styles: NeumorphColorsType }>`\r\n    display: grid;\r\n    place-items: center;\r\n    position: absolute;\r\n    width: 40px;\r\n    height: 40px;\r\n    border-radius: 100%;\r\n    cursor: pointer;\r\n    font-size: 20px;\r\n    background: ${props => props.styles.background};\r\n    color: ${props => props.styles.color};\r\n    box-shadow: ${props => props.styles.littleShadows};;\r\n    transition: .25s cubic-bezier(0.25, 0, 0, 1);\r\n    &:hover {\r\n        background-color: ${props => props.styles.color};\r\n        color: ${props => props.styles.background};\r\n    }\r\n    &:first-child:nth-last-child(3),\r\n        &:first-child:nth-last-child(3) ~ * {\r\n            &:nth-child(1) {\r\n                left: 50px;\r\n                top: 0;\r\n            }\r\n            &:nth-child(2) {\r\n                left: 0;\r\n                top: 0;\r\n            }\r\n            &:nth-child(3) {\r\n                left: 0;\r\n                top: 50px;\r\n            }\r\n        }\r\n`;\r\n\r\ntype PropsType = {\r\n    colors: NeumorphColorsType,\r\n    deleteTodoList: () => void,\r\n    addTask: () => void,\r\n    editList: (state: boolean) => void,\r\n};\r\n\r\nconst ContextButtons: React.FC<PropsType> = ({colors, deleteTodoList, addTask, editList}) => {\r\n\r\n    return (\r\n        <ButtonWrapper>\r\n            <Button styles={colors}\r\n                    onClick={addTask}>\r\n                <FontAwesomeIcon icon=\"plus\"/>\r\n            </Button>\r\n            <Button styles={colors}\r\n                    onClick={deleteTodoList}>\r\n                <FontAwesomeIcon icon=\"trash\"/>\r\n            </Button>\r\n            <Button styles={colors}\r\n                    onClick={() => editList(true)}>\r\n                <FontAwesomeIcon icon=\"edit\"/>\r\n            </Button>\r\n        </ButtonWrapper>\r\n    );\r\n}\r\n\r\nexport default React.memo(ContextButtons);\r\n\r\n","import React, {useCallback, useRef, useState} from \"react\";\r\nimport TodoListTasks from '../Tasks/TasksContainer';\r\nimport TodoListTitle from \"./TodoListTitle\";\r\nimport {shallowEqual, useDispatch, useSelector} from 'react-redux';\r\nimport {TaskType} from \"../../api/entities\";\r\nimport styled from \"styled-components/macro\";\r\nimport {AppStateType} from \"../../redux/store\";\r\nimport {useHover} from \"react-use-gesture\";\r\nimport ContextButtons, {ButtonWrapper} from \"./ContextButtons\";\r\nimport isEqual from \"react-fast-compare\";\r\nimport {defaultPalette, neumorphColors} from \"../neumorphColors\";\r\nimport {stateActions} from \"../../redux/stateReducer\";\r\nimport {interfaceActions} from \"../../redux/interfaceReducer\";\r\n\r\nconst SingleListWrapper = styled.div<{ $editable: boolean, $closeLookState: boolean, $animationInProgress: boolean }>`\r\n  position: relative;\r\n  transform-style: preserve-3d;\r\n  transform-origin: 50% 50%;\r\n  backface-visibility: hidden;\r\n  overflow: visible;\r\n  padding: 35px;\r\n  cursor: ${props => props.$editable || props.$closeLookState ? 'inherit' : 'pointer'};\r\n  &:hover {\r\n      z-index: 5;\r\n  }\r\n  ${props => !props.$editable && !props.$closeLookState && !props.$animationInProgress &&\r\n    `&:hover ${ListOuterLayer}{\r\n        transform: translateZ(100px)\r\n     }\r\n     &:hover ${ListShadow}{\r\n        box-shadow: 0 0 35px 20px rgba(0, 0, 0, 0.8);\r\n        opacity: 0.5\r\n     }`}\r\n`;\r\n\r\nconst ListOuterLayer = styled.div<{$palette: number, $editable: boolean, $closeLookState: boolean, $isTasksHovered: boolean, $focusedStatus: boolean}>`\r\n  cursor: ${props => props.$editable ? 'grab' : 'inherit'};\r\n  border-radius: 30px;\r\n  padding: 35px;\r\n  transform-style: preserve-3d;\r\n  transform-origin: 50% 100%;\r\n  background: ${props => neumorphColors[props.$palette].concaveBackground};\r\n  position: relative;\r\n  transform: translateZ(0);\r\n  transition: transform .6s cubic-bezier(0.25, 0, 0, 1);\r\n  &:before {\r\n      border-radius: 30px;\r\n      content: \"\";\r\n      position: absolute;\r\n      top: 0;\r\n      z-index: -1;\r\n      bottom: 0;\r\n      left: 0;\r\n      right: 0;\r\n      transition: opacity .3s linear;\r\n      box-shadow: ${props => neumorphColors[props.$palette].shadows};\r\n      opacity: ${props => props.$closeLookState ? 1 : 0};\r\n  };\r\n  ${props => props.$editable && !props.$focusedStatus && !props.$isTasksHovered &&\r\n    `&:hover ${ButtonWrapper},  ${ButtonWrapper}:hover {\r\n           width: 120px;\r\n           height: 120px;\r\n           opacity: 1;\r\n           transition: opacity .6s cubic-bezier(0.25, 0, 0, 1);\r\n       }\r\n       &:hover ${ListInnerLayer} {\r\n           opacity: 1\r\n       }`};\r\n  &:after {\r\n      border-radius: 30px;\r\n      content: \"\";\r\n      position: absolute;\r\n      top: 0;\r\n      z-index: -1;\r\n      bottom: 0;\r\n      left: 0;\r\n      right: 0;\r\n      box-shadow: 14px 14px 35px rgba(0, 0, 0, .4);\r\n      transition: opacity .3s linear;\r\n      opacity: ${props => !props.$closeLookState ? 1 : 0};\r\n  };\r\n  ${props => props.$editable && `\r\n    &:hover:after {opacity: 0};\r\n    &:hover:before {opacity: 1};\r\n    &:active {\r\n        cursor: grabbing;\r\n        &:after {opacity: 1};\r\n        &:before {opacity: 0};\r\n        ${ListInnerLayer} {opacity: 1}\r\n    }`}\r\n`;\r\n\r\nconst ListInnerLayer = styled.div<{ $palette: number }>`\r\n  position: absolute;\r\n  border-radius: 20px;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translateX(-50%) translateY(-50%);\r\n  height: calc(100% - 20px);\r\n  width: calc(100% - 20px);\r\n  padding: 25px;\r\n  box-shadow: ${props => neumorphColors[props.$palette].innerShadows};\r\n  opacity: 0;\r\n  transition: opacity .3s linear;\r\n`;\r\n\r\nconst ListShadow = styled.div<{ $editable: boolean, $closeLookState: boolean }>`\r\n  display: ${props => props.$editable || props.$closeLookState ? 'none' : 'block'};\r\n  position: absolute;\r\n  z-index: -2;\r\n  width: calc(100% - 80px);\r\n  height: calc(100% - 80px);\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translateX(-50%) translateY(-50%);\r\n  border-radius: 30px;\r\n  background: rgba(0, 0, 0, 0.7);\r\n  box-shadow: 0 0 0 0 rgba(0, 0, 0, 0.8);\r\n  opacity: 0.7;\r\n  transition-property: box-shadow, opacity;\r\n  transition-duration: .6s;\r\n  transition-timing-function: cubic-bezier(0.25, 0, 0, 1);\r\n`;\r\n\r\n\r\ntype PropsType = {\r\n    id: string,\r\n    listTitle: string,\r\n    listTasks?: TaskType[],\r\n    paletteIndex: number,\r\n    setNewHeights: (height: number, id: string) => void,\r\n    deleteList: (id: string) => void,\r\n    currentLook: boolean\r\n};\r\n\r\nconst TodoList: React.FC<PropsType> = ({\r\n                                           id, listTitle, listTasks, paletteIndex,\r\n                                           setNewHeights, deleteList, currentLook\r\n                                       }) => {\r\n\r\n    const editable = useSelector((state: AppStateType) => state.todoList.editable, shallowEqual);\r\n    const focusedStatus = useSelector((state: AppStateType) => state.interface.focusedStatus, shallowEqual);\r\n    const closeLook = useSelector((state: AppStateType) => state.interface.closeLookState, shallowEqual);\r\n    const animationInProgress = useSelector((state: AppStateType) => state.interface.animationInProgress, shallowEqual);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const [isTasksHovered, setTasksHoveredStatus] = useState<boolean>(false);\r\n    const setHoveredStatus = useCallback((status: boolean) => {\r\n        setTasksHoveredStatus(status)\r\n    }, []);\r\n\r\n    const currHeight = useRef<number>(0);\r\n    const ref = useRef<HTMLDivElement>(null);\r\n    const setHeight = useCallback((height: number) => {\r\n        if (currHeight.current === 0 && ref.current) {\r\n            currHeight.current = ref.current.offsetHeight\r\n        }\r\n        if (currHeight.current !== height) {\r\n            setNewHeights(height + currHeight.current, id);\r\n        }\r\n    }, [id, setNewHeights]);\r\n\r\n    const addTask = useCallback(() => {\r\n        const taskId = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n            let r = Math.random() * 16 | 0, v = c === 'x' ? r : ((r & 0x3) | 0x8);\r\n            return v.toString(16);\r\n        });\r\n        const newTask = {\r\n            title: '',\r\n            id: taskId,\r\n            todoListId: id,\r\n        }\r\n        dispatch(stateActions.addTask(newTask, id));\r\n    }, [id, dispatch]);\r\n\r\n    const deleteTodoList = useCallback(() => {\r\n        deleteList(id)\r\n        dispatch(stateActions.deleteTodoList(id))\r\n    }, [id, dispatch, deleteList]);\r\n\r\n    const [filterValue] = useState<string>('All');\r\n   /* const changeFilter = (newFilterValue: string) => {\r\n        setFilterValue(newFilterValue)\r\n    };*/\r\n    const tasks = listTasks ? listTasks.filter(t => {\r\n        if (filterValue === \"Active\") {\r\n            return t.status === 0;\r\n        }\r\n        if (filterValue === \"Completed\") {\r\n            return t.status === 2;\r\n        }\r\n        return true;\r\n    }) : [];\r\n\r\n    //hover Effect\r\n\r\n    const bind = useHover(({hovering}) => {\r\n        if (hovering && !closeLook && !focusedStatus) {\r\n            dispatch(interfaceActions.setPalette(neumorphColors[paletteIndex]));\r\n        }\r\n        if (!hovering && !closeLook && !focusedStatus) {\r\n            dispatch(interfaceActions.setPalette(defaultPalette));\r\n        }\r\n    });\r\n    //close look animations\r\n\r\n    const [isTitleEditable, setTitleEditMode] = useState<boolean>(false);\r\n    const switchTitleMode = useCallback((state: boolean) => {\r\n        setTitleEditMode(state)\r\n    }, []);\r\n\r\n    return (\r\n        <SingleListWrapper {...bind()} ref={ref} $editable={editable} $closeLookState={currentLook}\r\n                           $animationInProgress={animationInProgress}>\r\n            <ListShadow $editable={editable} $closeLookState={currentLook}/>\r\n            <ListOuterLayer $palette={paletteIndex} $editable={editable} $isTasksHovered={isTasksHovered}\r\n                            $closeLookState={currentLook} $focusedStatus={focusedStatus}>\r\n                <ListInnerLayer $palette={paletteIndex}/>\r\n                <ContextButtons colors={neumorphColors[paletteIndex]} deleteTodoList={deleteTodoList}\r\n                                addTask={addTask} editList={switchTitleMode}/>\r\n                <TodoListTitle listTitle={listTitle} id={id} isTitleEditable={isTitleEditable}\r\n                               deleteTodoList={deleteTodoList}\r\n                               switchTitleMode={switchTitleMode} palette={neumorphColors[paletteIndex]}/>\r\n                <TodoListTasks todoListId={id} tasks={tasks} setHeight={setHeight}\r\n                               palette={neumorphColors[paletteIndex]}\r\n                               setHoveredStatus={setHoveredStatus}/>\r\n                {/* <TodoListFooter filterValue={filterValue} changeFilter={changeFilter}/>*/}\r\n            </ListOuterLayer>\r\n        </SingleListWrapper>\r\n    );\r\n}\r\n\r\nexport default React.memo(TodoList, isEqual);\r\n","import React from \"react\";\r\nimport styled from \"styled-components/macro\";\r\nimport {animated, SpringValue} from \"react-spring\";\r\nimport {shallowEqual, useSelector} from \"react-redux\";\r\nimport {AppStateType} from \"../../../redux/store\";\r\nimport {NeumorphColorsType} from \"../../neumorphColors\";\r\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\r\nimport isEqual from \"react-fast-compare\";\r\nimport {isMobile} from \"react-device-detect\";\r\n\r\nconst CloseButtonAnimatedWrapper = styled(animated.div)`\r\n  position: absolute;\r\n  border-radius: 100%;\r\n`;\r\n\r\nconst CloseButton = styled(animated.div)<{ $palette: NeumorphColorsType }>`\r\n    display: grid;\r\n    place-items: center;\r\n    width: ${isMobile ? 60 : 40}px;\r\n    height: ${isMobile ? 60 : 40}px;\r\n    border-radius: 100%;\r\n    cursor: pointer;\r\n    font-size: 20px;\r\n    background: ${props => props.$palette.background};\r\n    color: ${props => props.$palette.color};\r\n    box-shadow: ${props => props.$palette.littleShadows};;\r\n    transition: .25s cubic-bezier(0.25, 0, 0, 1);\r\n    &:hover {\r\n        background: ${props => props.$palette.color};\r\n        color: ${props => props.$palette.background};\r\n    }\r\n`;\r\n\r\ntype PropsType ={\r\n    closeButtonAnimation: {x: SpringValue<number>, y: SpringValue<number>, opacity: SpringValue<number>, display: SpringValue<string>},\r\n    returnFromCloseLook: () => Promise<void>\r\n}\r\n\r\nconst ClosingButton: React.FC<PropsType> = ({closeButtonAnimation, returnFromCloseLook}) => {\r\n\r\n    const currentPalette = useSelector((state: AppStateType) => state.interface.currentPaletteIndex, shallowEqual);\r\n\r\n    return (\r\n        <CloseButtonAnimatedWrapper onClick={returnFromCloseLook} style={closeButtonAnimation}>\r\n            <CloseButton $palette={currentPalette}>\r\n                <FontAwesomeIcon icon=\"times\"/>\r\n            </CloseButton>\r\n        </CloseButtonAnimatedWrapper>\r\n    )\r\n};\r\n\r\nexport default React.memo(ClosingButton, isEqual)","import React, {useCallback, useEffect, useMemo, useRef, useState} from \"react\";\r\nimport {animated, useSprings, SpringStartFn, useSpring} from \"react-spring\";\r\nimport {swap} from \"../../../serviceFunctions/swap\";\r\nimport {useDrag} from \"react-use-gesture\";\r\nimport styled from \"styled-components/macro\";\r\nimport TodoList from \"../../SingleToDoList/TodoList\";\r\nimport {defaultPalette, neumorphColors} from \"../../neumorphColors\";\r\nimport {shallowEqual, useDispatch, useSelector} from \"react-redux\";\r\nimport {AppStateType} from \"../../../redux/store\";\r\nimport isEqual from \"react-fast-compare\";\r\nimport ClosingButton from \"./CloseButton\";\r\nimport {interfaceActions} from \"../../../redux/interfaceReducer\";\r\nimport {stateActions} from \"../../../redux/stateReducer\";\r\nimport {isMobile} from \"react-device-detect\";\r\n\r\n\r\nconst TodoListContainer = styled(animated.div)<{ $width: number }>` \r\n  transform-style: preserve-3d;\r\n  position: absolute;\r\n  width: ${props => props.$width}px;\r\n`;\r\n\r\ntype PropsType = {\r\n    setWrapperAnimation: SpringStartFn<{ x: string, rotateX: number, rotateZ: number, y: number }>,\r\n    scrollByListDrugging: (direction: string) => void,\r\n    setCloseLookState: (height: number) => void,\r\n    returnFromCloseLookState: () => void,\r\n    switchScrollBar: (visibility: boolean) => void,\r\n}\r\n\r\ntype GridItemsType = {\r\n    x: number,\r\n    y: number,\r\n    height: number,\r\n    id: string,\r\n    rightX: number,\r\n    botY: number,\r\n    horizontalCenter: number,\r\n    verticalCenter: number,\r\n    index: number\r\n}\r\n\r\nconst AllListsContainer: React.FC<PropsType> = ({\r\n                                              setWrapperAnimation, scrollByListDrugging,\r\n                                              setCloseLookState, returnFromCloseLookState, switchScrollBar\r\n                                          }) => {\r\n    //resize logic\r\n    const editable = useSelector((store: AppStateType) => store.todoList.editable, shallowEqual);\r\n    const todoLists = useSelector((store: AppStateType) => store.todoList.todoLists, isEqual);\r\n    const width = useSelector((store: AppStateType) => store.interface.width, shallowEqual);\r\n    const interfaceHeight = useSelector((store: AppStateType) => store.interface.interfaceHeight, shallowEqual);\r\n    const scrollableState = useSelector((state: AppStateType) => state.interface.scrollableState, shallowEqual);\r\n    const focusedStatus = useSelector((state: AppStateType) => state.interface.focusedStatus, shallowEqual);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    //state-like mutable container\r\n    const gridItems = useRef<Array<GridItemsType>>([]);\r\n\r\n    const [springs, setSprings] = useSprings(todoLists.length, i => {\r\n        if (gridItems.current.length === 0) return {\r\n            x: 0, y: 0, zIndex: 3, opacity: 1, display: 'block'\r\n        };\r\n        const currentSettings = gridItems.current.find((list) => list.index === todoLists.length - 1 - i);\r\n        return {\r\n            x: currentSettings ? currentSettings.x : 0,\r\n            y: currentSettings ? currentSettings.y : 0,\r\n            opacity: 1,\r\n            zIndex: 3,\r\n            display: 'block',\r\n        }\r\n    })\r\n\r\n// child height calculation logic\r\n    const columns = useMemo(() => {\r\n        return width >= 1700 ? 4 : width >= 1100 ? 3 : width >= 700 ? 2 : 1\r\n    }, [width]);\r\n    const currWidth = useMemo(() => width / columns, [width, columns]);\r\n\r\n    const recalculateMeasures = useCallback(() => {\r\n        const newHeights = new Array(columns).fill(0);\r\n        gridItems.current = gridItems.current.map((item, i) => {\r\n            const heightInMeasuredArray = temporaryValue.current.find(list => item.id === list.id);\r\n            const height = heightInMeasuredArray ? heightInMeasuredArray.height : 0;\r\n            const column = i % columns;\r\n            const x = currWidth * column;\r\n            const y = (newHeights[column] += height) - height;\r\n            const rightX = x + currWidth;\r\n            const botY = y + height;\r\n            const horizontalCenter = x + currWidth / 2;\r\n            const verticalCenter = y + height / 2;\r\n            return {...item, x, y, rightX, botY, horizontalCenter, verticalCenter, height}\r\n        });\r\n        if (Math.max(...newHeights) !== height.current) {\r\n            height.current = Math.max(...newHeights);\r\n            dispatch(interfaceActions.setHeight(height.current));\r\n        }\r\n    }, [currWidth, columns, dispatch]);\r\n\r\n\r\n    const temporaryValue = useRef<Array<{ height: number, id: string }>>([]);\r\n    const setNewHeights = useCallback((height: number, id: string) => {\r\n        const findHeight = temporaryValue.current.findIndex(item => item.id === id);\r\n        const newHeightsArray = findHeight === -1 ? [...temporaryValue.current, {height, id}]\r\n            : temporaryValue.current.map((item, i) => {\r\n                if (i === findHeight) return {height, id};\r\n                return item\r\n            });\r\n        temporaryValue.current = newHeightsArray\r\n        if (newHeightsArray.length === todoLists.length) {\r\n            recalculateMeasures();\r\n            setSprings(i => {\r\n                const currentSettings = gridItems.current.find((list) => list.index === todoLists.length - 1 - i)!;\r\n                if (currentSettings) return {x: currentSettings.x, y: currentSettings.y};\r\n                return {to: false}\r\n            })\r\n        }\r\n    }, [todoLists, setSprings, recalculateMeasures]);\r\n\r\n    const deleteList = useCallback((id: string) => {\r\n        temporaryValue.current = temporaryValue.current.filter(item => item.id !== id)\r\n    }, []);\r\n\r\n    const height = useRef<number>(0);\r\n\r\n//swap animation logic\r\n    useEffect(() => {\r\n        if (!editable && gridItems.current.length === 0) {\r\n            const newHeights = new Array(columns).fill(0);\r\n            gridItems.current = todoLists.map(\r\n                (item, i) => {\r\n                    const heightInMeasuredArray = temporaryValue.current.find(list => item.id === list.id);\r\n                    const height = heightInMeasuredArray ? heightInMeasuredArray.height : 0;\r\n                    const column = i % columns;\r\n                    const x = currWidth * column;\r\n                    const y = (newHeights[column] += height) - height\r\n                    const rightX = x + currWidth;\r\n                    const botY = y + height;\r\n                    const horizontalCenter = x + currWidth / 2;\r\n                    const verticalCenter = y + height / 2;\r\n                    const index = i;\r\n                    return {x, y, height, id: item.id, botY, rightX, horizontalCenter, verticalCenter, index}\r\n                });\r\n            height.current = Math.max(...newHeights);\r\n            dispatch(interfaceActions.setHeight(height.current));\r\n        }\r\n        if (editable && gridItems.current.length < todoLists.length) {\r\n            gridItems.current = [{\r\n                x: 0, y: 0, height: 0, id: todoLists[0].id, botY: 0,\r\n                rightX: 0, horizontalCenter: 0, verticalCenter: 0, index: 0\r\n            }, ...gridItems.current].map((item, i) => {\r\n                if (i === 0) return item;\r\n                return {...item, index: item.index + 1}\r\n            })\r\n            recalculateMeasures()\r\n        }\r\n        if (editable && gridItems.current.length > todoLists.length) {\r\n            const deletedListIndex = gridItems.current.findIndex(item =>\r\n                todoLists.findIndex(list => list.id === item.id) === -1);\r\n            const deletedList = gridItems.current[deletedListIndex];\r\n            gridItems.current = gridItems.current.map((item) => {\r\n                const index = item.index > deletedList.index ? item.index - 1 : item.index;\r\n                return {...item, index}\r\n            }).filter((item, i) => i !== deletedListIndex);\r\n            recalculateMeasures()\r\n        }\r\n        if (gridItems.current.length === todoLists.length) recalculateMeasures();\r\n        setSprings(i => {\r\n            const currentSettings = gridItems.current.find((list) => list.index === todoLists.length - 1 - i)!;\r\n            return {x: currentSettings.x, y: currentSettings.y}\r\n        })\r\n    }, [todoLists, columns, currWidth, dispatch, editable, recalculateMeasures, setSprings]);\r\n\r\n    useEffect(() => {\r\n        recalculateMeasures();\r\n        setSprings(i => {\r\n            const currentSettings = gridItems.current.find((list) => list.index === todoLists.length - 1 - i)!;\r\n            return {x: currentSettings.x, y: currentSettings.y}\r\n        });\r\n    }, [width, columns, currWidth, recalculateMeasures, todoLists.length, setSprings]);\r\n\r\n    const reorder = useCallback((oldIndex: number, newIndex: number) => {\r\n        const newHeights = new Array(columns).fill(0);\r\n        gridItems.current = swap(gridItems.current, oldIndex, newIndex).map((item, i) => {\r\n            const column = i % columns;\r\n            const x = currWidth * column;\r\n            const y = (newHeights[column] += item.height) - item.height;\r\n            const rightX = x + currWidth;\r\n            const botY = y + item.height;\r\n            const horizontalCenter = x + currWidth / 2;\r\n            const verticalCenter = y + item.height / 2;\r\n            return {...item, x, y, rightX, botY, horizontalCenter, verticalCenter}\r\n        });\r\n        if (Math.max(...newHeights) !== height.current) {\r\n            height.current = Math.max(...newHeights);\r\n            dispatch(interfaceActions.setHeight(height.current));\r\n        }\r\n    }, [currWidth, columns, dispatch]);\r\n\r\n    const calculatePositions = useCallback((x: number, y: number) => {\r\n        const xPos = currItem.current.horizontalCenter + x;\r\n        const yPos = currItem.current.verticalCenter + y;\r\n        const halfHeight = currItem.current.height / 2;\r\n        let i = gridItems.current.findIndex(item => {\r\n            return (item.x < xPos && item.rightX > xPos && item.verticalCenter + halfHeight > yPos && item.verticalCenter - halfHeight < yPos)\r\n        });\r\n        return i < todoLists.length && i >= 0 ? i : null;\r\n    }, [todoLists]);\r\n\r\n    const setActualSprings = useCallback((x: number, y: number, springsIndex: number) => {\r\n        setSprings(i => {\r\n            if (i === springsIndex) {\r\n                return {\r\n                    x: currItem.current.x + x,\r\n                    y: currItem.current.y + y,\r\n                    zIndex: 4,\r\n                    config: {tension: 200, clamp: true},\r\n                    immediate: (n: string): boolean => n === 'zIndex'\r\n                }\r\n            }\r\n            const currentSettings = gridItems.current.find((list) => list.index === todoLists.length - 1 - i)!;\r\n            return {x: currentSettings.x, y: currentSettings.y}\r\n        })\r\n    }, [todoLists, setSprings]);\r\n\r\n    const currItem = useRef<GridItemsType>(null as unknown as GridItemsType);\r\n    const bounds = useRef<{ left: number, right: number, top: number, bottom: number, pageTop: number, pageBottom: number }>({\r\n        left: 0, right: 0, top: 0, bottom: 0, pageTop: 0, pageBottom: 0\r\n    });\r\n    const eventCoords = useRef<{ offsetX: number, offsetY: number, clientX: number, clientY: number } | null>(null);\r\n    const virtualY = useRef<number>(0);\r\n    const addedY = useRef<number>(0);\r\n    const timeoutId = useRef<number | null>(null);\r\n\r\n    const getBounds = useCallback(() => {\r\n        const left = -currItem.current!.x - 35 + eventCoords.current!.offsetX;\r\n        const right = width - currItem.current!.rightX + 35 + (width / columns - eventCoords.current!.offsetX);\r\n        const top = -currItem.current!.y + 35 - eventCoords.current!.offsetY + 35 + 25;\r\n        const bottom = height.current - currItem.current!.y - 35 - (eventCoords.current!.offsetY + 35);\r\n        const pageTop = -eventCoords.current!.clientY + interfaceHeight + 35 + 25;\r\n        const pageBottom = window.innerHeight - window.innerHeight * 0.1 + pageTop - interfaceHeight - 25;\r\n        bounds.current = {left, right, top, bottom, pageTop, pageBottom}\r\n    }, [width, columns, interfaceHeight]);\r\n\r\n    const gesture = useDrag(({\r\n                                 args: [index, springsIndex], down, movement: [x, y],\r\n                                 active, first, event\r\n                             }) => {\r\n        if (scrollableState && isMobile) return;\r\n        event?.stopPropagation();\r\n        const draggedList = gridItems.current.findIndex(item => item.index === index);\r\n        if (!focusedStatus) {\r\n            dispatch(interfaceActions.setFocusedStatus(true))\r\n        }\r\n        if (first) {\r\n            currItem.current = gridItems.current[draggedList];\r\n            //@ts-ignore\r\n            eventCoords.current = {offsetX: event.offsetX, offsetY: event.offsetY, clientX: event.clientX, clientY: event.clientY};\r\n            getBounds();\r\n            virtualY.current = y;\r\n            addedY.current = 0;\r\n        }\r\n        if (timeoutId.current !== null) {\r\n            clearTimeout(timeoutId.current);\r\n            timeoutId.current = null\r\n        }\r\n        if (active) {\r\n            if (y > bounds.current.pageBottom && virtualY.current < bounds.current.bottom) {\r\n                const awaitScroll = async () => {\r\n                    const promise = new Promise((resolve) => {\r\n                        timeoutId.current = window.setTimeout(() => {\r\n                                scrollByListDrugging('bottom');\r\n                                virtualY.current = virtualY.current + 8;\r\n                                addedY.current = addedY.current + 8;\r\n                                const newIndex = calculatePositions(x, virtualY.current);\r\n                                if (newIndex !== null && newIndex !== draggedList) reorder(draggedList, newIndex);\r\n                                setActualSprings(x, virtualY.current, springsIndex)\r\n                                resolve()\r\n                            }\r\n                            , 10)\r\n                    });\r\n                    await promise.then(() => {\r\n                        if (virtualY.current < bounds.current.bottom) awaitScroll()\r\n                    })\r\n                }\r\n                (async () => await awaitScroll())()\r\n            } else if (y < bounds.current.pageTop && virtualY.current > bounds.current.top) {\r\n                const awaitScroll = async () => {\r\n                    const promise = new Promise((resolve) => {\r\n                        timeoutId.current = window.setTimeout(() => {\r\n                                scrollByListDrugging('top');\r\n                                virtualY.current = virtualY.current - 8;\r\n                                addedY.current = addedY.current - 8;\r\n                                const newIndex = calculatePositions(x, virtualY.current);\r\n                                if (newIndex !== null && newIndex !== draggedList) reorder(draggedList, newIndex);\r\n                                setActualSprings(x, virtualY.current, springsIndex)\r\n                                resolve()\r\n                            }\r\n                            , 10)\r\n                    });\r\n                    await promise.then(() => {\r\n                        if (virtualY.current > bounds.current.top) awaitScroll()\r\n                    })\r\n                }\r\n                (async () => await awaitScroll())()\r\n            } else {\r\n                virtualY.current = y + addedY.current;\r\n                const newIndex = calculatePositions(x, virtualY.current);\r\n                if (newIndex !== null && newIndex !== draggedList) reorder(draggedList, newIndex);\r\n                setActualSprings(x, virtualY.current, springsIndex)\r\n            }\r\n        }\r\n        if (!down) {\r\n            eventCoords.current = null;\r\n            setSprings(i => {\r\n                const currentSettings = gridItems.current.find((list) => list.index === todoLists.length - 1 - i)!;\r\n                return {x: currentSettings.x, y: currentSettings.y, zIndex: 3}\r\n            });\r\n            const newOrder = gridItems.current.map(item => item.id)\r\n            dispatch(stateActions.swapTodoLists(newOrder));\r\n            dispatch(interfaceActions.setFocusedStatus(false))\r\n        }\r\n    }, {filterTaps: true});\r\n\r\n    //close look logic\r\n    const [closeButtonAnimation, setCloseButtonAnimation] = useSpring(() => ({\r\n        x: 0,\r\n        y: 0,\r\n        opacity: 0,\r\n        display: 'none'\r\n    }));\r\n\r\n    const [indexOfLookedList, setIndexOfLookedList] = useState<number | null>(null);\r\n    const closeLook = useCallback(async (index: number) => {\r\n        if (editable || indexOfLookedList !== null) return;\r\n        dispatch(interfaceActions.setCloseLookState(true));\r\n        const currItem = gridItems.current.find(item => item.index === index)!;\r\n        switchScrollBar(false);\r\n        await setSprings(i => {\r\n            if (i !== todoLists.length - 1 - index) return {\r\n                to: async animate => {\r\n                    await animate({opacity: 0});\r\n                    await animate({display: 'none'})\r\n                }\r\n            };\r\n            return {to: false}\r\n        });\r\n        dispatch(interfaceActions.setHeight(currItem.height));\r\n        setWrapperAnimation({\r\n            x: window.innerWidth <= 1210 ? '5vw' : '15vw',\r\n            rotateX: 0,\r\n            rotateZ: 0,\r\n            y: 0,\r\n        })\r\n        setCloseLookState(currItem.height);\r\n        dispatch(interfaceActions.setPalette(neumorphColors[(todoLists.length - 1 - index) % neumorphColors.length]));\r\n        setIndexOfLookedList(index);\r\n        const itemY = currItem.height < window.innerHeight - 200 ? window.innerHeight / 2 - currItem.height / 2 : 100;\r\n        const itemX = width / 2 - (width / columns) / 2;\r\n        await setSprings(i => {\r\n            if (i !== todoLists.length - 1 - index) return {to: false};\r\n            return {y: itemY,x: itemX}\r\n        });\r\n        setCloseButtonAnimation({\r\n            to: async animate => {\r\n                const y = !isMobile ? itemY - 25 : itemY - 80;\r\n                const x = !isMobile ? width / 2 + (width / columns) / 2 - 10 : width / 2 - 30;\r\n                await animate({y, x, display: 'block', immediate: true});\r\n                await animate({opacity: 1, immediate: false})\r\n            }\r\n        })\r\n    }, [todoLists, setCloseLookState, indexOfLookedList, setCloseButtonAnimation, dispatch, columns, editable, setSprings,\r\n    width, switchScrollBar, setWrapperAnimation]);\r\n\r\n    const returnFromCloseLook = useCallback(async () => {\r\n        switchScrollBar(false)\r\n         await setCloseButtonAnimation({\r\n            to: async animate => {\r\n                await animate({opacity: 0});\r\n                await animate({display: 'none'})\r\n            }\r\n        });\r\n        returnFromCloseLookState();\r\n        dispatch(interfaceActions.setHeight(height.current));\r\n        setSprings(i => {\r\n            if (i !== todoLists.length - 1 - indexOfLookedList!) return {to: false};\r\n            const currItem = gridItems.current.find(item => item.index === indexOfLookedList)!\r\n            return {x: currItem.x, y: currItem.y}\r\n        });\r\n        await setWrapperAnimation({\r\n            x: window.innerWidth <= 1210 ? '-5vw' : '-15vw',\r\n            rotateX: 45,\r\n            rotateZ: 45,\r\n            y: 275,\r\n        });\r\n        switchScrollBar(true)\r\n        dispatch(interfaceActions.setPalette(defaultPalette));\r\n        setIndexOfLookedList(null);\r\n        setSprings(i => {\r\n            if (i !== todoLists.length - 1 - indexOfLookedList!) return {opacity: 1, display: 'block'};\r\n            return {to: false}\r\n        });\r\n        dispatch(interfaceActions.setCloseLookState(false));\r\n    }, [todoLists, returnFromCloseLookState, indexOfLookedList, dispatch, setSprings, switchScrollBar, setCloseButtonAnimation,\r\n        setWrapperAnimation]);\r\n\r\n    return (\r\n        <>\r\n            <ClosingButton returnFromCloseLook={returnFromCloseLook} closeButtonAnimation={closeButtonAnimation}/>\r\n            {todoLists.length !== 0 && todoLists.map((list, i) =>\r\n                <TodoListContainer\r\n                    style={springs[todoLists.length - i - 1]} {...editable && {...gesture(i, todoLists.length - i - 1)}}\r\n                    onClick={() => closeLook(i)}\r\n                    $width={currWidth} key={list.id}>\r\n                    <TodoList id={list.id} paletteIndex={(todoLists.length - 1 - i) % neumorphColors.length}\r\n                              deleteList={deleteList} setNewHeights={setNewHeights} currentLook={i === indexOfLookedList}\r\n                              listTitle={list.title} listTasks={list.tasks}/>\r\n                </TodoListContainer>)}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default React.memo(AllListsContainer, isEqual)","export const swap = (arr: Array<any>, index1: number, index2: number) => arr.map((val, idx) => {\n    if (idx === index1) return arr[index2];\n    if (idx === index2) return arr[index1];\n    return val;\n});\n","import React, {useCallback, useEffect, useLayoutEffect, useRef, useState} from \"react\";\r\nimport {shallowEqual, useDispatch, useSelector} from 'react-redux';\r\nimport {AppStateType} from \"../../../redux/store\";\r\nimport {useSpring} from \"react-spring\";\r\nimport {useDrag, useWheel} from \"react-use-gesture\";\r\nimport {isMobile} from 'react-device-detect'\r\nimport ScrollBar from \"./ScrollBar\";\r\nimport ScrollableWrapper from \"./ScrollableWrapper\";\r\nimport AllListsContainer from \"../DruggedLists/AllListsContainer\";\r\nimport {initialization} from \"../../../redux/stateReducer\";\r\nimport {interfaceActions} from \"../../../redux/interfaceReducer\";\r\n\r\nconst ScrollContainer: React.FC = () => {\r\n\r\n    const currentPalette = useSelector((store: AppStateType) => store.interface.currentPaletteIndex, shallowEqual);\r\n    const editable = useSelector((store: AppStateType) => store.todoList.editable, shallowEqual);\r\n    const height = useSelector((store: AppStateType) => store.interface.height, shallowEqual);\r\n    const width = useSelector((store: AppStateType) => store.interface.width, shallowEqual);\r\n    const initialLoadingState = useSelector((store: AppStateType) => store.interface.initialLoadingState, shallowEqual);\r\n    const closeLook = useSelector((store: AppStateType) => store.interface.closeLookState, shallowEqual);\r\n    const interfaceHeight = useSelector((state: AppStateType) => state.interface.interfaceHeight, shallowEqual);\r\n    const scrollableState = useSelector((state: AppStateType) => state.interface.scrollableState, shallowEqual);\r\n    const animationInProgress = useSelector((state: AppStateType) => state.interface.animationInProgress, shallowEqual);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        dispatch(initialization());\r\n        let isMounted = true;\r\n        let timeoutId: number | undefined = undefined;\r\n        const resizeListener = () => {\r\n            if (isMounted) {\r\n                clearTimeout(timeoutId);\r\n                timeoutId = window.setTimeout(() => dispatch(interfaceActions.setWidth(measuredRef.current!.offsetWidth)), 150);\r\n            }\r\n        };\r\n        window.addEventListener('resize', resizeListener);\r\n        return () => {\r\n            isMounted = false;\r\n            window.removeEventListener('resize', resizeListener);\r\n        }\r\n    }, [dispatch]);\r\n\r\n    const [{border, scrollBarHeight}, setBorders] = useState({border: 0, scrollBarHeight: 0});\r\n    const [drugged, setDrugged] = useState<boolean>(false);\r\n    const [visible, setVisible] = useState<boolean>(false);\r\n    const [closeLookForWrapper, setCloseLookForWrapper] = useState<boolean>(false);\r\n\r\n    const measuredRef = useRef<HTMLDivElement>(null);\r\n\r\n    useLayoutEffect(() => {\r\n        dispatch(interfaceActions.setWidth(measuredRef.current!.offsetWidth))\r\n    }, [dispatch]);\r\n\r\n    const [wrapperAnimation, setWrapperAnimation] = useSpring(() => ({\r\n        x: '-100vw',\r\n        rotateX: 45,\r\n        rotateZ: 45,\r\n        y: 275,\r\n        config: {tension: 90, clamp: true},\r\n    }));\r\n    useEffect(() => {\r\n        if (!initialLoadingState) setWrapperAnimation({\r\n            x: window.innerWidth <= 1210 ? '-5vw' : '-15vw',\r\n        })\r\n    }, [initialLoadingState, setWrapperAnimation])\r\n\r\n    //scroll logic\r\n    const scrolledY = useRef<number>(0);\r\n    const scrolledPercent = useRef<number>(0);\r\n    const addedScrollConst = useRef<number>(window.innerWidth <= 1210 ? -window.innerHeight / 2 : 0);\r\n    const memoizedData = useRef<Array<number>>([]);\r\n\r\n    const [scrollingAnimation, setScroll] = useSpring(() => ({\r\n        y: -addedScrollConst.current,\r\n        top: `0%`,\r\n        height: 0,\r\n        immediate: false\r\n    }));\r\n\r\n    //resize logic\r\n    useEffect(() => {\r\n        const newScrollBarHeight = !height ? 0 : (window.innerHeight - (editable ? interfaceHeight : 0)) / height * 100;\r\n        let newBorder: number;\r\n        if (!closeLook) {\r\n            newBorder = editable ? (height - window.innerHeight + interfaceHeight < 0 ? 0 : height - window.innerHeight + interfaceHeight)\r\n                : height;\r\n            setBorders({border: newBorder, scrollBarHeight: newScrollBarHeight});\r\n        } else if (window.innerWidth > 1210 && !closeLook) {\r\n            newBorder = editable ? (height - window.innerHeight + interfaceHeight < 0 ? 0 : height - window.innerHeight + interfaceHeight)\r\n                : (height - window.innerHeight < 0 ? 0.5 * height : height - window.innerHeight / 2);\r\n            setBorders({border: newBorder, scrollBarHeight: newScrollBarHeight});\r\n        } else newBorder = border\r\n        addedScrollConst.current = editable || closeLook ? 0 : window.innerWidth <= 1210 ? -window.innerHeight / 2 : 0;\r\n        if (!animationInProgress) {\r\n            if (scrolledY.current > newBorder) {\r\n                scrolledPercent.current = 100 - scrollBarHeight;\r\n                setScroll({height, y: -newBorder - addedScrollConst.current, top: `${scrolledPercent.current}%`})\r\n            } else {\r\n                scrolledPercent.current = scrolledY.current / newBorder * (100 - scrollBarHeight);\r\n                setScroll({height, y: -scrolledY.current - addedScrollConst.current, top: `${scrolledPercent.current}%`})\r\n            }\r\n        }\r\n        if (!initialLoadingState && !animationInProgress) setWrapperAnimation({\r\n            x: editable || closeLook ? (window.innerWidth <= 1210 ? '5vw' : '15vw') : (window.innerWidth <= 1210 ? '-5vw' : '-15vw'),\r\n            rotateX: editable || closeLook ? 0 : 45,\r\n            rotateZ: editable || closeLook ? 0 : 45,\r\n            y: editable || closeLook ? 0 : 275,\r\n        });\r\n        if (height < window.innerHeight - interfaceHeight) setVisible(false)\r\n        else if (!animationInProgress) setVisible(true)\r\n    }, [height, width, editable, setScroll, setWrapperAnimation, closeLook, interfaceHeight, initialLoadingState,\r\n        animationInProgress, border, scrollBarHeight]);\r\n\r\n    //event handlers\r\n    useWheel(({delta: [, y]}) => {\r\n        if (!visible) return;\r\n        scrolledY.current = scrolledY.current + y < border && scrolledY.current + y > 0 ? scrolledY.current + y\r\n            : scrolledY.current + y <= 0 ? 0 : border;\r\n        scrolledPercent.current = scrolledY.current / border * (100 - scrollBarHeight);\r\n        setScroll({\r\n            y: -scrolledY.current - addedScrollConst.current,\r\n            top: `${scrolledPercent.current}%`\r\n        });\r\n    }, {domTarget: window});\r\n    useDrag(({delta: [, y], active, swipe: [, swipeY]}) => {\r\n        if (isMobile && y < 0 && document.fullscreenElement === null) document.documentElement.requestFullscreen();\r\n        if (isMobile && y > 0 && document.fullscreenElement !== null) document.exitFullscreen();\r\n        if (!visible || (!isMobile && !scrollableState)) return;\r\n        if (swipeY !== 0) {\r\n            const scrolledHeight = (window.innerHeight - interfaceHeight) * swipeY;\r\n            scrolledY.current = scrolledY.current - scrolledHeight < border && scrolledY.current - scrolledHeight > 0 ?\r\n                scrolledY.current - scrolledHeight : scrolledY.current - scrolledHeight <= 0 ? 0 : border;\r\n        }\r\n        if (active) {\r\n            const posY = -y;\r\n            scrolledY.current = scrolledY.current + posY < border && scrolledY.current + posY > 0 ? scrolledY.current + posY\r\n                : scrolledY.current + posY <= 0 ? 0 : border;\r\n        }\r\n        scrolledPercent.current = scrolledY.current / border * (100 - scrollBarHeight);\r\n        setScroll({\r\n            y: -scrolledY.current - addedScrollConst.current,\r\n            top: `${scrolledPercent.current}%`\r\n        });\r\n    }, {domTarget: window, filterTaps: true, eventOptions: {passive: false}});\r\n\r\n    //scroller\r\n    const bindDraggedScrollBar = useDrag(({delta: [, y], event, first, down}) => {\r\n        event?.stopPropagation();\r\n        if (first) setDrugged(true);\r\n        const absY = y / (editable ? window.innerHeight - interfaceHeight : window.innerHeight) * 100;\r\n        scrolledPercent.current = scrolledPercent.current + absY > 0 && scrolledPercent.current + absY < 100 - scrollBarHeight ?\r\n            scrolledPercent.current + absY : scrolledPercent.current + absY <= 0 ? 0 : 100 - scrollBarHeight;\r\n        scrolledY.current = border * scrolledPercent.current / (100 - scrollBarHeight);\r\n        setScroll({\r\n            y: -scrolledY.current - addedScrollConst.current,\r\n            top: `${scrolledPercent.current}%`,\r\n            immediate: (prop) => prop === 'top'\r\n        });\r\n        if (!down) setDrugged(false)\r\n    });\r\n\r\n    const scrollByListDrugging = useCallback((direction: string) => {\r\n        if (direction === 'bottom' && scrolledY.current < border) {\r\n            scrolledY.current = scrolledY.current + 5 < border ? scrolledY.current + 5 : border;\r\n            scrolledPercent.current = scrolledY.current / border * (100 - scrollBarHeight);\r\n            setScroll({\r\n                y: -scrolledY.current,\r\n                top: `${scrolledPercent.current}%`\r\n            });\r\n        }\r\n        if (direction === 'top' && scrolledY.current > 0) {\r\n            scrolledY.current = scrolledY.current - 5 > 0 ? scrolledY.current - 5 : 0;\r\n            scrolledPercent.current = scrolledY.current / border * (100 - scrollBarHeight);\r\n            setScroll({\r\n                y: -scrolledY.current,\r\n                top: `${scrolledPercent.current}%`\r\n            });\r\n        }\r\n    }, [border, scrollBarHeight, setScroll])\r\n\r\n    const setCloseLookState = useCallback((elementHeight: number) => {\r\n        const newBorder = elementHeight > window.innerHeight - 200 ?\r\n            elementHeight - (window.innerHeight - 200) : 0;\r\n        if (newBorder > 0) {\r\n            memoizedData.current = [scrolledY.current, scrolledPercent.current, border, scrollBarHeight];\r\n            const newScrollBarHeight = (window.innerHeight - 200) / elementHeight * 100\r\n            setBorders({border: newBorder, scrollBarHeight: newScrollBarHeight})\r\n            scrolledY.current = 0;\r\n            scrolledPercent.current = 0;\r\n            setScroll({\r\n                y: 0,\r\n                top: `${0}%`,\r\n            });\r\n            setVisible(true);\r\n        }\r\n        if (newBorder === 0) {\r\n            memoizedData.current = [scrolledY.current, scrolledPercent.current, border, scrollBarHeight];\r\n            setBorders({border: 0, scrollBarHeight: 0});\r\n            scrolledY.current = 0;\r\n            scrolledPercent.current = 0;\r\n            setScroll({\r\n                y: 0,\r\n                top: `${0}%`,\r\n            });\r\n        }\r\n        setCloseLookForWrapper(true)\r\n    }, [border, scrollBarHeight, setScroll]);\r\n\r\n    const returnFromCloseLookState = useCallback(() => {\r\n        if (memoizedData.current.length !== 0) {\r\n            scrolledY.current = memoizedData.current[0];\r\n            scrolledPercent.current = memoizedData.current[1];\r\n            setBorders({border: memoizedData.current[2], scrollBarHeight: memoizedData.current[3]});\r\n            addedScrollConst.current = window.innerWidth <= 1210 ? -window.innerHeight / 2 : 0;\r\n            setScroll({\r\n                y: -memoizedData.current[0] - addedScrollConst.current,\r\n                top: `${memoizedData.current[1]}%`,\r\n            });\r\n        }\r\n        setCloseLookForWrapper(false)\r\n    }, [setScroll]);\r\n\r\n    const switchScrollBar = useCallback((visibility: boolean) => setVisible(visibility), []);\r\n\r\n    return (\r\n        <>\r\n            <ScrollableWrapper height={scrollingAnimation.height} visible={visible} closeLook={closeLookForWrapper}\r\n                               editable={editable}\r\n                               y={scrollingAnimation.y} interfaceHeight={interfaceHeight} measuredRef={measuredRef}\r\n                               wrapperAnimation={wrapperAnimation}>\r\n                <AllListsContainer setWrapperAnimation={setWrapperAnimation} scrollByListDrugging={scrollByListDrugging}\r\n                                  setCloseLookState={setCloseLookState}\r\n                                  returnFromCloseLookState={returnFromCloseLookState}\r\n                                  switchScrollBar={switchScrollBar}/>\r\n            </ScrollableWrapper>\r\n            <ScrollBar palette={currentPalette} visible={visible} editable={editable}\r\n                       interfaceHeight={interfaceHeight} drugged={drugged} top={scrollingAnimation.top}\r\n                       bindDraggedScrollBar={bindDraggedScrollBar} scrollBarHeight={scrollBarHeight}/>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default ScrollContainer;\r\n\r\n","import React, {useEffect} from \"react\";\r\nimport styled, {createGlobalStyle} from \"styled-components/macro\";\r\nimport {library} from \"@fortawesome/fontawesome-svg-core\";\r\nimport {far} from \"@fortawesome/free-regular-svg-icons\";\r\nimport {fas} from \"@fortawesome/free-solid-svg-icons\";\r\nimport AnimatedBackground from \"./Components/MainInterface/AnimatedBackground\";\r\nimport MainInterfaceContainer from \"./Components/MainInterface/MainInterfaceContainer\";\r\nimport ScrollContainer from \"./Components/AppAnimatedWrappers/ScrollableElements/ScrollContainer\";\r\n\r\nlibrary.add(far, fas);\r\n\r\nconst GlobalStyles = createGlobalStyle`\r\n  * {\r\n      box-sizing: border-box;\r\n      -webkit-font-smoothing: antialiased;\r\n      -moz-osx-font-smoothing: grayscale;\r\n      touch-action: none;\r\n    };\r\n  body {\r\n    background-color: white;\r\n    margin: 0;\r\n    padding: 0;\r\n    user-select: none;\r\n    outline: none;\r\n    &::-webkit-scrollbar { \r\n      display: none;\r\n    };\r\n  };\r\n  html {\r\n    -ms-overflow-style: none; \r\n  }\r\n`;\r\n\r\nconst Wrapper = styled.div`\r\n    position: fixed;\r\n    height: 100vh;\r\n    width: 100vw;\r\n    overflow: hidden;\r\n`;\r\n\r\nconst App: React.FC = () => {\r\n\r\n    useEffect(() => {\r\n        const reloadFunction = () => document.location.reload()\r\n        window.addEventListener(\"orientationchange\", reloadFunction)\r\n        return () => window.removeEventListener(\"orientationchange\", reloadFunction)\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <GlobalStyles/>\r\n            <AnimatedBackground/>\r\n            <Wrapper>\r\n                <MainInterfaceContainer/>\r\n                <ScrollContainer/>\r\n            </Wrapper>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default App;\r\n\r\n","import {applyMiddleware, combineReducers, createStore} from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport {composeWithDevTools} from 'redux-devtools-extension';\r\nimport interfaceReducer from \"./interfaceReducer\";\r\nimport stateReducer from \"./stateReducer\";\r\n\r\nconst rootReducer = combineReducers({\r\n    todoList: stateReducer,\r\n    interface: interfaceReducer\r\n});\r\n\r\ntype RootReducerType = typeof rootReducer;\r\nexport type AppStateType = ReturnType<RootReducerType>;\r\n\r\ntype PropertiesType<T> = T extends { [key: string]: infer U } ? U : never;\r\nexport type InferActionTypes<T extends { [key: string]: (...args: any) => any }> = ReturnType<PropertiesType<T>>\r\n\r\nconst store = createStore(rootReducer, composeWithDevTools(applyMiddleware(thunk)));\r\n\r\nexport default store;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './App.css';\r\nimport store from \"./redux/store\";\r\nimport {Provider} from \"react-redux\";\r\n/// <reference types=\"react-dom/experimental\"\r\n/*ReactDOM.render(\r\n    <Provider store={store}>\r\n        <App/>\r\n    </Provider>,\r\n    document.getElementById('root'));*/\r\n\r\nconst root = document.getElementById(\"root\") as HTMLElement;\r\n// @ts-ignore\r\nReactDOM.unstable_createRoot(root).render( <Provider store={store}>\r\n    <App/>\r\n</Provider>);\r\n\r\n"],"sourceRoot":""}